"use strict";var Zd=Object.create;var Un=Object.defineProperty;var Jd=Object.getOwnPropertyDescriptor;var Xd=Object.getOwnPropertyNames;var Kd=Object.getPrototypeOf,Yd=Object.prototype.hasOwnProperty;var o=(t,e)=>Un(t,"name",{value:e,configurable:!0});var em=(t,e)=>()=>(t&&(e=t(t=0)),e);var Z=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),tm=(t,e)=>{for(var n in e)Un(t,n,{get:e[n],enumerable:!0})},_a=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Xd(e))!Yd.call(t,s)&&s!==n&&Un(t,s,{get:()=>e[s],enumerable:!(r=Jd(e,s))||r.enumerable});return t};var Ct=(t,e,n)=>(n=t!=null?Zd(Kd(t)):{},_a(e||!t||!t.__esModule?Un(n,"default",{value:t,enumerable:!0}):n,t)),nm=t=>_a(Un({},"__esModule",{value:!0}),t);var importMetaUrlShim,b=em(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var Ra=Z((exports,module)=>{b();var Module=typeof Module<"u"?Module:{},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{o(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=o((t,e)=>{throw e},"quit_"),scriptDirectory="";function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}o(locateFile,"locateFile");var readAsync,readBinary;if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=__dirname+"/",readBinary=o(t=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t);var e=fs.readFileSync(t);return e},"readBinary"),readAsync=o((t,e=!0)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),new Promise((n,r)=>{fs.readFile(t,e?void 0:"utf8",(s,a)=>{s?r(s):n(e?a.buffer:a)})})),"readAsync"),!Module.thisProgram&&process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=o((t,e)=>{throw process.exitCode=t,e},"quit_")}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:typeof document<"u"&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory.startsWith("blob:")?scriptDirectory="":scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1),ENVIRONMENT_IS_WORKER&&(readBinary=o(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=o(t=>isFileURI(t)?new Promise((e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{(r.status==200||r.status==0&&r.response)&&n(r.response),e(r.status)},r.onerror=e,r.send(null)}):fetch(t,{credentials:"same-origin"}).then(e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))),"readAsync"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.error.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var wasmMemory,ABORT=!1,EXITSTATUS,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,HEAP_DATA_VIEW;function updateMemoryViews(){var t=wasmMemory.buffer;Module.HEAP_DATA_VIEW=HEAP_DATA_VIEW=new DataView(t),Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}if(o(updateMemoryViews,"updateMemoryViews"),Module.wasmMemory)wasmMemory=Module.wasmMemory;else{var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:2147483648/65536})}updateMemoryViews();var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}o(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}o(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}o(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}o(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}o(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}o(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}o(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(t){return t}o(getUniqueRunDependency,"getUniqueRunDependency");function addRunDependency(t){runDependencies++,Module.monitorRunDependencies?.(runDependencies)}o(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies?.(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}o(removeRunDependency,"removeRunDependency");function abort(t){Module.onAbort?.(t),t="Aborted("+t+")",err(t),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(t);throw e}o(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",isDataURI=o(t=>t.startsWith(dataURIPrefix),"isDataURI"),isFileURI=o(t=>t.startsWith("file://"),"isFileURI");function findWasmBinary(){var t="tree-sitter.wasm";return isDataURI(t)?t:locateFile(t)}o(findWasmBinary,"findWasmBinary");var wasmBinaryFile;function getBinarySync(t){if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}o(getBinarySync,"getBinarySync");function getBinaryPromise(t){return wasmBinary?Promise.resolve().then(()=>getBinarySync(t)):readAsync(t).then(e=>new Uint8Array(e),()=>getBinarySync(t))}o(getBinaryPromise,"getBinaryPromise");function instantiateArrayBuffer(t,e,n){return getBinaryPromise(t).then(r=>WebAssembly.instantiate(r,e)).then(n,r=>{err(`failed to asynchronously prepare wasm: ${r}`),abort(r)})}o(instantiateArrayBuffer,"instantiateArrayBuffer");function instantiateAsync(t,e,n,r){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(e)&&!isFileURI(e)&&!ENVIRONMENT_IS_NODE&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(s=>{var a=WebAssembly.instantiateStreaming(s,n);return a.then(r,function(u){return err(`wasm streaming compile failed: ${u}`),err("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(e,n,r)})}):instantiateArrayBuffer(e,n,r)}o(instantiateAsync,"instantiateAsync");function getWasmImports(){return{env:wasmImports,wasi_snapshot_preview1:wasmImports,"GOT.mem":new Proxy(wasmImports,GOTHandler),"GOT.func":new Proxy(wasmImports,GOTHandler)}}o(getWasmImports,"getWasmImports");function createWasm(){var t=getWasmImports();function e(r,s){wasmExports=r.exports,wasmExports=relocateExports(wasmExports,1024);var a=getDylinkMetadata(s);return a.neededDynlibs&&(dynamicLibraries=a.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(wasmExports,"main"),LDSO.init(),loadDylibs(),addOnInit(wasmExports.__wasm_call_ctors),__RELOC_FUNCS__.push(wasmExports.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate"),wasmExports}o(e,"receiveInstance"),addRunDependency("wasm-instantiate");function n(r){e(r.instance,r.module)}if(o(n,"receiveInstantiationResult"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(r){return err(`Module.instantiateWasm callback failed with error: ${r}`),!1}return wasmBinaryFile||(wasmBinaryFile=findWasmBinary()),instantiateAsync(wasmBinary,wasmBinaryFile,t,n),{}}o(createWasm,"createWasm");var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}o(ExitStatus,"ExitStatus");var GOT={},currentModuleWeakSymbols=new Set([]),GOTHandler={get(t,e){var n=GOT[e];return n||(n=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),currentModuleWeakSymbols.has(e)||(n.required=!0),n}},LE_HEAP_LOAD_F32=o(t=>HEAP_DATA_VIEW.getFloat32(t,!0),"LE_HEAP_LOAD_F32"),LE_HEAP_LOAD_F64=o(t=>HEAP_DATA_VIEW.getFloat64(t,!0),"LE_HEAP_LOAD_F64"),LE_HEAP_LOAD_I16=o(t=>HEAP_DATA_VIEW.getInt16(t,!0),"LE_HEAP_LOAD_I16"),LE_HEAP_LOAD_I32=o(t=>HEAP_DATA_VIEW.getInt32(t,!0),"LE_HEAP_LOAD_I32"),LE_HEAP_LOAD_U32=o(t=>HEAP_DATA_VIEW.getUint32(t,!0),"LE_HEAP_LOAD_U32"),LE_HEAP_STORE_F32=o((t,e)=>HEAP_DATA_VIEW.setFloat32(t,e,!0),"LE_HEAP_STORE_F32"),LE_HEAP_STORE_F64=o((t,e)=>HEAP_DATA_VIEW.setFloat64(t,e,!0),"LE_HEAP_STORE_F64"),LE_HEAP_STORE_I16=o((t,e)=>HEAP_DATA_VIEW.setInt16(t,e,!0),"LE_HEAP_STORE_I16"),LE_HEAP_STORE_I32=o((t,e)=>HEAP_DATA_VIEW.setInt32(t,e,!0),"LE_HEAP_STORE_I32"),LE_HEAP_STORE_U32=o((t,e)=>HEAP_DATA_VIEW.setUint32(t,e,!0),"LE_HEAP_STORE_U32"),callRuntimeCallbacks=o(t=>{for(;t.length>0;)t.shift()(Module)},"callRuntimeCallbacks"),UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder:void 0,UTF8ArrayToString=o((t,e,n)=>{for(var r=e+n,s=e;t[s]&&!(s>=r);)++s;if(s-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,s));for(var a="";e<s;){var u=t[e++];if(!(u&128)){a+=String.fromCharCode(u);continue}var d=t[e++]&63;if((u&224)==192){a+=String.fromCharCode((u&31)<<6|d);continue}var _=t[e++]&63;if((u&240)==224?u=(u&15)<<12|d<<6|_:u=(u&7)<<18|d<<12|_<<6|t[e++]&63,u<65536)a+=String.fromCharCode(u);else{var p=u-65536;a+=String.fromCharCode(55296|p>>10,56320|p&1023)}}return a},"UTF8ArrayToString"),getDylinkMetadata=o(t=>{var e=0,n=0;function r(){return t[e++]}o(r,"getU8");function s(){for(var W=0,D=1;;){var T=t[e++];if(W+=(T&127)*D,D*=128,!(T&128))break}return W}o(s,"getLEB");function a(){var W=s();return e+=W,UTF8ArrayToString(t,e-W,W)}o(a,"getString");function u(W,D){if(W)throw new Error(D)}o(u,"failIf");var d="dylink.0";if(t instanceof WebAssembly.Module){var _=WebAssembly.Module.customSections(t,d);_.length===0&&(d="dylink",_=WebAssembly.Module.customSections(t,d)),u(_.length===0,"need dylink section"),t=new Uint8Array(_[0]),n=t.length}else{var p=new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer),x=p[0]==1836278016||p[0]==6386541;u(!x,"need to see wasm magic number"),u(t[8]!==0,"need the dylink section to be first"),e=9;var P=s();n=e+P,d=a()}var E={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(d=="dylink"){E.memorySize=s(),E.memoryAlign=s(),E.tableSize=s(),E.tableAlign=s();for(var A=s(),V=0;V<A;++V){var j=a();E.neededDynlibs.push(j)}}else{u(d!=="dylink.0");for(var Q=1,z=2,L=3,G=4,ie=256,re=3,be=1;e<n;){var ee=r(),le=s();if(ee===Q)E.memorySize=s(),E.memoryAlign=s(),E.tableSize=s(),E.tableAlign=s();else if(ee===z)for(var A=s(),V=0;V<A;++V)j=a(),E.neededDynlibs.push(j);else if(ee===L)for(var Se=s();Se--;){var Te=a(),F=s();F&ie&&E.tlsExports.add(Te)}else if(ee===G)for(var Se=s();Se--;){var R=a(),Te=a(),F=s();(F&re)==be&&E.weakImports.add(Te)}else e+=le}}return E},"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return HEAP8[t];case"i8":return HEAP8[t];case"i16":return LE_HEAP_LOAD_I16((t>>1)*2);case"i32":return LE_HEAP_LOAD_I32((t>>2)*4);case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return LE_HEAP_LOAD_F32((t>>2)*4);case"double":return LE_HEAP_LOAD_F64((t>>3)*8);case"*":return LE_HEAP_LOAD_U32((t>>2)*4);default:abort(`invalid type for getValue: ${e}`)}}o(getValue,"getValue");var newDSO=o((t,e,n)=>{var r={refcount:1/0,name:t,exports:n,global:!0};return LDSO.loadedLibsByName[t]=r,e!=null&&(LDSO.loadedLibsByHandle[e]=r),r},"newDSO"),LDSO={loadedLibsByName:{},loadedLibsByHandle:{},init(){newDSO("__main__",0,wasmImports)}},___heap_base=78112,zeroMemory=o((t,e)=>(HEAPU8.fill(0,t,t+e),t),"zeroMemory"),alignMemory=o((t,e)=>Math.ceil(t/e)*e,"alignMemory"),getMemory=o(t=>{if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,n=e+alignMemory(t,16);return ___heap_base=n,GOT.__heap_base.value=n,e},"getMemory"),isInternalSym=o(t=>["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm","__start_em_js","__stop_em_js"].includes(t)||t.startsWith("__em_js__"),"isInternalSym"),uleb128Encode=o((t,e)=>{t<128?e.push(t):e.push(t%128|128,t>>7)},"uleb128Encode"),sigToWasmTypes=o(t=>{for(var e={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},n={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},r=1;r<t.length;++r)n.parameters.push(e[t[r]]);return n},"sigToWasmTypes"),generateFuncType=o((t,e)=>{var n=t.slice(0,1),r=t.slice(1),s={i:127,p:127,j:126,f:125,d:124,e:111};e.push(96),uleb128Encode(r.length,e);for(var a=0;a<r.length;++a)e.push(s[r[a]]);n=="v"?e.push(0):e.push(1,s[n])},"generateFuncType"),convertJsFunctionToWasm=o((t,e)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var n=[1];generateFuncType(e,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push(...n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var s=new WebAssembly.Module(new Uint8Array(r)),a=new WebAssembly.Instance(s,{e:{f:t}}),u=a.exports.f;return u},"convertJsFunctionToWasm"),wasmTableMirror=[],wasmTable=new WebAssembly.Table({initial:28,element:"anyfunc"}),getWasmTableEntry=o(t=>{var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e},"getWasmTableEntry"),updateTableMap=o((t,e)=>{if(functionsInTableMap)for(var n=t;n<t+e;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}},"updateTableMap"),functionsInTableMap,getFunctionAddress=o(t=>(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.get(t)||0),"getFunctionAddress"),freeTableIndexes=[],getEmptyTableSlot=o(()=>{if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1},"getEmptyTableSlot"),setWasmTableEntry=o((t,e)=>{wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)},"setWasmTableEntry"),addFunction=o((t,e)=>{var n=getFunctionAddress(t);if(n)return n;var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(a){if(!(a instanceof TypeError))throw a;var s=convertJsFunctionToWasm(t,e);setWasmTableEntry(r,s)}return functionsInTableMap.set(t,r),r},"addFunction"),updateGOT=o((t,e)=>{for(var n in t)if(!isInternalSym(n)){var r=t[n];n.startsWith("orig$")&&(n=n.split("$")[1],e=!0),GOT[n]||=new WebAssembly.Global({value:"i32",mutable:!0}),(e||GOT[n].value==0)&&(typeof r=="function"?GOT[n].value=addFunction(r):typeof r=="number"?GOT[n].value=r:err(`unhandled export type for '${n}': ${typeof r}`))}},"updateGOT"),relocateExports=o((t,e,n)=>{var r={};for(var s in t){var a=t[s];typeof a=="object"&&(a=a.value),typeof a=="number"&&(a+=e),r[s]=a}return updateGOT(r,n),r},"relocateExports"),isSymbolDefined=o(t=>{var e=wasmImports[t];return!(!e||e.stub)},"isSymbolDefined"),dynCallLegacy=o((t,e,n)=>{t=t.replace(/p/g,"i");var r=Module["dynCall_"+t];return r(e,...n)},"dynCallLegacy"),dynCall=o((t,e,n=[])=>{if(t.includes("j"))return dynCallLegacy(t,e,n);var r=getWasmTableEntry(e)(...n);return r},"dynCall"),stackSave=o(()=>_emscripten_stack_get_current(),"stackSave"),stackRestore=o(t=>__emscripten_stack_restore(t),"stackRestore"),createInvokeFunction=o(t=>(e,...n)=>{var r=stackSave();try{return dynCall(t,e,n)}catch(s){if(stackRestore(r),s!==s+0)throw s;_setThrew(1,0)}},"createInvokeFunction"),resolveGlobalSymbol=o((t,e=!1)=>{var n;return e&&"orig$"+t in wasmImports&&(t="orig$"+t),isSymbolDefined(t)?n=wasmImports[t]:t.startsWith("invoke_")&&(n=wasmImports[t]=createInvokeFunction(t.split("_")[1])),{sym:n,name:t}},"resolveGlobalSymbol"),UTF8ToString=o((t,e)=>t?UTF8ArrayToString(HEAPU8,t,e):"","UTF8ToString"),loadWebAssemblyModule=o((binary,flags,libName,localScope,handle)=>{var metadata=getDylinkMetadata(binary);currentModuleWeakSymbols=metadata.weakImports;function loadModule(){var firstLoad=!handle||!HEAP8[handle+8];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign),memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+8]=1,LE_HEAP_STORE_U32((handle+12>>2)*4,memoryBase),LE_HEAP_STORE_I32((handle+16>>2)*4,metadata.memorySize),LE_HEAP_STORE_U32((handle+20>>2)*4,tableBase),LE_HEAP_STORE_I32((handle+24>>2)*4,metadata.tableSize))}else memoryBase=LE_HEAP_LOAD_U32((handle+12>>2)*4),tableBase=LE_HEAP_LOAD_U32((handle+20>>2)*4);var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length;tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t).sym;return!e&&localScope&&(e=localScope[t]),e||(e=moduleExports[t]),e}o(resolveSymbol,"resolveSymbol");var proxyHandler={get(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in wasmImports&&!wasmImports[e].stub)return wasmImports[e];if(!(e in t)){var n;t[e]=(...r)=>(n||=resolveSymbol(e),n(...r))}return t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(module,instance){updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols();function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func=`(${args}) => { ${body} };`;ASM_CONSTS[start]=eval(func)}if(o(addEmAsm,"addEmAsm"),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}function addEmJs(name,cSig,body){var jsArgs=[];if(cSig=cSig.slice(1,-1),cSig!="void"){cSig=cSig.split(",");for(var i in cSig){var jsArg=cSig[i].split(" ").pop();jsArgs.push(jsArg.replace("*",""))}}var func=`(${jsArgs}) => ${body};`;moduleExports[name]=eval(func)}o(addEmJs,"addEmJs");for(var name in moduleExports)if(name.startsWith("__em_js__")){var start=moduleExports[name],jsString=UTF8ToString(start),parts=jsString.split("<::>");addEmJs(name.replace("__em_js__",""),parts[0],parts[1]),delete moduleExports[name]}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(o(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(binary,instance))}return WebAssembly.instantiate(binary,info).then(t=>postInstantiation(t.module,t.instance))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(module,instance)}return o(loadModule,"loadModule"),flags.loadAsync?metadata.neededDynlibs.reduce((t,e)=>t.then(()=>loadDynamicLibrary(e,flags,localScope)),Promise.resolve()).then(loadModule):(metadata.neededDynlibs.forEach(t=>loadDynamicLibrary(t,flags,localScope)),loadModule())},"loadWebAssemblyModule"),mergeLibSymbols=o((t,e)=>{for(var[n,r]of Object.entries(t)){let s=o(u=>{isSymbolDefined(u)||(wasmImports[u]=r)},"setImport");s(n);let a="__main_argc_argv";n=="main"&&s(a),n==a&&s("main"),n.startsWith("dynCall_")&&!Module.hasOwnProperty(n)&&(Module[n]=r)}},"mergeLibSymbols"),asyncLoad=o((t,e,n,r)=>{var s=r?"":`al ${t}`;readAsync(t).then(a=>{e(new Uint8Array(a)),s&&removeRunDependency(s)},a=>{if(n)n();else throw`Loading data file "${t}" failed.`}),s&&addRunDependency(s)},"asyncLoad");function loadDynamicLibrary(t,e={global:!0,nodelete:!0},n,r){var s=LDSO.loadedLibsByName[t];if(s)return e.global?s.global||(s.global=!0,mergeLibSymbols(s.exports,t)):n&&Object.assign(n,s.exports),e.nodelete&&s.refcount!==1/0&&(s.refcount=1/0),s.refcount++,r&&(LDSO.loadedLibsByHandle[r]=s),e.loadAsync?Promise.resolve(!0):!0;s=newDSO(t,r,"loading"),s.refcount=e.nodelete?1/0:1,s.global=e.global;function a(){if(r){var _=LE_HEAP_LOAD_U32((r+28>>2)*4),p=LE_HEAP_LOAD_U32((r+32>>2)*4);if(_&&p){var x=HEAP8.slice(_,_+p);return e.loadAsync?Promise.resolve(x):x}}var P=locateFile(t);if(e.loadAsync)return new Promise(function(E,A){asyncLoad(P,E,A)});if(!readBinary)throw new Error(`${P}: file not found, and synchronous loading of external files is not available`);return readBinary(P)}o(a,"loadLibData");function u(){return e.loadAsync?a().then(_=>loadWebAssemblyModule(_,e,t,n,r)):loadWebAssemblyModule(a(),e,t,n,r)}o(u,"getExports");function d(_){s.global?mergeLibSymbols(_,t):n&&Object.assign(n,_),s.exports=_}return o(d,"moduleLoaded"),e.loadAsync?u().then(_=>(d(_),!0)):(d(u()),!0)}o(loadDynamicLibrary,"loadDynamicLibrary");var reportUndefinedSymbols=o(()=>{for(var[t,e]of Object.entries(GOT))if(e.value==0){var n=resolveGlobalSymbol(t,!0).sym;if(!n&&!e.required)continue;if(typeof n=="function")e.value=addFunction(n,n.sig);else if(typeof n=="number")e.value=n;else throw new Error(`bad export type for '${t}': ${typeof n}`)}},"reportUndefinedSymbols"),loadDylibs=o(()=>{if(!dynamicLibraries.length){reportUndefinedSymbols();return}addRunDependency("loadDylibs"),dynamicLibraries.reduce((t,e)=>t.then(()=>loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})),Promise.resolve()).then(()=>{reportUndefinedSymbols(),removeRunDependency("loadDylibs")})},"loadDylibs"),noExitRuntime=Module.noExitRuntime||!0;function setValue(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":HEAP8[t]=e;break;case"i8":HEAP8[t]=e;break;case"i16":LE_HEAP_STORE_I16((t>>1)*2,e);break;case"i32":LE_HEAP_STORE_I32((t>>2)*4,e);break;case"i64":abort("to do setValue(i64) use WASM_BIGINT");case"float":LE_HEAP_STORE_F32((t>>2)*4,e);break;case"double":LE_HEAP_STORE_F64((t>>3)*8,e);break;case"*":LE_HEAP_STORE_U32((t>>2)*4,e);break;default:abort(`invalid type for setValue: ${n}`)}}o(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78112),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),__abort_js=o(()=>{abort("")},"__abort_js");__abort_js.sig="v";var nowIsMonotonic=1,__emscripten_get_now_is_monotonic=o(()=>nowIsMonotonic,"__emscripten_get_now_is_monotonic");__emscripten_get_now_is_monotonic.sig="i";var __emscripten_memcpy_js=o((t,e,n)=>HEAPU8.copyWithin(t,e,e+n),"__emscripten_memcpy_js");__emscripten_memcpy_js.sig="vppp";var _emscripten_date_now=o(()=>Date.now(),"_emscripten_date_now");_emscripten_date_now.sig="d";var _emscripten_get_now;_emscripten_get_now=o(()=>performance.now(),"_emscripten_get_now"),_emscripten_get_now.sig="d";var getHeapMax=o(()=>2147483648,"getHeapMax"),growMemory=o(t=>{var e=wasmMemory.buffer,n=(t-e.byteLength+65535)/65536;try{return wasmMemory.grow(n),updateMemoryViews(),1}catch{}},"growMemory"),_emscripten_resize_heap=o(t=>{var e=HEAPU8.length;t>>>=0;var n=getHeapMax();if(t>n)return!1;for(var r=o((_,p)=>_+(p-_%p)%p,"alignUp"),s=1;s<=4;s*=2){var a=e*(1+.2/s);a=Math.min(a,t+100663296);var u=Math.min(n,r(Math.max(t,a),65536)),d=growMemory(u);if(d)return!0}return!1},"_emscripten_resize_heap");_emscripten_resize_heap.sig="ip";var _fd_close=o(t=>52,"_fd_close");_fd_close.sig="ii";var convertI32PairToI53Checked=o((t,e)=>e+2097152>>>0<4194305-!!t?(t>>>0)+e*4294967296:NaN,"convertI32PairToI53Checked");function _fd_seek(t,e,n,r,s){var a=convertI32PairToI53Checked(e,n);return 70}o(_fd_seek,"_fd_seek"),_fd_seek.sig="iiiiip";var printCharBuffers=[null,[],[]],printChar=o((t,e)=>{var n=printCharBuffers[t];e===0||e===10?((t===1?out:err)(UTF8ArrayToString(n,0)),n.length=0):n.push(e)},"printChar"),_fd_write=o((t,e,n,r)=>{for(var s=0,a=0;a<n;a++){var u=LE_HEAP_LOAD_U32((e>>2)*4),d=LE_HEAP_LOAD_U32((e+4>>2)*4);e+=8;for(var _=0;_<d;_++)printChar(t,HEAPU8[u+_]);s+=d}return LE_HEAP_STORE_U32((r>>2)*4,s),0},"_fd_write");_fd_write.sig="iippp";function _tree_sitter_log_callback(t,e){if(currentLogCallback){let n=UTF8ToString(e);currentLogCallback(n,t!==0)}}o(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,n,r,s){let u=currentParseCallback(e,{row:n,column:r});typeof u=="string"?(setValue(s,u.length,"i32"),stringToUTF16(u,t,10240)):setValue(s,0,"i32")}o(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");var runtimeKeepaliveCounter=0,keepRuntimeAlive=o(()=>noExitRuntime||runtimeKeepaliveCounter>0,"keepRuntimeAlive"),_proc_exit=o(t=>{EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit?.(t),ABORT=!0),quit_(t,new ExitStatus(t))},"_proc_exit");_proc_exit.sig="vi";var exitJS=o((t,e)=>{EXITSTATUS=t,_proc_exit(t)},"exitJS"),handleException=o(t=>{if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)},"handleException"),lengthBytesUTF8=o(t=>{for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e},"lengthBytesUTF8"),stringToUTF8Array=o((t,e,n,r)=>{if(!(r>0))return 0;for(var s=n,a=n+r-1,u=0;u<t.length;++u){var d=t.charCodeAt(u);if(d>=55296&&d<=57343){var _=t.charCodeAt(++u);d=65536+((d&1023)<<10)|_&1023}if(d<=127){if(n>=a)break;e[n++]=d}else if(d<=2047){if(n+1>=a)break;e[n++]=192|d>>6,e[n++]=128|d&63}else if(d<=65535){if(n+2>=a)break;e[n++]=224|d>>12,e[n++]=128|d>>6&63,e[n++]=128|d&63}else{if(n+3>=a)break;e[n++]=240|d>>18,e[n++]=128|d>>12&63,e[n++]=128|d>>6&63,e[n++]=128|d&63}}return e[n]=0,n-s},"stringToUTF8Array"),stringToUTF8=o((t,e,n)=>stringToUTF8Array(t,HEAPU8,e,n),"stringToUTF8"),stackAlloc=o(t=>__emscripten_stack_alloc(t),"stackAlloc"),stringToUTF8OnStack=o(t=>{var e=lengthBytesUTF8(t)+1,n=stackAlloc(e);return stringToUTF8(t,n,e),n},"stringToUTF8OnStack"),stringToUTF16=o((t,e,n)=>{if(n??=2147483647,n<2)return 0;n-=2;for(var r=e,s=n<t.length*2?n/2:t.length,a=0;a<s;++a){var u=t.charCodeAt(a);LE_HEAP_STORE_I16((e>>1)*2,u),e+=2}return LE_HEAP_STORE_I16((e>>1)*2,0),e-r},"stringToUTF16"),AsciiToString=o(t=>{for(var e="";;){var n=HEAPU8[t++];if(!n)return e;e+=String.fromCharCode(n)}},"AsciiToString"),wasmImports={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_abort_js:__abort_js,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,_emscripten_memcpy_js:__emscripten_memcpy_js,emscripten_get_now:_emscripten_get_now,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},wasmExports=createWasm(),___wasm_call_ctors=o(()=>(___wasm_call_ctors=wasmExports.__wasm_call_ctors)(),"___wasm_call_ctors"),___wasm_apply_data_relocs=o(()=>(___wasm_apply_data_relocs=wasmExports.__wasm_apply_data_relocs)(),"___wasm_apply_data_relocs"),_malloc=Module._malloc=t=>(_malloc=Module._malloc=wasmExports.malloc)(t),_calloc=Module._calloc=(t,e)=>(_calloc=Module._calloc=wasmExports.calloc)(t,e),_realloc=Module._realloc=(t,e)=>(_realloc=Module._realloc=wasmExports.realloc)(t,e),_free=Module._free=t=>(_free=Module._free=wasmExports.free)(t),_ts_language_symbol_count=Module._ts_language_symbol_count=t=>(_ts_language_symbol_count=Module._ts_language_symbol_count=wasmExports.ts_language_symbol_count)(t),_ts_language_state_count=Module._ts_language_state_count=t=>(_ts_language_state_count=Module._ts_language_state_count=wasmExports.ts_language_state_count)(t),_ts_language_version=Module._ts_language_version=t=>(_ts_language_version=Module._ts_language_version=wasmExports.ts_language_version)(t),_ts_language_field_count=Module._ts_language_field_count=t=>(_ts_language_field_count=Module._ts_language_field_count=wasmExports.ts_language_field_count)(t),_ts_language_next_state=Module._ts_language_next_state=(t,e,n)=>(_ts_language_next_state=Module._ts_language_next_state=wasmExports.ts_language_next_state)(t,e,n),_ts_language_symbol_name=Module._ts_language_symbol_name=(t,e)=>(_ts_language_symbol_name=Module._ts_language_symbol_name=wasmExports.ts_language_symbol_name)(t,e),_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=(t,e,n,r)=>(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=wasmExports.ts_language_symbol_for_name)(t,e,n,r),_strncmp=Module._strncmp=(t,e,n)=>(_strncmp=Module._strncmp=wasmExports.strncmp)(t,e,n),_ts_language_symbol_type=Module._ts_language_symbol_type=(t,e)=>(_ts_language_symbol_type=Module._ts_language_symbol_type=wasmExports.ts_language_symbol_type)(t,e),_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=(t,e)=>(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=wasmExports.ts_language_field_name_for_id)(t,e),_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=(t,e)=>(_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=wasmExports.ts_lookahead_iterator_new)(t,e),_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=t=>(_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=wasmExports.ts_lookahead_iterator_delete)(t),_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=(t,e)=>(_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=wasmExports.ts_lookahead_iterator_reset_state)(t,e),_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=(t,e,n)=>(_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=wasmExports.ts_lookahead_iterator_reset)(t,e,n),_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=t=>(_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=wasmExports.ts_lookahead_iterator_next)(t),_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=t=>(_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=wasmExports.ts_lookahead_iterator_current_symbol)(t),_memset=Module._memset=(t,e,n)=>(_memset=Module._memset=wasmExports.memset)(t,e,n),_memcpy=Module._memcpy=(t,e,n)=>(_memcpy=Module._memcpy=wasmExports.memcpy)(t,e,n),_ts_parser_delete=Module._ts_parser_delete=t=>(_ts_parser_delete=Module._ts_parser_delete=wasmExports.ts_parser_delete)(t),_ts_parser_reset=Module._ts_parser_reset=t=>(_ts_parser_reset=Module._ts_parser_reset=wasmExports.ts_parser_reset)(t),_ts_parser_set_language=Module._ts_parser_set_language=(t,e)=>(_ts_parser_set_language=Module._ts_parser_set_language=wasmExports.ts_parser_set_language)(t,e),_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=t=>(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=wasmExports.ts_parser_timeout_micros)(t),_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=(t,e,n)=>(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=wasmExports.ts_parser_set_timeout_micros)(t,e,n),_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=(t,e,n)=>(_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=wasmExports.ts_parser_set_included_ranges)(t,e,n),_memmove=Module._memmove=(t,e,n)=>(_memmove=Module._memmove=wasmExports.memmove)(t,e,n),_memcmp=Module._memcmp=(t,e,n)=>(_memcmp=Module._memcmp=wasmExports.memcmp)(t,e,n),_ts_query_new=Module._ts_query_new=(t,e,n,r,s)=>(_ts_query_new=Module._ts_query_new=wasmExports.ts_query_new)(t,e,n,r,s),_ts_query_delete=Module._ts_query_delete=t=>(_ts_query_delete=Module._ts_query_delete=wasmExports.ts_query_delete)(t),_iswspace=Module._iswspace=t=>(_iswspace=Module._iswspace=wasmExports.iswspace)(t),_iswalnum=Module._iswalnum=t=>(_iswalnum=Module._iswalnum=wasmExports.iswalnum)(t),_ts_query_pattern_count=Module._ts_query_pattern_count=t=>(_ts_query_pattern_count=Module._ts_query_pattern_count=wasmExports.ts_query_pattern_count)(t),_ts_query_capture_count=Module._ts_query_capture_count=t=>(_ts_query_capture_count=Module._ts_query_capture_count=wasmExports.ts_query_capture_count)(t),_ts_query_string_count=Module._ts_query_string_count=t=>(_ts_query_string_count=Module._ts_query_string_count=wasmExports.ts_query_string_count)(t),_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=(t,e,n)=>(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=wasmExports.ts_query_capture_name_for_id)(t,e,n),_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=(t,e,n)=>(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=wasmExports.ts_query_string_value_for_id)(t,e,n),_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=(t,e,n)=>(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=wasmExports.ts_query_predicates_for_pattern)(t,e,n),_ts_query_disable_capture=Module._ts_query_disable_capture=(t,e,n)=>(_ts_query_disable_capture=Module._ts_query_disable_capture=wasmExports.ts_query_disable_capture)(t,e,n),_ts_tree_copy=Module._ts_tree_copy=t=>(_ts_tree_copy=Module._ts_tree_copy=wasmExports.ts_tree_copy)(t),_ts_tree_delete=Module._ts_tree_delete=t=>(_ts_tree_delete=Module._ts_tree_delete=wasmExports.ts_tree_delete)(t),_ts_init=Module._ts_init=()=>(_ts_init=Module._ts_init=wasmExports.ts_init)(),_ts_parser_new_wasm=Module._ts_parser_new_wasm=()=>(_ts_parser_new_wasm=Module._ts_parser_new_wasm=wasmExports.ts_parser_new_wasm)(),_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=(t,e)=>(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=wasmExports.ts_parser_enable_logger_wasm)(t,e),_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=(t,e,n,r,s)=>(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=wasmExports.ts_parser_parse_wasm)(t,e,n,r,s),_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=t=>(_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=wasmExports.ts_parser_included_ranges_wasm)(t),_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=(t,e)=>(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=wasmExports.ts_language_type_is_named_wasm)(t,e),_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=(t,e)=>(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=wasmExports.ts_language_type_is_visible_wasm)(t,e),_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=t=>(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=wasmExports.ts_tree_root_node_wasm)(t),_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=t=>(_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=wasmExports.ts_tree_root_node_with_offset_wasm)(t),_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=t=>(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=wasmExports.ts_tree_edit_wasm)(t),_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=t=>(_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=wasmExports.ts_tree_included_ranges_wasm)(t),_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=(t,e)=>(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=wasmExports.ts_tree_get_changed_ranges_wasm)(t,e),_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=t=>(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=wasmExports.ts_tree_cursor_new_wasm)(t),_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=t=>(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=wasmExports.ts_tree_cursor_delete_wasm)(t),_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=t=>(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=wasmExports.ts_tree_cursor_reset_wasm)(t),_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=(t,e)=>(_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=wasmExports.ts_tree_cursor_reset_to_wasm)(t,e),_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=t=>(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=wasmExports.ts_tree_cursor_goto_first_child_wasm)(t),_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=t=>(_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=wasmExports.ts_tree_cursor_goto_last_child_wasm)(t),_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=t=>(_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_index_wasm)(t),_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=t=>(_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_position_wasm)(t),_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=t=>(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=wasmExports.ts_tree_cursor_goto_next_sibling_wasm)(t),_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=t=>(_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=wasmExports.ts_tree_cursor_goto_previous_sibling_wasm)(t),_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=(t,e)=>(_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=wasmExports.ts_tree_cursor_goto_descendant_wasm)(t,e),_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=t=>(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=wasmExports.ts_tree_cursor_goto_parent_wasm)(t),_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=t=>(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=wasmExports.ts_tree_cursor_current_node_type_id_wasm)(t),_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=t=>(_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=wasmExports.ts_tree_cursor_current_node_state_id_wasm)(t),_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=t=>(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=wasmExports.ts_tree_cursor_current_node_is_named_wasm)(t),_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=t=>(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=wasmExports.ts_tree_cursor_current_node_is_missing_wasm)(t),_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=t=>(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=wasmExports.ts_tree_cursor_current_node_id_wasm)(t),_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=t=>(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=wasmExports.ts_tree_cursor_start_position_wasm)(t),_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=t=>(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=wasmExports.ts_tree_cursor_end_position_wasm)(t),_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=t=>(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=wasmExports.ts_tree_cursor_start_index_wasm)(t),_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=t=>(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=wasmExports.ts_tree_cursor_end_index_wasm)(t),_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=t=>(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=wasmExports.ts_tree_cursor_current_field_id_wasm)(t),_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=t=>(_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=wasmExports.ts_tree_cursor_current_depth_wasm)(t),_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=t=>(_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=wasmExports.ts_tree_cursor_current_descendant_index_wasm)(t),_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=t=>(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=wasmExports.ts_tree_cursor_current_node_wasm)(t),_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=t=>(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=wasmExports.ts_node_symbol_wasm)(t),_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=(t,e)=>(_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=wasmExports.ts_node_field_name_for_child_wasm)(t,e),_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=(t,e)=>(_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=wasmExports.ts_node_children_by_field_id_wasm)(t,e),_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=t=>(_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=wasmExports.ts_node_first_child_for_byte_wasm)(t),_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=t=>(_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=wasmExports.ts_node_first_named_child_for_byte_wasm)(t),_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=t=>(_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=wasmExports.ts_node_grammar_symbol_wasm)(t),_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=t=>(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=wasmExports.ts_node_child_count_wasm)(t),_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=t=>(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=wasmExports.ts_node_named_child_count_wasm)(t),_ts_node_child_wasm=Module._ts_node_child_wasm=(t,e)=>(_ts_node_child_wasm=Module._ts_node_child_wasm=wasmExports.ts_node_child_wasm)(t,e),_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=(t,e)=>(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=wasmExports.ts_node_named_child_wasm)(t,e),_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=(t,e)=>(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=wasmExports.ts_node_child_by_field_id_wasm)(t,e),_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=t=>(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=wasmExports.ts_node_next_sibling_wasm)(t),_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=t=>(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=wasmExports.ts_node_prev_sibling_wasm)(t),_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=t=>(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=wasmExports.ts_node_next_named_sibling_wasm)(t),_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=t=>(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=wasmExports.ts_node_prev_named_sibling_wasm)(t),_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=t=>(_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=wasmExports.ts_node_descendant_count_wasm)(t),_ts_node_parent_wasm=Module._ts_node_parent_wasm=t=>(_ts_node_parent_wasm=Module._ts_node_parent_wasm=wasmExports.ts_node_parent_wasm)(t),_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=t=>(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=wasmExports.ts_node_descendant_for_index_wasm)(t),_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=t=>(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=wasmExports.ts_node_named_descendant_for_index_wasm)(t),_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=t=>(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=wasmExports.ts_node_descendant_for_position_wasm)(t),_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=t=>(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=wasmExports.ts_node_named_descendant_for_position_wasm)(t),_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=t=>(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=wasmExports.ts_node_start_point_wasm)(t),_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=t=>(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=wasmExports.ts_node_end_point_wasm)(t),_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=t=>(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=wasmExports.ts_node_start_index_wasm)(t),_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=t=>(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=wasmExports.ts_node_end_index_wasm)(t),_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=t=>(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=wasmExports.ts_node_to_string_wasm)(t),_ts_node_children_wasm=Module._ts_node_children_wasm=t=>(_ts_node_children_wasm=Module._ts_node_children_wasm=wasmExports.ts_node_children_wasm)(t),_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=t=>(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=wasmExports.ts_node_named_children_wasm)(t),_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=(t,e,n,r,s,a,u)=>(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=wasmExports.ts_node_descendants_of_type_wasm)(t,e,n,r,s,a,u),_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=t=>(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=wasmExports.ts_node_is_named_wasm)(t),_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=t=>(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=wasmExports.ts_node_has_changes_wasm)(t),_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=t=>(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=wasmExports.ts_node_has_error_wasm)(t),_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=t=>(_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=wasmExports.ts_node_is_error_wasm)(t),_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=t=>(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=wasmExports.ts_node_is_missing_wasm)(t),_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=t=>(_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=wasmExports.ts_node_is_extra_wasm)(t),_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=t=>(_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=wasmExports.ts_node_parse_state_wasm)(t),_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=t=>(_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=wasmExports.ts_node_next_parse_state_wasm)(t),_ts_query_matches_wasm=Module._ts_query_matches_wasm=(t,e,n,r,s,a,u,d,_,p)=>(_ts_query_matches_wasm=Module._ts_query_matches_wasm=wasmExports.ts_query_matches_wasm)(t,e,n,r,s,a,u,d,_,p),_ts_query_captures_wasm=Module._ts_query_captures_wasm=(t,e,n,r,s,a,u,d,_,p)=>(_ts_query_captures_wasm=Module._ts_query_captures_wasm=wasmExports.ts_query_captures_wasm)(t,e,n,r,s,a,u,d,_,p),_iswalpha=Module._iswalpha=t=>(_iswalpha=Module._iswalpha=wasmExports.iswalpha)(t),_iswblank=Module._iswblank=t=>(_iswblank=Module._iswblank=wasmExports.iswblank)(t),_iswdigit=Module._iswdigit=t=>(_iswdigit=Module._iswdigit=wasmExports.iswdigit)(t),_iswlower=Module._iswlower=t=>(_iswlower=Module._iswlower=wasmExports.iswlower)(t),_iswupper=Module._iswupper=t=>(_iswupper=Module._iswupper=wasmExports.iswupper)(t),_iswxdigit=Module._iswxdigit=t=>(_iswxdigit=Module._iswxdigit=wasmExports.iswxdigit)(t),_memchr=Module._memchr=(t,e,n)=>(_memchr=Module._memchr=wasmExports.memchr)(t,e,n),_strlen=Module._strlen=t=>(_strlen=Module._strlen=wasmExports.strlen)(t),_strcmp=Module._strcmp=(t,e)=>(_strcmp=Module._strcmp=wasmExports.strcmp)(t,e),_strncat=Module._strncat=(t,e,n)=>(_strncat=Module._strncat=wasmExports.strncat)(t,e,n),_strncpy=Module._strncpy=(t,e,n)=>(_strncpy=Module._strncpy=wasmExports.strncpy)(t,e,n),_towlower=Module._towlower=t=>(_towlower=Module._towlower=wasmExports.towlower)(t),_towupper=Module._towupper=t=>(_towupper=Module._towupper=wasmExports.towupper)(t),_setThrew=o((t,e)=>(_setThrew=wasmExports.setThrew)(t,e),"_setThrew"),__emscripten_stack_restore=o(t=>(__emscripten_stack_restore=wasmExports._emscripten_stack_restore)(t),"__emscripten_stack_restore"),__emscripten_stack_alloc=o(t=>(__emscripten_stack_alloc=wasmExports._emscripten_stack_alloc)(t),"__emscripten_stack_alloc"),_emscripten_stack_get_current=o(()=>(_emscripten_stack_get_current=wasmExports.emscripten_stack_get_current)(),"_emscripten_stack_get_current"),dynCall_jiji=Module.dynCall_jiji=(t,e,n,r,s)=>(dynCall_jiji=Module.dynCall_jiji=wasmExports.dynCall_jiji)(t,e,n,r,s),_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=t=>(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=wasmExports.orig$ts_parser_timeout_micros)(t),_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=(t,e)=>(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=wasmExports.orig$ts_parser_set_timeout_micros)(t,e);Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16;var calledRun;dependenciesFulfilled=o(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"runCaller");function callMain(t=[]){var e=resolveGlobalSymbol("main").sym;if(e){t.unshift(thisProgram);var n=t.length,r=stackAlloc((n+1)*4),s=r;t.forEach(u=>{LE_HEAP_STORE_U32((s>>2)*4,stringToUTF8OnStack(u)),s+=4}),LE_HEAP_STORE_U32((s>>2)*4,0);try{var a=e(n,r);return exitJS(a,!0),a}catch(u){return handleException(u)}}}o(callMain,"callMain");function run(t=arguments_){if(runDependencies>0||(preRun(),runDependencies>0))return;function e(){calledRun||(calledRun=!0,Module.calledRun=!0,!ABORT&&(initRuntime(),preMain(),Module.onRuntimeInitialized?.(),shouldRunNow&&callMain(t),postRun()))}o(e,"doRun"),Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()}if(o(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_CURSOR=4*SIZE_OF_INT,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/,VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{o(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let n;if(!e)n=0,e=null;else if(e.constructor===Language){n=e[0];let r=C._ts_language_version(n);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}else throw new Error("Argument must be a Language");return this.language=e,C._ts_parser_set_language(this[0],n),this}getLanguage(){return this.language}parse(e,n,r){if(typeof e=="string")currentParseCallback=o((_,p)=>e.slice(_),"currentParseCallback");else if(typeof e=="function")currentParseCallback=e;else throw new Error("Argument must be a string or a function");this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let s=0,a=0;if(r?.includedRanges){s=r.includedRanges.length,a=C._calloc(s,SIZE_OF_RANGE);let _=a;for(let p=0;p<s;p++)marshalRange(_,r.includedRanges[p]),_+=SIZE_OF_RANGE}let u=C._ts_parser_parse_wasm(this[0],this[1],n?n[0]:0,a,s);if(!u)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let d=new Tree(INTERNAL,u,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,d}reset(){C._ts_parser_reset(this[0])}getIncludedRanges(){C._ts_parser_included_ranges_wasm(this[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),r=new Array(e);if(e>0){let s=n;for(let a=0;a<e;a++)r[a]=unmarshalRange(s),s+=SIZE_OF_RANGE;C._free(n)}return r}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}setLogger(e){if(!e)e=null;else if(typeof e!="function")throw new Error("Logger callback must be a function");return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{o(this,"Tree")}constructor(e,n,r,s){assertInternal(e),this[0]=n,this.language=r,this.textCallback=s}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}rootNodeWithOffset(e,n){let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),marshalPoint(r+SIZE_OF_INT,n),C._ts_tree_root_node_with_offset_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),s=new Array(n);if(n>0){let a=r;for(let u=0;u<n;u++)s[u]=unmarshalRange(a),a+=SIZE_OF_RANGE;C._free(r)}return s}getIncludedRanges(){C._ts_tree_included_ranges_wasm(this[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),r=new Array(e);if(e>0){let s=n;for(let a=0;a<e;a++)r[a]=unmarshalRange(s),s+=SIZE_OF_RANGE;C._free(n)}return r}}class Node{static{o(this,"Node")}constructor(e,n){assertInternal(e),this.tree=n}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get grammarId(){return marshalNode(this),C._ts_node_grammar_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get grammarType(){return this.tree.language.types[this.grammarId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}get parseState(){return marshalNode(this),C._ts_node_parse_state_wasm(this.tree[0])}get nextParseState(){return marshalNode(this),C._ts_node_next_parse_state_wasm(this.tree[0])}get isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}get hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}get hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}get isError(){return marshalNode(this),C._ts_node_is_error_wasm(this.tree[0])===1}get isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}get isExtra(){return marshalNode(this),C._ts_node_is_extra_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let n=this.tree.language.fields.indexOf(e);return n!==-1?this.childForFieldId(n):null}fieldNameForChild(e){marshalNode(this);let n=C._ts_node_field_name_for_child_wasm(this.tree[0],e);return n?AsciiToString(n):null}childrenForFieldName(e){let n=this.tree.language.fields.indexOf(e);return n!==-1&&n!==0?this.childrenForFieldId(n):[]}childrenForFieldId(e){marshalNode(this),C._ts_node_children_by_field_id_wasm(this.tree[0],e);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),s=new Array(n);if(n>0){let a=r;for(let u=0;u<n;u++)s[u]=unmarshalNode(this.tree,a),a+=SIZE_OF_NODE;C._free(r)}return s}firstChildForIndex(e){marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),C._ts_node_first_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}firstNamedChildForIndex(e){marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),C._ts_node_first_named_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let r=n;for(let s=0;s<e;s++)this._children[s]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let r=n;for(let s=0;s<e;s++)this._namedChildren[s]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._namedChildren}descendantsOfType(e,n,r){Array.isArray(e)||(e=[e]),n||(n=ZERO_POINT),r||(r=ZERO_POINT);let s=[],a=this.tree.language.types;for(let x=0,P=a.length;x<P;x++)e.includes(a[x])&&s.push(x);let u=C._malloc(SIZE_OF_INT*s.length);for(let x=0,P=s.length;x<P;x++)setValue(u+x*SIZE_OF_INT,s[x],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],u,s.length,n.row,n.column,r.row,r.column);let d=getValue(TRANSFER_BUFFER,"i32"),_=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),p=new Array(d);if(d>0){let x=_;for(let P=0;P<d;P++)p[P]=unmarshalNode(this.tree,x),x+=SIZE_OF_NODE}return C._free(_),C._free(u),p}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get descendantCount(){return marshalNode(this),C._ts_node_descendant_count_wasm(this.tree[0])}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),n=AsciiToString(e);return C._free(e),n}}class TreeCursor{static{o(this,"TreeCursor")}constructor(e,n){assertInternal(e),this.tree=n,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}resetTo(e){marshalTreeCursor(this,TRANSFER_BUFFER),marshalTreeCursor(e,TRANSFER_BUFFER+SIZE_OF_CURSOR),C._ts_tree_cursor_reset_to_wasm(this.tree[0],e.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeStateId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_state_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),n=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,n)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}get currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}get currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}get currentFieldName(){return this.tree.language.fields[this.currentFieldId]}get currentDepth(){return marshalTreeCursor(this),C._ts_tree_cursor_current_depth_wasm(this.tree[0])}get currentDescendantIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_current_descendant_index_wasm(this.tree[0])}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoLastChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_last_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoFirstChildForIndex(e){marshalTreeCursor(this),setValue(TRANSFER_BUFFER+SIZE_OF_CURSOR,e,"i32");let n=C._ts_tree_cursor_goto_first_child_for_index_wasm(this.tree[0]);return unmarshalTreeCursor(this),n===1}gotoFirstChildForPosition(e){marshalTreeCursor(this),marshalPoint(TRANSFER_BUFFER+SIZE_OF_CURSOR,e);let n=C._ts_tree_cursor_goto_first_child_for_position_wasm(this.tree[0]);return unmarshalTreeCursor(this),n===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoPreviousSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_previous_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoDescendant(e){marshalTreeCursor(this),C._ts_tree_cursor_goto_descendant_wasm(this.tree[0],e),unmarshalTreeCursor(this)}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{o(this,"Language")}constructor(e,n){assertInternal(e),this[0]=n,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let r=0,s=this.types.length;r<s;r++)C._ts_language_symbol_type(this[0],r)<2&&(this.types[r]=UTF8ToString(C._ts_language_symbol_name(this[0],r)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let r=0,s=this.fields.length;r<s;r++){let a=C._ts_language_field_name_for_id(this[0],r);a!==0?this.fields[r]=UTF8ToString(a):this.fields[r]=null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}get stateCount(){return C._ts_language_state_count(this[0])}fieldIdForName(e){let n=this.fields.indexOf(e);return n!==-1?n:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,n){let r=lengthBytesUTF8(e),s=C._malloc(r+1);stringToUTF8(e,s,r+1);let a=C._ts_language_symbol_for_name(this[0],s,r,n);return C._free(s),a||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let n=C._ts_language_symbol_name(this[0],e);return n?UTF8ToString(n):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}nextState(e,n){return C._ts_language_next_state(this[0],e,n)}lookaheadIterator(e){let n=C._ts_lookahead_iterator_new(this[0],e);return n?new LookaheadIterable(INTERNAL,n,this):null}query(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);let s=C._ts_query_new(this[0],r,n,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!s){let j=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),Q=getValue(TRANSFER_BUFFER,"i32"),z=UTF8ToString(r,Q).length,L=e.substr(z,100).split(`
`)[0],G=L.match(QUERY_WORD_REGEX)[0],ie;switch(j){case 2:ie=new RangeError(`Bad node name '${G}'`);break;case 3:ie=new RangeError(`Bad field name '${G}'`);break;case 4:ie=new RangeError(`Bad capture name @${G}`);break;case 5:ie=new TypeError(`Bad pattern structure at offset ${z}: '${L}'...`),G="";break;default:ie=new SyntaxError(`Bad syntax at offset ${z}: '${L}'...`),G="";break}throw ie.index=z,ie.length=G.length,C._free(r),ie}let a=C._ts_query_string_count(s),u=C._ts_query_capture_count(s),d=C._ts_query_pattern_count(s),_=new Array(u),p=new Array(a);for(let j=0;j<u;j++){let Q=C._ts_query_capture_name_for_id(s,j,TRANSFER_BUFFER),z=getValue(TRANSFER_BUFFER,"i32");_[j]=UTF8ToString(Q,z)}for(let j=0;j<a;j++){let Q=C._ts_query_string_value_for_id(s,j,TRANSFER_BUFFER),z=getValue(TRANSFER_BUFFER,"i32");p[j]=UTF8ToString(Q,z)}let x=new Array(d),P=new Array(d),E=new Array(d),A=new Array(d),V=new Array(d);for(let j=0;j<d;j++){let Q=C._ts_query_predicates_for_pattern(s,j,TRANSFER_BUFFER),z=getValue(TRANSFER_BUFFER,"i32");A[j]=[],V[j]=[];let L=[],G=Q;for(let ie=0;ie<z;ie++){let re=getValue(G,"i32");G+=SIZE_OF_INT;let be=getValue(G,"i32");if(G+=SIZE_OF_INT,re===PREDICATE_STEP_TYPE_CAPTURE)L.push({type:"capture",name:_[be]});else if(re===PREDICATE_STEP_TYPE_STRING)L.push({type:"string",value:p[be]});else if(L.length>0){if(L[0].type!=="string")throw new Error("Predicates must begin with a literal value");let ee=L[0].value,le=!0,Se=!0,Te;switch(ee){case"any-not-eq?":case"not-eq?":le=!1;case"any-eq?":case"eq?":if(L.length!==3)throw new Error(`Wrong number of arguments to \`#${ee}\` predicate. Expected 2, got ${L.length-1}`);if(L[1].type!=="capture")throw new Error(`First argument of \`#${ee}\` predicate must be a capture. Got "${L[1].value}"`);if(Se=!ee.startsWith("any-"),L[2].type==="capture"){let D=L[1].name,T=L[2].name;V[j].push(k=>{let I=[],U=[];for(let O of k)O.name===D&&I.push(O.node),O.name===T&&U.push(O.node);let $=o((O,X,Y)=>Y?O.text===X.text:O.text!==X.text,"compare");return Se?I.every(O=>U.some(X=>$(O,X,le))):I.some(O=>U.some(X=>$(O,X,le)))})}else{Te=L[1].name;let D=L[2].value,T=o(I=>I.text===D,"matches"),k=o(I=>I.text!==D,"doesNotMatch");V[j].push(I=>{let U=[];for(let O of I)O.name===Te&&U.push(O.node);let $=le?T:k;return Se?U.every($):U.some($)})}break;case"any-not-match?":case"not-match?":le=!1;case"any-match?":case"match?":if(L.length!==3)throw new Error(`Wrong number of arguments to \`#${ee}\` predicate. Expected 2, got ${L.length-1}.`);if(L[1].type!=="capture")throw new Error(`First argument of \`#${ee}\` predicate must be a capture. Got "${L[1].value}".`);if(L[2].type!=="string")throw new Error(`Second argument of \`#${ee}\` predicate must be a string. Got @${L[2].value}.`);Te=L[1].name;let F=new RegExp(L[2].value);Se=!ee.startsWith("any-"),V[j].push(D=>{let T=[];for(let I of D)I.name===Te&&T.push(I.node.text);let k=o((I,U)=>U?F.test(I):!F.test(I),"test");return T.length===0?!le:Se?T.every(I=>k(I,le)):T.some(I=>k(I,le))});break;case"set!":if(L.length<2||L.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${L.length-1}.`);if(L.some(D=>D.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');x[j]||(x[j]={}),x[j][L[1].value]=L[2]?L[2].value:null;break;case"is?":case"is-not?":if(L.length<2||L.length>3)throw new Error(`Wrong number of arguments to \`#${ee}\` predicate. Expected 1 or 2. Got ${L.length-1}.`);if(L.some(D=>D.type!=="string"))throw new Error(`Arguments to \`#${ee}\` predicate must be a strings.".`);let R=ee==="is?"?P:E;R[j]||(R[j]={}),R[j][L[1].value]=L[2]?L[2].value:null;break;case"not-any-of?":le=!1;case"any-of?":if(L.length<2)throw new Error(`Wrong number of arguments to \`#${ee}\` predicate. Expected at least 1. Got ${L.length-1}.`);if(L[1].type!=="capture")throw new Error(`First argument of \`#${ee}\` predicate must be a capture. Got "${L[1].value}".`);for(let D=2;D<L.length;D++)if(L[D].type!=="string")throw new Error(`Arguments to \`#${ee}\` predicate must be a strings.".`);Te=L[1].name;let W=L.slice(2).map(D=>D.value);V[j].push(D=>{let T=[];for(let k of D)k.name===Te&&T.push(k.node.text);return T.length===0?!le:T.every(k=>W.includes(k))===le});break;default:A[j].push({operator:ee,operands:L.slice(1)})}L.length=0}}Object.freeze(x[j]),Object.freeze(P[j]),Object.freeze(E[j])}return C._free(r),new Query(INTERNAL,s,_,V,A,Object.freeze(x),Object.freeze(P),Object.freeze(E))}static load(e){let n;if(e instanceof Uint8Array)n=Promise.resolve(e);else{let r=e;if(typeof process<"u"&&process.versions&&process.versions.node){let s=require("fs");n=Promise.resolve(s.readFileSync(r))}else n=fetch(r).then(s=>s.arrayBuffer().then(a=>{if(s.ok)return new Uint8Array(a);{let u=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${s.status}.

${u}`)}}))}return n.then(r=>loadWebAssemblyModule(r,{loadAsync:!0})).then(r=>{let s=Object.keys(r),a=s.find(d=>LANGUAGE_FUNCTION_REGEX.test(d)&&!d.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(s,null,2)}`);let u=r[a]();return new Language(INTERNAL,u)})}}class LookaheadIterable{static{o(this,"LookaheadIterable")}constructor(e,n,r){assertInternal(e),this[0]=n,this.language=r}get currentTypeId(){return C._ts_lookahead_iterator_current_symbol(this[0])}get currentType(){return this.language.types[this.currentTypeId]||"ERROR"}delete(){C._ts_lookahead_iterator_delete(this[0]),this[0]=0}resetState(e){return C._ts_lookahead_iterator_reset_state(this[0],e)}reset(e,n){return C._ts_lookahead_iterator_reset(this[0],e[0],n)?(this.language=e,!0):!1}[Symbol.iterator](){let e=this;return{next(){return C._ts_lookahead_iterator_next(e[0])?{done:!1,value:e.currentType}:{done:!0,value:""}}}}}class Query{static{o(this,"Query")}constructor(e,n,r,s,a,u,d,_){assertInternal(e),this[0]=n,this.captureNames=r,this.textPredicates=s,this.predicates=a,this.setProperties=u,this.assertedProperties=d,this.refutedProperties=_,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,{startPosition:n=ZERO_POINT,endPosition:r=ZERO_POINT,startIndex:s=0,endIndex:a=0,matchLimit:u=4294967295,maxStartDepth:d=4294967295}={}){if(typeof u!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,s,a,u,d);let _=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),x=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),P=new Array(_);this.exceededMatchLimit=!!x;let E=0,A=p;for(let V=0;V<_;V++){let j=getValue(A,"i32");A+=SIZE_OF_INT;let Q=getValue(A,"i32");A+=SIZE_OF_INT;let z=new Array(Q);if(A=unmarshalCaptures(this,e.tree,A,z),this.textPredicates[j].every(L=>L(z))){P[E]={pattern:j,captures:z};let L=this.setProperties[j];L&&(P[E].setProperties=L);let G=this.assertedProperties[j];G&&(P[E].assertedProperties=G);let ie=this.refutedProperties[j];ie&&(P[E].refutedProperties=ie),E++}}return P.length=E,C._free(p),P}captures(e,{startPosition:n=ZERO_POINT,endPosition:r=ZERO_POINT,startIndex:s=0,endIndex:a=0,matchLimit:u=4294967295,maxStartDepth:d=4294967295}={}){if(typeof u!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,s,a,u,d);let _=getValue(TRANSFER_BUFFER,"i32"),p=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),x=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),P=[];this.exceededMatchLimit=!!x;let E=[],A=p;for(let V=0;V<_;V++){let j=getValue(A,"i32");A+=SIZE_OF_INT;let Q=getValue(A,"i32");A+=SIZE_OF_INT;let z=getValue(A,"i32");if(A+=SIZE_OF_INT,E.length=Q,A=unmarshalCaptures(this,e.tree,A,E),this.textPredicates[j].every(L=>L(E))){let L=E[z],G=this.setProperties[j];G&&(L.setProperties=G);let ie=this.assertedProperties[j];ie&&(L.assertedProperties=ie);let re=this.refutedProperties[j];re&&(L.refutedProperties=re),P.push(L)}}return C._free(p),P}predicatesForPattern(e){return this.predicates[e]}disableCapture(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1),C._ts_query_disable_capture(this[0],r,n),C._free(r)}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,n){let r=n-e,s=t.textCallback(e,null,n);for(e+=s.length;e<n;){let a=t.textCallback(e,null,n);if(a&&a.length>0)e+=a.length,s+=a;else break}return e>n&&(s=s.slice(0,r)),s}o(getText,"getText");function unmarshalCaptures(t,e,n,r){for(let s=0,a=r.length;s<a;s++){let u=getValue(n,"i32");n+=SIZE_OF_INT;let d=unmarshalNode(e,n);n+=SIZE_OF_NODE,r[s]={name:t.captureNames[u],node:d}}return n}o(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}o(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}o(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}o(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let n=getValue(e,"i32");if(e+=SIZE_OF_INT,n===0)return null;let r=getValue(e,"i32");e+=SIZE_OF_INT;let s=getValue(e,"i32");e+=SIZE_OF_INT;let a=getValue(e,"i32");e+=SIZE_OF_INT;let u=getValue(e,"i32"),d=new Node(INTERNAL,t);return d.id=n,d.startIndex=r,d.startPosition={row:s,column:a},d[0]=u,d}o(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32"),setValue(e+3*SIZE_OF_INT,t[3],"i32")}o(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),t[3]=getValue(TRANSFER_BUFFER+3*SIZE_OF_INT,"i32")}o(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}o(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32")>>>0,column:getValue(t+SIZE_OF_INT,"i32")>>>0}}o(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.endPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.endIndex,"i32"),t+=SIZE_OF_INT}o(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32")>>>0,t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32")>>>0,e}o(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}o(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var qa=Z(ht=>{"use strict";b();Object.defineProperty(ht,"__esModule",{value:!0});ht.bytePairEncode=ht.BinaryMap=ht.binaryMapKey=void 0;var Bm=o((t,e,n)=>{let r=n-e,s=16777215>>>Math.max(0,(3-r)*8),a=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&s,u=16777215>>>Math.min(31,Math.max(0,(6-r)*8)),d=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&u;return a+16777216*d},"binaryMapKey");ht.binaryMapKey=Bm;var co=class t{static{o(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,n=0,r=e.length){let s=r<6+n,a=(0,ht.binaryMapKey)(e,n,r);return s?this.final.get(a):this.nested.get(a)?.get(e,6+n,r)}set(e,n){let r=(0,ht.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(r,n);return}let a=this.nested.get(r);if(a instanceof t)a.set(e.subarray(6),n);else{let u=new t;u.set(e.subarray(6),n),this.nested.set(r,u)}}};ht.BinaryMap=co;var pt=new Int32Array(128),Ve=new Int32Array(128);function $m(t,e,n){if(n===1)return[e.get(t)];let r=2147483647,s=-1;for(;pt.length<n*2;)Ve=new Int32Array(Ve.length*2),pt=new Int32Array(pt.length*2);for(let _=0;_<n-1;_++){let p=e.get(t,_,_+2)??2147483647;p<r&&(r=p,s=_),Ve[_]=_,pt[_]=p}Ve[n-1]=n-1,pt[n-1]=2147483647,Ve[n]=n,pt[n]=2147483647;let a=n+1;function u(_,p=0){if(_+p+2<a){let x=e.get(t,Ve[_],Ve[_+p+2]);if(x!==void 0)return x}return 2147483647}for(o(u,"getRank");r!==2147483647;){pt[Ve[s]]=u(s,1),s>0&&(pt[Ve[s-1]]=u(s-1,1));for(let _=s+1;_<a-1;_++)Ve[_]=Ve[_+1];a--,s=-1,r=2147483647;for(let _=0;_<a-1;_++){let p=pt[Ve[_]];pt[Ve[_]]<r&&(r=p,s=_)}}let d=[];for(let _=0;_<a-1;_++)d.push(e.get(t,Ve[_],Ve[_+1]));return d}o($m,"bytePairEncode");ht.bytePairEncode=$m});var ja=Z(Br=>{"use strict";b();Object.defineProperty(Br,"__esModule",{value:!0});Br.makeTextEncoder=void 0;var uo=class{static{o(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let n=this.encoder.encode(e);return this.length=n.length,n}},lo=class{static{o(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},Vm=o(()=>typeof Buffer<"u"?new lo:new uo,"makeTextEncoder");Br.makeTextEncoder=Vm});var Ua=Z($r=>{"use strict";b();Object.defineProperty($r,"__esModule",{value:!0});$r.LRUCache=void 0;var mo=class{static{o(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let n=this.nodes.get(e);if(n)return this.moveToHead(n),n.value}set(e,n){let r=this.nodes.get(e);if(r)r.value=n,this.moveToHead(r);else{let s=new _o(e,n);this.nodes.set(e,s),this.addNode(s),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};$r.LRUCache=mo;var _o=class{static{o(this,"Node")}constructor(e,n){this.key=e,this.value=n}}});var go=Z(zr=>{"use strict";b();Object.defineProperty(zr,"__esModule",{value:!0});zr.TikTokenizer=void 0;var Vr=qa(),zm=ja(),Hm=Ua();function Qm(t){let e=new Map;try{let s=require("fs").readFileSync(t,"utf-8");return n(s),e}catch(r){throw new Error(`Failed to load from BPE encoder file stream: ${r}`)}function n(r){for(let s of r.split(/[\r\n]+/)){if(s.trim()==="")continue;let a=s.split(" ");if(a.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let u=new Uint8Array(Buffer.from(a[0],"base64")),d=parseInt(a[1]);if(!isNaN(d))e.set(u,d);else throw new Error(`Can't parse ${a[1]} to integer`)}}o(n,"processBpeRanks")}o(Qm,"loadTikTokenBpe");function Gm(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}o(Gm,"escapeRegExp");var fo=class{static{o(this,"TikTokenizer")}constructor(e,n,r,s=8192){this.textEncoder=(0,zm.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new Hm.LRUCache(s);let a=typeof e=="string"?Qm(e):e;this.init(a,n,r)}init(e,n,r){this.encoder=new Vr.BinaryMap;for(let[s,a]of e)this.encoder.set(s,a);this.regex=new RegExp(r,"gu"),this.specialTokensRegex=new RegExp(Array.from(n.keys()).map(s=>Gm(s)).join("|")),this.specialTokensEncoder=n,this.decoder=new Map;for(let[s,a]of e)this.decoder.set(a,s);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[s,a]of n)this.specialTokensDecoder.set(a,s)}findNextSpecialToken(e,n,r){let s=n,a=null;if(r&&this.specialTokensRegex)for(;a=e.slice(s).match(this.specialTokensRegex),!(!a||r&&r.includes(a[0]));)s+=a.index+1;let u=a?s+a.index:e.length;return[a,u]}encode(e,n){let r=[],s=0;for(;;){let a,u;if([a,u]=this.findNextSpecialToken(e,s,n),u>s&&this.encodeByIndex(e,r,s,u),a){if(s=s+this.encodeSpecialToken(r,a),s>=e.length)break}else break}return r}encodeSpecialToken(e,n){let r=this.specialTokensEncoder?.get(n[0]);return e.push(r),n.index+n[0].length}encodeByIndex(e,n,r,s){let a,u=e.substring(r,s);for(this.regex.lastIndex=0;a=this.regex.exec(u);){let d=this.cache.get(a[0]);if(d)for(let _ of d)n.push(_);else{let _=this.textEncoder.encode(a[0]),p=this.encoder.get(_,0,this.textEncoder.length);if(p!==void 0)n.push(p),this.cache.set(a[0],[p]);else{let x=(0,Vr.bytePairEncode)(_,this.encoder,this.textEncoder.length);for(let P of x)n.push(P);this.cache.set(a[0],x)}}}}encodeTrimSuffixByIndex(e,n,r,s,a,u,d){let _,p=e.substring(r,s);for(this.regex.lastIndex=0;_=this.regex.exec(p);){let x=_[0],P=this.cache.get(x);if(P)if(u+P.length<=a)u+=P.length,d+=x.length,n.push(...P);else{let E=a-u;u+=E,d+=x.length,n.push(...P.slice(0,E));break}else{let E=this.textEncoder.encode(x),A=this.encoder.get(E,0,E.length);if(A!==void 0)if(this.cache.set(x,[A]),u+1<=a)u++,d+=x.length,n.push(A);else break;else{let V=(0,Vr.bytePairEncode)(E,this.encoder,this.textEncoder.length);if(this.cache.set(x,V),u+V.length<=a){u+=V.length,d+=x.length;for(let j of V)n.push(j)}else{let j=a-u;u+=j,d+=x.length;for(let Q=0;Q<j;Q++)n.push(V[Q]);break}}}if(u>=a)break}return{tokenCount:u,encodeLength:d}}encodeTrimSuffix(e,n,r){let s=[],a=0,u=0,d=0;for(;;){let p,x;if([p,x]=this.findNextSpecialToken(e,a,r),x>a){let{tokenCount:P,encodeLength:E}=this.encodeTrimSuffixByIndex(e,s,a,x,n,u,d);if(u=P,d=E,u>=n)break}if(p!==null){if(u++,u<=n&&(a=a+this.encodeSpecialToken(s,p),d+=p[0].length,a>=e.length)||u>=n)break}else break}let _=d===e.length?e:e.slice(0,d);return{tokenIds:s,text:_}}encodeTrimPrefix(e,n,r){let s=[],a=0,u=0,d=0,_=new Map;for(_.set(u,d);;){let E,A;if([E,A]=this.findNextSpecialToken(e,a,r),A>a){let V,j=e.substring(a,A);for(this.regex.lastIndex=0;V=this.regex.exec(j);){let Q=V[0],z=this.cache.get(Q);if(z)u+=z.length,d+=Q.length,s.push(...z),_.set(u,d);else{let L=this.textEncoder.encode(Q),G=this.encoder.get(L);if(G!==void 0)this.cache.set(Q,[G]),u++,d+=Q.length,s.push(G),_.set(u,d);else{let ie=(0,Vr.bytePairEncode)(L,this.encoder,this.textEncoder.length);this.cache.set(Q,ie),u+=ie.length,d+=Q.length;for(let re of ie)s.push(re);_.set(u,d)}}}}if(E!==null){if(a=a+this.encodeSpecialToken(s,E),u++,d+=E[0].length,_.set(u,d),a>=e.length)break}else break}if(u<=n)return{tokenIds:s,text:e};let p=u-n,x=0,P=0;for(let[E,A]of _)if(E>=p){x=E,P=A;break}if(x>n){let E=this.encode(e,r),A=E.slice(E.length-n);return{tokenIds:A,text:this.decode(A)}}return{tokenIds:s.slice(x),text:e.slice(P)}}decode(e){let n=[];for(let r of e){let s=[],a=this.decoder?.get(r);if(a!==void 0)s=Array.from(a);else{let u=this.specialTokensDecoder?.get(r);if(u!==void 0){let d=this.textEncoder.encode(u);s=Array.from(d.subarray(0,this.textEncoder.length))}}n.push(...s)}return this.textDecoder.decode(new Uint8Array(n))}};zr.TikTokenizer=fo});var Ja=Z(Me=>{"use strict";b();Object.defineProperty(Me,"__esModule",{value:!0});Me.createTokenizer=Me.createByEncoderName=Me.createByModelName=Me.getRegexByModel=Me.getRegexByEncoder=Me.getSpecialTokensByModel=Me.getSpecialTokensByEncoder=Me.MODEL_TO_ENCODING=void 0;var Zm=go(),Jm=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);Me.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var Hr="<|endoftext|>",Wa="<|fim_prefix|>",Ba="<|fim_middle|>",$a="<|fim_suffix|>",Va="<|endofprompt|>",Vn="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",za="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",Xm=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],Ha=Xm.join("|");function po(t){let e="";if(Me.MODEL_TO_ENCODING.has(t))e=Me.MODEL_TO_ENCODING.get(t);else for(let[n,r]of Jm)if(t.startsWith(n)){e=r;break}return e}o(po,"getEncoderFromModelName");async function Km(t,e){let n=require("fs"),r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let s=await r.text();n.writeFileSync(e,s)}o(Km,"fetchAndSaveFile");function ho(t){let e=new Map([[Hr,50256]]);switch(t){case"o200k_base":e=new Map([[Hr,199999],[Va,200018]]);break;case"cl100k_base":e=new Map([[Hr,100257],[Wa,100258],[Ba,100259],[$a,100260],[Va,100276]]);break;case"p50k_edit":e=new Map([[Hr,50256],[Wa,50281],[Ba,50282],[$a,50283]]);break;default:break}return e}o(ho,"getSpecialTokensByEncoder");Me.getSpecialTokensByEncoder=ho;function Ym(t){let e=po(t);return ho(e)}o(Ym,"getSpecialTokensByModel");Me.getSpecialTokensByModel=Ym;function Qa(t){switch(t){case"o200k_base":return Ha;case"cl100k_base":return za;default:break}return Vn}o(Qa,"getRegexByEncoder");Me.getRegexByEncoder=Qa;function e_(t){let e=po(t);return Qa(e)}o(e_,"getRegexByModel");Me.getRegexByModel=e_;async function t_(t,e=null){return Ga(po(t),e)}o(t_,"createByModelName");Me.createByModelName=t_;async function Ga(t,e=null){let n,r,s=ho(t);switch(t){case"o200k_base":n=Ha,r="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":n=za,r="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":n=Vn,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":n=Vn,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":n=Vn,r="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":n=Vn,r="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(s=new Map([...s,...e]));let a=require("fs"),u=require("path"),d=u.basename(r),_=u.resolve(__dirname,"..","model");a.existsSync(_)||a.mkdirSync(_,{recursive:!0});let p=u.resolve(_,d);return a.existsSync(p)||(console.log(`Downloading file from ${r}`),await Km(r,p),console.log(`Saved file to ${p}`)),Za(p,s,n)}o(Ga,"createByEncoderName");Me.createByEncoderName=Ga;function Za(t,e,n,r=8192){return new Zm.TikTokenizer(t,e,n,r)}o(Za,"createTokenizer");Me.createTokenizer=Za});var Xa=Z(Le=>{"use strict";b();Object.defineProperty(Le,"__esModule",{value:!0});Le.createTokenizer=Le.createByEncoderName=Le.createByModelName=Le.getSpecialTokensByModel=Le.getSpecialTokensByEncoder=Le.getRegexByModel=Le.getRegexByEncoder=Le.MODEL_TO_ENCODING=Le.TikTokenizer=void 0;var n_=go();Object.defineProperty(Le,"TikTokenizer",{enumerable:!0,get:o(function(){return n_.TikTokenizer},"get")});var Mt=Ja();Object.defineProperty(Le,"MODEL_TO_ENCODING",{enumerable:!0,get:o(function(){return Mt.MODEL_TO_ENCODING},"get")});Object.defineProperty(Le,"getRegexByEncoder",{enumerable:!0,get:o(function(){return Mt.getRegexByEncoder},"get")});Object.defineProperty(Le,"getRegexByModel",{enumerable:!0,get:o(function(){return Mt.getRegexByModel},"get")});Object.defineProperty(Le,"getSpecialTokensByEncoder",{enumerable:!0,get:o(function(){return Mt.getSpecialTokensByEncoder},"get")});Object.defineProperty(Le,"getSpecialTokensByModel",{enumerable:!0,get:o(function(){return Mt.getSpecialTokensByModel},"get")});Object.defineProperty(Le,"createByModelName",{enumerable:!0,get:o(function(){return Mt.createByModelName},"get")});Object.defineProperty(Le,"createByEncoderName",{enumerable:!0,get:o(function(){return Mt.createByEncoderName},"get")});Object.defineProperty(Le,"createTokenizer",{enumerable:!0,get:o(function(){return Mt.createTokenizer},"get")})});var ac=Z((Xy,sc)=>{b();var ko=require("fs"),Kr=require("path"),Jn=Kr.join,m_=Kr.dirname,ic=ko.accessSync&&function(t){try{ko.accessSync(t)}catch{return!1}return!0}||ko.existsSync||Kr.existsSync,oc={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function __(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(oc).map(function(_){_ in t||(t[_]=oc[_])}),t.module_root||(t.module_root=f_(__filename)),Kr.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,n=[],r=0,s=t.try.length,a,u,d;r<s;r++){a=Jn.apply(null,t.try[r].map(function(_){return t[_]||_})),n.push(a);try{return u=t.path?e.resolve(a):e(a),t.path||(u.path=a),u}catch(_){if(_.code!=="MODULE_NOT_FOUND"&&_.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(_.message))throw _}}throw d=new Error(`Could not locate the bindings file. Tried:
`+n.map(function(_){return t.arrow+_}).join(`
`)),d.tries=n,d}o(__,"bindings");sc.exports=__;function f_(t){for(var e=m_(t),n;;){if(e==="."&&(e=process.cwd()),ic(Jn(e,"dist")))return Jn(e,"dist");if(ic(Jn(e,"compiled")))return e;if(n===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');n=e,e=Jn(e,"..")}}o(f_,"getRoot")});var uc=Z((eb,cc)=>{b();cc.exports=ac()("node_sqlite3.node")});var mc=Z(dc=>{b();var g_=require("util");function p_(t,e,n){let r=t[e];t[e]=function(){let s=new Error,a=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(d){return g_.inspect(d,!1,0)}).join(", ")+")";typeof n>"u"&&(n=-1),n<0&&(n+=arguments.length);let u=arguments[n];return typeof arguments[n]=="function"&&(arguments[n]=o(function(){let _=arguments[0];return _&&_.stack&&!_.__augmented&&(_.stack=lc(_).join(`
`),_.stack+=`
--> in `+a,_.stack+=`
`+lc(s).slice(1).join(`
`),_.__augmented=!0),u.apply(this,arguments)},"replacement")),r.apply(this,arguments)}}o(p_,"extendTrace");dc.extendTrace=p_;function lc(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}o(lc,"filter")});var pc=Z((fc,gc)=>{b();var h_=require("path"),ot=uc(),gn=require("events").EventEmitter;gc.exports=fc=ot;function pn(t){return function(e){let n,r=Array.prototype.slice.call(arguments,1);if(typeof r[r.length-1]=="function"){let a=r[r.length-1];n=o(function(u){u&&a(u)},"errBack")}let s=new Yr(this,e,n);return t.call(this,s,r)}}o(pn,"normalizeMethod");function Co(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}o(Co,"inherits");ot.cached={Database:o(function(t,e,n){if(t===""||t===":memory:")return new ze(t,e,n);let r;if(t=h_.resolve(t),!ot.cached.objects[t])r=ot.cached.objects[t]=new ze(t,e,n);else{r=ot.cached.objects[t];let a=typeof e=="number"?n:e;if(typeof a=="function"){let u=function(){a.call(r,null)};var s=u;o(u,"cb"),r.open?process.nextTick(u):r.once("open",u)}}return r},"Database"),objects:{}};var ze=ot.Database,Yr=ot.Statement,Po=ot.Backup;Co(ze,gn);Co(Yr,gn);Co(Po,gn);ze.prototype.prepare=pn(function(t,e){return e.length?t.bind.apply(t,e):t});ze.prototype.run=pn(function(t,e){return t.run.apply(t,e).finalize(),this});ze.prototype.get=pn(function(t,e){return t.get.apply(t,e).finalize(),this});ze.prototype.all=pn(function(t,e){return t.all.apply(t,e).finalize(),this});ze.prototype.each=pn(function(t,e){return t.each.apply(t,e).finalize(),this});ze.prototype.map=pn(function(t,e){return t.map.apply(t,e).finalize(),this});ze.prototype.backup=function(){let t;return arguments.length<=2?t=new Po(this,arguments[0],"main","main",!0,arguments[1]):t=new Po(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[ot.BUSY,ot.LOCKED],t};Yr.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(n,r){if(n)return e(n);let s={};if(r.length){let a=Object.keys(r[0]),u=a[0];if(a.length>2)for(let d=0;d<r.length;d++)s[r[d][u]]=r[d];else{let d=a[1];for(let _=0;_<r.length;_++)s[r[_][u]]=r[_][d]}}e(n,s)}),this.all.apply(this,t)};var _c=!1,No=["trace","profile","change"];ze.prototype.addListener=ze.prototype.on=function(t){let e=gn.prototype.addListener.apply(this,arguments);return No.indexOf(t)>=0&&this.configure(t,!0),e};ze.prototype.removeListener=function(t){let e=gn.prototype.removeListener.apply(this,arguments);return No.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};ze.prototype.removeAllListeners=function(t){let e=gn.prototype.removeAllListeners.apply(this,arguments);return No.indexOf(t)>=0&&this.configure(t,!1),e};ot.verbose=function(){if(!_c){let t=mc();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(ze.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(Yr.prototype,e)}),_c=!0}return ot}});var yn=Z(Ue=>{"use strict";b();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.stringArray=Ue.array=Ue.func=Ue.error=Ue.number=Ue.string=Ue.boolean=void 0;function b_(t){return t===!0||t===!1}o(b_,"boolean");Ue.boolean=b_;function hc(t){return typeof t=="string"||t instanceof String}o(hc,"string");Ue.string=hc;function w_(t){return typeof t=="number"||t instanceof Number}o(w_,"number");Ue.number=w_;function v_(t){return t instanceof Error}o(v_,"error");Ue.error=v_;function x_(t){return typeof t=="function"}o(x_,"func");Ue.func=x_;function yc(t){return Array.isArray(t)}o(yc,"array");Ue.array=yc;function R_(t){return yc(t)&&t.every(e=>hc(e))}o(R_,"stringArray");Ue.stringArray=R_});var is=Z(J=>{"use strict";b();Object.defineProperty(J,"__esModule",{value:!0});J.Message=J.NotificationType9=J.NotificationType8=J.NotificationType7=J.NotificationType6=J.NotificationType5=J.NotificationType4=J.NotificationType3=J.NotificationType2=J.NotificationType1=J.NotificationType0=J.NotificationType=J.RequestType9=J.RequestType8=J.RequestType7=J.RequestType6=J.RequestType5=J.RequestType4=J.RequestType3=J.RequestType2=J.RequestType1=J.RequestType=J.RequestType0=J.AbstractMessageSignature=J.ParameterStructures=J.ResponseError=J.ErrorCodes=void 0;var Yt=yn(),Do;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Do||(J.ErrorCodes=Do={}));var Ao=class t extends Error{static{o(this,"ResponseError")}constructor(e,n,r){super(n),this.code=Yt.number(e)?e:Do.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};J.ResponseError=Ao;var Ge=class t{static{o(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};J.ParameterStructures=Ge;Ge.auto=new Ge("auto");Ge.byPosition=new Ge("byPosition");Ge.byName=new Ge("byName");var ve=class{static{o(this,"AbstractMessageSignature")}constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return Ge.auto}};J.AbstractMessageSignature=ve;var Oo=class extends ve{static{o(this,"RequestType0")}constructor(e){super(e,0)}};J.RequestType0=Oo;var Fo=class extends ve{static{o(this,"RequestType")}constructor(e,n=Ge.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};J.RequestType=Fo;var qo=class extends ve{static{o(this,"RequestType1")}constructor(e,n=Ge.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};J.RequestType1=qo;var jo=class extends ve{static{o(this,"RequestType2")}constructor(e){super(e,2)}};J.RequestType2=jo;var Uo=class extends ve{static{o(this,"RequestType3")}constructor(e){super(e,3)}};J.RequestType3=Uo;var Wo=class extends ve{static{o(this,"RequestType4")}constructor(e){super(e,4)}};J.RequestType4=Wo;var Bo=class extends ve{static{o(this,"RequestType5")}constructor(e){super(e,5)}};J.RequestType5=Bo;var $o=class extends ve{static{o(this,"RequestType6")}constructor(e){super(e,6)}};J.RequestType6=$o;var Vo=class extends ve{static{o(this,"RequestType7")}constructor(e){super(e,7)}};J.RequestType7=Vo;var zo=class extends ve{static{o(this,"RequestType8")}constructor(e){super(e,8)}};J.RequestType8=zo;var Ho=class extends ve{static{o(this,"RequestType9")}constructor(e){super(e,9)}};J.RequestType9=Ho;var Qo=class extends ve{static{o(this,"NotificationType")}constructor(e,n=Ge.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};J.NotificationType=Qo;var Go=class extends ve{static{o(this,"NotificationType0")}constructor(e){super(e,0)}};J.NotificationType0=Go;var Zo=class extends ve{static{o(this,"NotificationType1")}constructor(e,n=Ge.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};J.NotificationType1=Zo;var Jo=class extends ve{static{o(this,"NotificationType2")}constructor(e){super(e,2)}};J.NotificationType2=Jo;var Xo=class extends ve{static{o(this,"NotificationType3")}constructor(e){super(e,3)}};J.NotificationType3=Xo;var Ko=class extends ve{static{o(this,"NotificationType4")}constructor(e){super(e,4)}};J.NotificationType4=Ko;var Yo=class extends ve{static{o(this,"NotificationType5")}constructor(e){super(e,5)}};J.NotificationType5=Yo;var es=class extends ve{static{o(this,"NotificationType6")}constructor(e){super(e,6)}};J.NotificationType6=es;var ts=class extends ve{static{o(this,"NotificationType7")}constructor(e){super(e,7)}};J.NotificationType7=ts;var ns=class extends ve{static{o(this,"NotificationType8")}constructor(e){super(e,8)}};J.NotificationType8=ns;var rs=class extends ve{static{o(this,"NotificationType9")}constructor(e){super(e,9)}};J.NotificationType9=rs;var bc;(function(t){function e(s){let a=s;return a&&Yt.string(a.method)&&(Yt.string(a.id)||Yt.number(a.id))}o(e,"isRequest"),t.isRequest=e;function n(s){let a=s;return a&&Yt.string(a.method)&&s.id===void 0}o(n,"isNotification"),t.isNotification=n;function r(s){let a=s;return a&&(a.result!==void 0||!!a.error)&&(Yt.string(a.id)||Yt.number(a.id)||a.id===null)}o(r,"isResponse"),t.isResponse=r})(bc||(J.Message=bc={}))});var ss=Z(Dt=>{"use strict";b();var wc;Object.defineProperty(Dt,"__esModule",{value:!0});Dt.LRUCache=Dt.LinkedMap=Dt.Touch=void 0;var We;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(We||(Dt.Touch=We={}));var ii=class{static{o(this,"LinkedMap")}constructor(){this[wc]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=We.None){let r=this._map.get(e);if(r)return n!==We.None&&this.touch(r,n),r.value}set(e,n,r=We.None){let s=this._map.get(e);if(s)s.value=n,r!==We.None&&this.touch(s,r);else{switch(s={key:e,value:n,next:void 0,previous:void 0},r){case We.None:this.addItemLast(s);break;case We.First:this.addItemFirst(s);break;case We.Last:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,s=this._head;for(;s;){if(n?e.bind(n)(s.value,s.key,this):e(s.value,s.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:o(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}},"next")};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:o(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}},"next")};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:o(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}},"next")};return r}[(wc=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==We.First&&n!==We.Last)){if(n===We.First){if(e===this._head)return;let r=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(r.previous=s,s.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===We.Last){if(e===this._tail)return;let r=e.next,s=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=s,s.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Dt.LinkedMap=ii;var os=class extends ii{static{o(this,"LRUCache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=We.AsNew){return super.get(e,n)}peek(e){return super.get(e,We.None)}set(e,n){return super.set(e,n,We.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Dt.LRUCache=os});var xc=Z(oi=>{"use strict";b();Object.defineProperty(oi,"__esModule",{value:!0});oi.Disposable=void 0;var vc;(function(t){function e(n){return{dispose:n}}o(e,"create"),t.create=e})(vc||(oi.Disposable=vc={}))});var At=Z(us=>{"use strict";b();Object.defineProperty(us,"__esModule",{value:!0});var as;function cs(){if(as===void 0)throw new Error("No runtime abstraction layer installed");return as}o(cs,"RAL");(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");as=n}o(e,"install"),t.install=e})(cs||(cs={}));us.default=cs});var wn=Z(bn=>{"use strict";b();Object.defineProperty(bn,"__esModule",{value:!0});bn.Emitter=bn.Event=void 0;var T_=At(),Rc;(function(t){let e={dispose(){}};t.None=function(){return e}})(Rc||(bn.Event=Rc={}));var ls=class{static{o(this,"CallbackList")}add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:o(()=>this.remove(e,n),"dispose")})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let s=0,a=this._callbacks.length;s<a;s++)if(this._callbacks[s]===e)if(this._contexts[s]===n){this._callbacks.splice(s,1),this._contexts.splice(s,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),s=this._contexts.slice(0);for(let a=0,u=r.length;a<u;a++)try{n.push(r[a].apply(s[a],e))}catch(d){(0,T_.default)().console.error(d)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},si=class t{static{o(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new ls),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let s={dispose:o(()=>{this._callbacks&&(this._callbacks.remove(e,n),s.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(r)&&r.push(s),s}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};bn.Emitter=si;si._noop=function(){}});var ui=Z(vn=>{"use strict";b();Object.defineProperty(vn,"__esModule",{value:!0});vn.CancellationTokenSource=vn.CancellationToken=void 0;var E_=At(),S_=yn(),ds=wn(),ai;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ds.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ds.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||S_.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}o(e,"is"),t.is=e})(ai||(vn.CancellationToken=ai={}));var I_=Object.freeze(function(t,e){let n=(0,E_.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),ci=class{static{o(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?I_:(this._emitter||(this._emitter=new ds.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},ms=class{static{o(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new ci),this._token}cancel(){this._token?this._token.cancel():this._token=ai.Cancelled}dispose(){this._token?this._token instanceof ci&&this._token.dispose():this._token=ai.None}};vn.CancellationTokenSource=ms});var Tc=Z(xn=>{"use strict";b();Object.defineProperty(xn,"__esModule",{value:!0});xn.SharedArrayReceiverStrategy=xn.SharedArraySenderStrategy=void 0;var k_=ui(),Xn;(function(t){t.Continue=0,t.Cancelled=1})(Xn||(Xn={}));var _s=class{static{o(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=Xn.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let s=new Int32Array(r,0,1);Atomics.store(s,0,Xn.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};xn.SharedArraySenderStrategy=_s;var gs=class{static{o(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Xn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},ps=class{static{o(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new gs(e)}cancel(){}dispose(){}},hs=class{static{o(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new k_.CancellationTokenSource:new ps(n)}};xn.SharedArrayReceiverStrategy=hs});var bs=Z(li=>{"use strict";b();Object.defineProperty(li,"__esModule",{value:!0});li.Semaphore=void 0;var P_=At(),ys=class{static{o(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,P_.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};li.Semaphore=ys});var Sc=Z(Ot=>{"use strict";b();Object.defineProperty(Ot,"__esModule",{value:!0});Ot.ReadableStreamMessageReader=Ot.AbstractMessageReader=Ot.MessageReader=void 0;var vs=At(),Rn=yn(),ws=wn(),C_=bs(),Ec;(function(t){function e(n){let r=n;return r&&Rn.func(r.listen)&&Rn.func(r.dispose)&&Rn.func(r.onError)&&Rn.func(r.onClose)&&Rn.func(r.onPartialMessage)}o(e,"is"),t.is=e})(Ec||(Ot.MessageReader=Ec={}));var di=class{static{o(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new ws.Emitter,this.closeEmitter=new ws.Emitter,this.partialMessageEmitter=new ws.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Rn.string(e.message)?e.message:"unknown"}`)}};Ot.AbstractMessageReader=di;var xs;(function(t){function e(n){let r,s,a,u=new Map,d,_=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(a=n.contentDecoder,u.set(a.name,a)),n.contentDecoders!==void 0)for(let p of n.contentDecoders)u.set(p.name,p);if(n.contentTypeDecoder!==void 0&&(d=n.contentTypeDecoder,_.set(d.name,d)),n.contentTypeDecoders!==void 0)for(let p of n.contentTypeDecoders)_.set(p.name,p)}return d===void 0&&(d=(0,vs.default)().applicationJson.decoder,_.set(d.name,d)),{charset:r,contentDecoder:a,contentDecoders:u,contentTypeDecoder:d,contentTypeDecoders:_}}o(e,"fromOptions"),t.fromOptions=e})(xs||(xs={}));var Rs=class extends di{static{o(this,"ReadableStreamMessageReader")}constructor(e,n){super(),this.readable=e,this.options=xs.fromOptions(n),this.buffer=(0,vs.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new C_.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let s=r.get("content-length");if(!s){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let a=parseInt(s);if(isNaN(a)){this.fireError(new Error(`Content-Length value must be a number. Got ${s}`));return}this.nextMessageLength=a}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,s=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(s)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,vs.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Ot.ReadableStreamMessageReader=Rs});var Nc=Z(Ft=>{"use strict";b();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.WriteableStreamMessageWriter=Ft.AbstractMessageWriter=Ft.MessageWriter=void 0;var Ic=At(),Kn=yn(),N_=bs(),kc=wn(),M_="Content-Length: ",Pc=`\r
`,Cc;(function(t){function e(n){let r=n;return r&&Kn.func(r.dispose)&&Kn.func(r.onClose)&&Kn.func(r.onError)&&Kn.func(r.write)}o(e,"is"),t.is=e})(Cc||(Ft.MessageWriter=Cc={}));var mi=class{static{o(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new kc.Emitter,this.closeEmitter=new kc.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Kn.string(e.message)?e.message:"unknown"}`)}};Ft.AbstractMessageWriter=mi;var Ts;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,Ic.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,Ic.default)().applicationJson.encoder}}o(e,"fromOptions"),t.fromOptions=e})(Ts||(Ts={}));var Es=class extends mi{static{o(this,"WriteableStreamMessageWriter")}constructor(e,n){super(),this.writable=e,this.options=Ts.fromOptions(n),this.errorCount=0,this.writeSemaphore=new N_.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let s=[];return s.push(M_,r.byteLength.toString(),Pc),s.push(Pc),this.doWrite(e,s,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(s){return this.handleError(s,e),Promise.reject(s)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Ft.WriteableStreamMessageWriter=Es});var Mc=Z(_i=>{"use strict";b();Object.defineProperty(_i,"__esModule",{value:!0});_i.AbstractMessageBuffer=void 0;var L_=13,D_=10,A_=`\r
`,Ss=class{static{o(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,s=0,a=0;e:for(;r<this._chunks.length;){let p=this._chunks[r];for(s=0;s<p.length;){switch(p[s]){case L_:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case D_:switch(n){case 1:n=2;break;case 3:n=4,s++;break e;default:n=0}break;default:n=0}s++}a+=p.byteLength,r++}if(n!==4)return;let u=this._read(a+s),d=new Map,_=this.toString(u,"ascii").split(A_);if(_.length<2)return d;for(let p=0;p<_.length-2;p++){let x=_[p],P=x.indexOf(":");if(P===-1)throw new Error(`Message header must separate key and value using ':'
${x}`);let E=x.substr(0,P),A=x.substr(P+1).trim();d.set(e?E.toLowerCase():E,A)}return d}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let a=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(a)}if(this._chunks[0].byteLength>e){let a=this._chunks[0],u=this.asNative(a,e);return this._chunks[0]=a.slice(e),this._totalLength-=e,u}let n=this.allocNative(e),r=0,s=0;for(;e>0;){let a=this._chunks[s];if(a.byteLength>e){let u=a.slice(0,e);n.set(u,r),r+=e,this._chunks[s]=a.slice(e),this._totalLength-=e,e-=e}else n.set(a,r),r+=a.byteLength,this._chunks.shift(),this._totalLength-=a.byteLength,e-=a.byteLength}return n}};_i.AbstractMessageBuffer=Ss});var Fc=Z(ne=>{"use strict";b();Object.defineProperty(ne,"__esModule",{value:!0});ne.createMessageConnection=ne.ConnectionOptions=ne.MessageStrategy=ne.CancellationStrategy=ne.CancellationSenderStrategy=ne.CancellationReceiverStrategy=ne.RequestCancellationReceiverStrategy=ne.IdCancellationReceiverStrategy=ne.ConnectionStrategy=ne.ConnectionError=ne.ConnectionErrors=ne.LogTraceNotification=ne.SetTraceNotification=ne.TraceFormat=ne.TraceValues=ne.Trace=ne.NullLogger=ne.ProgressType=ne.ProgressToken=void 0;var Lc=At(),Ee=yn(),K=is(),Dc=ss(),Yn=wn(),Is=ui(),nr;(function(t){t.type=new K.NotificationType("$/cancelRequest")})(nr||(nr={}));var ks;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}o(e,"is"),t.is=e})(ks||(ne.ProgressToken=ks={}));var er;(function(t){t.type=new K.NotificationType("$/progress")})(er||(er={}));var Ps=class{static{o(this,"ProgressType")}constructor(){}};ne.ProgressType=Ps;var Cs;(function(t){function e(n){return Ee.func(n)}o(e,"is"),t.is=e})(Cs||(Cs={}));ne.NullLogger=Object.freeze({error:o(()=>{},"error"),warn:o(()=>{},"warn"),info:o(()=>{},"info"),log:o(()=>{},"log")});var me;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(me||(ne.Trace=me={}));var Ac;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Ac||(ne.TraceValues=Ac={}));(function(t){function e(r){if(!Ee.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}o(e,"fromString"),t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}o(n,"toString"),t.toString=n})(me||(ne.Trace=me={}));var et;(function(t){t.Text="text",t.JSON="json"})(et||(ne.TraceFormat=et={}));(function(t){function e(n){return Ee.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}o(e,"fromString"),t.fromString=e})(et||(ne.TraceFormat=et={}));var Ns;(function(t){t.type=new K.NotificationType("$/setTrace")})(Ns||(ne.SetTraceNotification=Ns={}));var fi;(function(t){t.type=new K.NotificationType("$/logTrace")})(fi||(ne.LogTraceNotification=fi={}));var tr;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(tr||(ne.ConnectionErrors=tr={}));var Tn=class t extends Error{static{o(this,"ConnectionError")}constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};ne.ConnectionError=Tn;var Ms;(function(t){function e(n){let r=n;return r&&Ee.func(r.cancelUndispatched)}o(e,"is"),t.is=e})(Ms||(ne.ConnectionStrategy=Ms={}));var gi;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Ee.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ee.func(r.dispose))}o(e,"is"),t.is=e})(gi||(ne.IdCancellationReceiverStrategy=gi={}));var Ls;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Ee.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ee.func(r.dispose))}o(e,"is"),t.is=e})(Ls||(ne.RequestCancellationReceiverStrategy=Ls={}));var pi;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new Is.CancellationTokenSource}});function e(n){return gi.is(n)||Ls.is(n)}o(e,"is"),t.is=e})(pi||(ne.CancellationReceiverStrategy=pi={}));var hi;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(nr.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Ee.func(r.sendCancellation)&&Ee.func(r.cleanup)}o(e,"is"),t.is=e})(hi||(ne.CancellationSenderStrategy=hi={}));var yi;(function(t){t.Message=Object.freeze({receiver:pi.Message,sender:hi.Message});function e(n){let r=n;return r&&pi.is(r.receiver)&&hi.is(r.sender)}o(e,"is"),t.is=e})(yi||(ne.CancellationStrategy=yi={}));var bi;(function(t){function e(n){let r=n;return r&&Ee.func(r.handleMessage)}o(e,"is"),t.is=e})(bi||(ne.MessageStrategy=bi={}));var Oc;(function(t){function e(n){let r=n;return r&&(yi.is(r.cancellationStrategy)||Ms.is(r.connectionStrategy)||bi.is(r.messageStrategy))}o(e,"is"),t.is=e})(Oc||(ne.ConnectionOptions=Oc={}));var mt;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(mt||(mt={}));function O_(t,e,n,r){let s=n!==void 0?n:ne.NullLogger,a=0,u=0,d=0,_="2.0",p,x=new Map,P,E=new Map,A=new Map,V,j=new Dc.LinkedMap,Q=new Map,z=new Set,L=new Map,G=me.Off,ie=et.Text,re,be=mt.New,ee=new Yn.Emitter,le=new Yn.Emitter,Se=new Yn.Emitter,Te=new Yn.Emitter,F=new Yn.Emitter,R=r&&r.cancellationStrategy?r.cancellationStrategy:yi.Message;function W(g){if(g===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+g.toString()}o(W,"createRequestQueueKey");function D(g){return g===null?"res-unknown-"+(++d).toString():"res-"+g.toString()}o(D,"createResponseQueueKey");function T(){return"not-"+(++u).toString()}o(T,"createNotificationQueueKey");function k(g,N){K.Message.isRequest(N)?g.set(W(N.id),N):K.Message.isResponse(N)?g.set(D(N.id),N):g.set(T(),N)}o(k,"addMessageToQueue");function I(g){}o(I,"cancelUndispatched");function U(){return be===mt.Listening}o(U,"isListening");function $(){return be===mt.Closed}o($,"isClosed");function O(){return be===mt.Disposed}o(O,"isDisposed");function X(){(be===mt.New||be===mt.Listening)&&(be=mt.Closed,le.fire(void 0))}o(X,"closeHandler");function Y(g){ee.fire([g,void 0,void 0])}o(Y,"readErrorHandler");function Ce(g){ee.fire(g)}o(Ce,"writeErrorHandler"),t.onClose(X),t.onError(Y),e.onClose(X),e.onError(Ce);function de(){V||j.size===0||(V=(0,Lc.default)().timer.setImmediate(()=>{V=void 0,ft()}))}o(de,"triggerMessageQueue");function He(g){K.Message.isRequest(g)?ar(g):K.Message.isNotification(g)?ur(g):K.Message.isResponse(g)?cr(g):on(g)}o(He,"handleMessage");function ft(){if(j.size===0)return;let g=j.shift();try{let N=r?.messageStrategy;bi.is(N)?N.handleMessage(g,He):He(g)}finally{de()}}o(ft,"processMessageQueue");let sr=o(g=>{try{if(K.Message.isNotification(g)&&g.method===nr.type.method){let N=g.params.id,B=W(N),H=j.get(B);if(K.Message.isRequest(H)){let _e=r?.connectionStrategy,we=_e&&_e.cancelUndispatched?_e.cancelUndispatched(H,I):void 0;if(we&&(we.error!==void 0||we.result!==void 0)){j.delete(B),L.delete(N),we.id=H.id,Vt(we,g.method,Date.now()),e.write(we).catch(()=>s.error("Sending response for canceled message failed."));return}}let fe=L.get(N);if(fe!==void 0){fe.cancel(),sn(g);return}else z.add(N)}k(j,g)}finally{de()}},"callback");function ar(g){if(O())return;function N(oe,ge,ue){let Ie={jsonrpc:_,id:g.id};oe instanceof K.ResponseError?Ie.error=oe.toJson():Ie.result=oe===void 0?null:oe,Vt(Ie,ge,ue),e.write(Ie).catch(()=>s.error("Sending response failed."))}o(N,"reply");function B(oe,ge,ue){let Ie={jsonrpc:_,id:g.id,error:oe.toJson()};Vt(Ie,ge,ue),e.write(Ie).catch(()=>s.error("Sending response failed."))}o(B,"replyError");function H(oe,ge,ue){oe===void 0&&(oe=null);let Ie={jsonrpc:_,id:g.id,result:oe};Vt(Ie,ge,ue),e.write(Ie).catch(()=>s.error("Sending response failed."))}o(H,"replySuccess"),mr(g);let fe=x.get(g.method),_e,we;fe&&(_e=fe.type,we=fe.handler);let xe=Date.now();if(we||p){let oe=g.id??String(Date.now()),ge=gi.is(R.receiver)?R.receiver.createCancellationTokenSource(oe):R.receiver.createCancellationTokenSource(g);g.id!==null&&z.has(g.id)&&ge.cancel(),g.id!==null&&L.set(oe,ge);try{let ue;if(we)if(g.params===void 0){if(_e!==void 0&&_e.numberOfParams!==0){B(new K.ResponseError(K.ErrorCodes.InvalidParams,`Request ${g.method} defines ${_e.numberOfParams} params but received none.`),g.method,xe);return}ue=we(ge.token)}else if(Array.isArray(g.params)){if(_e!==void 0&&_e.parameterStructures===K.ParameterStructures.byName){B(new K.ResponseError(K.ErrorCodes.InvalidParams,`Request ${g.method} defines parameters by name but received parameters by position`),g.method,xe);return}ue=we(...g.params,ge.token)}else{if(_e!==void 0&&_e.parameterStructures===K.ParameterStructures.byPosition){B(new K.ResponseError(K.ErrorCodes.InvalidParams,`Request ${g.method} defines parameters by position but received parameters by name`),g.method,xe);return}ue=we(g.params,ge.token)}else p&&(ue=p(g.method,g.params,ge.token));let Ie=ue;ue?Ie.then?Ie.then(Oe=>{L.delete(oe),N(Oe,g.method,xe)},Oe=>{L.delete(oe),Oe instanceof K.ResponseError?B(Oe,g.method,xe):Oe&&Ee.string(Oe.message)?B(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${g.method} failed with message: ${Oe.message}`),g.method,xe):B(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${g.method} failed unexpectedly without providing any details.`),g.method,xe)}):(L.delete(oe),N(ue,g.method,xe)):(L.delete(oe),H(ue,g.method,xe))}catch(ue){L.delete(oe),ue instanceof K.ResponseError?N(ue,g.method,xe):ue&&Ee.string(ue.message)?B(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${g.method} failed with message: ${ue.message}`),g.method,xe):B(new K.ResponseError(K.ErrorCodes.InternalError,`Request ${g.method} failed unexpectedly without providing any details.`),g.method,xe)}}else B(new K.ResponseError(K.ErrorCodes.MethodNotFound,`Unhandled method ${g.method}`),g.method,xe)}o(ar,"handleRequest");function cr(g){if(!O())if(g.id===null)g.error?s.error(`Received response message without id: Error is: 
${JSON.stringify(g.error,void 0,4)}`):s.error("Received response message without id. No further error information provided.");else{let N=g.id,B=Q.get(N);if(_r(g,B),B!==void 0){Q.delete(N);try{if(g.error){let H=g.error;B.reject(new K.ResponseError(H.code,H.message,H.data))}else if(g.result!==void 0)B.resolve(g.result);else throw new Error("Should never happen.")}catch(H){H.message?s.error(`Response handler '${B.method}' failed with message: ${H.message}`):s.error(`Response handler '${B.method}' failed unexpectedly.`)}}}}o(cr,"handleResponse");function ur(g){if(O())return;let N,B;if(g.method===nr.type.method){let H=g.params.id;z.delete(H),sn(g);return}else{let H=E.get(g.method);H&&(B=H.handler,N=H.type)}if(B||P)try{if(sn(g),B)if(g.params===void 0)N!==void 0&&N.numberOfParams!==0&&N.parameterStructures!==K.ParameterStructures.byName&&s.error(`Notification ${g.method} defines ${N.numberOfParams} params but received none.`),B();else if(Array.isArray(g.params)){let H=g.params;g.method===er.type.method&&H.length===2&&ks.is(H[0])?B({token:H[0],value:H[1]}):(N!==void 0&&(N.parameterStructures===K.ParameterStructures.byName&&s.error(`Notification ${g.method} defines parameters by name but received parameters by position`),N.numberOfParams!==g.params.length&&s.error(`Notification ${g.method} defines ${N.numberOfParams} params but received ${H.length} arguments`)),B(...H))}else N!==void 0&&N.parameterStructures===K.ParameterStructures.byPosition&&s.error(`Notification ${g.method} defines parameters by position but received parameters by name`),B(g.params);else P&&P(g.method,g.params)}catch(H){H.message?s.error(`Notification handler '${g.method}' failed with message: ${H.message}`):s.error(`Notification handler '${g.method}' failed unexpectedly.`)}else Se.fire(g)}o(ur,"handleNotification");function on(g){if(!g){s.error("Received empty message.");return}s.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(g,null,4)}`);let N=g;if(Ee.string(N.id)||Ee.number(N.id)){let B=N.id,H=Q.get(B);H&&H.reject(new Error("The received response has neither a result nor an error property."))}}o(on,"handleInvalidMessage");function ct(g){if(g!=null)switch(G){case me.Verbose:return JSON.stringify(g,null,4);case me.Compact:return JSON.stringify(g);default:return}}o(ct,"stringifyTrace");function lr(g){if(!(G===me.Off||!re))if(ie===et.Text){let N;(G===me.Verbose||G===me.Compact)&&g.params&&(N=`Params: ${ct(g.params)}

`),re.log(`Sending request '${g.method} - (${g.id})'.`,N)}else vt("send-request",g)}o(lr,"traceSendingRequest");function dr(g){if(!(G===me.Off||!re))if(ie===et.Text){let N;(G===me.Verbose||G===me.Compact)&&(g.params?N=`Params: ${ct(g.params)}

`:N=`No parameters provided.

`),re.log(`Sending notification '${g.method}'.`,N)}else vt("send-notification",g)}o(dr,"traceSendingNotification");function Vt(g,N,B){if(!(G===me.Off||!re))if(ie===et.Text){let H;(G===me.Verbose||G===me.Compact)&&(g.error&&g.error.data?H=`Error data: ${ct(g.error.data)}

`:g.result?H=`Result: ${ct(g.result)}

`:g.error===void 0&&(H=`No result returned.

`)),re.log(`Sending response '${N} - (${g.id})'. Processing request took ${Date.now()-B}ms`,H)}else vt("send-response",g)}o(Vt,"traceSendingResponse");function mr(g){if(!(G===me.Off||!re))if(ie===et.Text){let N;(G===me.Verbose||G===me.Compact)&&g.params&&(N=`Params: ${ct(g.params)}

`),re.log(`Received request '${g.method} - (${g.id})'.`,N)}else vt("receive-request",g)}o(mr,"traceReceivedRequest");function sn(g){if(!(G===me.Off||!re||g.method===fi.type.method))if(ie===et.Text){let N;(G===me.Verbose||G===me.Compact)&&(g.params?N=`Params: ${ct(g.params)}

`:N=`No parameters provided.

`),re.log(`Received notification '${g.method}'.`,N)}else vt("receive-notification",g)}o(sn,"traceReceivedNotification");function _r(g,N){if(!(G===me.Off||!re))if(ie===et.Text){let B;if((G===me.Verbose||G===me.Compact)&&(g.error&&g.error.data?B=`Error data: ${ct(g.error.data)}

`:g.result?B=`Result: ${ct(g.result)}

`:g.error===void 0&&(B=`No result returned.

`)),N){let H=g.error?` Request failed: ${g.error.message} (${g.error.code}).`:"";re.log(`Received response '${N.method} - (${g.id})' in ${Date.now()-N.timerStart}ms.${H}`,B)}else re.log(`Received response ${g.id} without active response promise.`,B)}else vt("receive-response",g)}o(_r,"traceReceivedResponse");function vt(g,N){if(!re||G===me.Off)return;let B={isLSPMessage:!0,type:g,message:N,timestamp:Date.now()};re.log(B)}o(vt,"logLSPMessage");function Pt(){if($())throw new Tn(tr.Closed,"Connection is closed.");if(O())throw new Tn(tr.Disposed,"Connection is disposed.")}o(Pt,"throwIfClosedOrDisposed");function fr(){if(U())throw new Tn(tr.AlreadyListening,"Connection is already listening")}o(fr,"throwIfListening");function gr(){if(!U())throw new Error("Call listen() first.")}o(gr,"throwIfNotListening");function gt(g){return g===void 0?null:g}o(gt,"undefinedToNull");function Fn(g){if(g!==null)return g}o(Fn,"nullToUndefined");function qn(g){return g!=null&&!Array.isArray(g)&&typeof g=="object"}o(qn,"isNamedParam");function an(g,N){switch(g){case K.ParameterStructures.auto:return qn(N)?Fn(N):[gt(N)];case K.ParameterStructures.byName:if(!qn(N))throw new Error("Received parameters by name but param is not an object literal.");return Fn(N);case K.ParameterStructures.byPosition:return[gt(N)];default:throw new Error(`Unknown parameter structure ${g.toString()}`)}}o(an,"computeSingleParam");function jn(g,N){let B,H=g.numberOfParams;switch(H){case 0:B=void 0;break;case 1:B=an(g.parameterStructures,N[0]);break;default:B=[];for(let fe=0;fe<N.length&&fe<H;fe++)B.push(gt(N[fe]));if(N.length<H)for(let fe=N.length;fe<H;fe++)B.push(null);break}return B}o(jn,"computeMessageParams");let xt={sendNotification:o((g,...N)=>{Pt();let B,H;if(Ee.string(g)){B=g;let _e=N[0],we=0,xe=K.ParameterStructures.auto;K.ParameterStructures.is(_e)&&(we=1,xe=_e);let oe=N.length,ge=oe-we;switch(ge){case 0:H=void 0;break;case 1:H=an(xe,N[we]);break;default:if(xe===K.ParameterStructures.byName)throw new Error(`Received ${ge} parameters for 'by Name' notification parameter structure.`);H=N.slice(we,oe).map(ue=>gt(ue));break}}else{let _e=N;B=g.method,H=jn(g,_e)}let fe={jsonrpc:_,method:B,params:H};return dr(fe),e.write(fe).catch(_e=>{throw s.error("Sending notification failed."),_e})},"sendNotification"),onNotification:o((g,N)=>{Pt();let B;return Ee.func(g)?P=g:N&&(Ee.string(g)?(B=g,E.set(g,{type:void 0,handler:N})):(B=g.method,E.set(g.method,{type:g,handler:N}))),{dispose:o(()=>{B!==void 0?E.delete(B):P=void 0},"dispose")}},"onNotification"),onProgress:o((g,N,B)=>{if(A.has(N))throw new Error(`Progress handler for token ${N} already registered`);return A.set(N,B),{dispose:o(()=>{A.delete(N)},"dispose")}},"onProgress"),sendProgress:o((g,N,B)=>xt.sendNotification(er.type,{token:N,value:B}),"sendProgress"),onUnhandledProgress:Te.event,sendRequest:o((g,...N)=>{Pt(),gr();let B,H,fe;if(Ee.string(g)){B=g;let oe=N[0],ge=N[N.length-1],ue=0,Ie=K.ParameterStructures.auto;K.ParameterStructures.is(oe)&&(ue=1,Ie=oe);let Oe=N.length;Is.CancellationToken.is(ge)&&(Oe=Oe-1,fe=ge);let Ke=Oe-ue;switch(Ke){case 0:H=void 0;break;case 1:H=an(Ie,N[ue]);break;default:if(Ie===K.ParameterStructures.byName)throw new Error(`Received ${Ke} parameters for 'by Name' request parameter structure.`);H=N.slice(ue,Oe).map(pr=>gt(pr));break}}else{let oe=N;B=g.method,H=jn(g,oe);let ge=g.numberOfParams;fe=Is.CancellationToken.is(oe[ge])?oe[ge]:void 0}let _e=a++,we;fe&&(we=fe.onCancellationRequested(()=>{let oe=R.sender.sendCancellation(xt,_e);return oe===void 0?(s.log(`Received no promise from cancellation strategy when cancelling id ${_e}`),Promise.resolve()):oe.catch(()=>{s.log(`Sending cancellation messages for id ${_e} failed`)})}));let xe={jsonrpc:_,id:_e,method:B,params:H};return lr(xe),typeof R.sender.enableCancellation=="function"&&R.sender.enableCancellation(xe),new Promise(async(oe,ge)=>{let ue=o(Ke=>{oe(Ke),R.sender.cleanup(_e),we?.dispose()},"resolveWithCleanup"),Ie=o(Ke=>{ge(Ke),R.sender.cleanup(_e),we?.dispose()},"rejectWithCleanup"),Oe={method:B,timerStart:Date.now(),resolve:ue,reject:Ie};try{await e.write(xe),Q.set(_e,Oe)}catch(Ke){throw s.error("Sending request failed."),Oe.reject(new K.ResponseError(K.ErrorCodes.MessageWriteError,Ke.message?Ke.message:"Unknown reason")),Ke}})},"sendRequest"),onRequest:o((g,N)=>{Pt();let B=null;return Cs.is(g)?(B=void 0,p=g):Ee.string(g)?(B=null,N!==void 0&&(B=g,x.set(g,{handler:N,type:void 0}))):N!==void 0&&(B=g.method,x.set(g.method,{type:g,handler:N})),{dispose:o(()=>{B!==null&&(B!==void 0?x.delete(B):p=void 0)},"dispose")}},"onRequest"),hasPendingResponse:o(()=>Q.size>0,"hasPendingResponse"),trace:o(async(g,N,B)=>{let H=!1,fe=et.Text;B!==void 0&&(Ee.boolean(B)?H=B:(H=B.sendNotification||!1,fe=B.traceFormat||et.Text)),G=g,ie=fe,G===me.Off?re=void 0:re=N,H&&!$()&&!O()&&await xt.sendNotification(Ns.type,{value:me.toString(g)})},"trace"),onError:ee.event,onClose:le.event,onUnhandledNotification:Se.event,onDispose:F.event,end:o(()=>{e.end()},"end"),dispose:o(()=>{if(O())return;be=mt.Disposed,F.fire(void 0);let g=new K.ResponseError(K.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let N of Q.values())N.reject(g);Q=new Map,L=new Map,z=new Set,j=new Dc.LinkedMap,Ee.func(e.dispose)&&e.dispose(),Ee.func(t.dispose)&&t.dispose()},"dispose"),listen:o(()=>{Pt(),fr(),be=mt.Listening,t.listen(sr)},"listen"),inspect:o(()=>{(0,Lc.default)().console.log("inspect")},"inspect")};return xt.onNotification(fi.type,g=>{if(G===me.Off||!re)return;let N=G===me.Verbose||G===me.Compact;re.log(g.message,N?g.verbose:void 0)}),xt.onNotification(er.type,g=>{let N=A.get(g.token);N?N(g.value):Te.fire(g)}),xt}o(O_,"createMessageConnection");ne.createMessageConnection=O_});var wi=Z(S=>{"use strict";b();Object.defineProperty(S,"__esModule",{value:!0});S.ProgressType=S.ProgressToken=S.createMessageConnection=S.NullLogger=S.ConnectionOptions=S.ConnectionStrategy=S.AbstractMessageBuffer=S.WriteableStreamMessageWriter=S.AbstractMessageWriter=S.MessageWriter=S.ReadableStreamMessageReader=S.AbstractMessageReader=S.MessageReader=S.SharedArrayReceiverStrategy=S.SharedArraySenderStrategy=S.CancellationToken=S.CancellationTokenSource=S.Emitter=S.Event=S.Disposable=S.LRUCache=S.Touch=S.LinkedMap=S.ParameterStructures=S.NotificationType9=S.NotificationType8=S.NotificationType7=S.NotificationType6=S.NotificationType5=S.NotificationType4=S.NotificationType3=S.NotificationType2=S.NotificationType1=S.NotificationType0=S.NotificationType=S.ErrorCodes=S.ResponseError=S.RequestType9=S.RequestType8=S.RequestType7=S.RequestType6=S.RequestType5=S.RequestType4=S.RequestType3=S.RequestType2=S.RequestType1=S.RequestType0=S.RequestType=S.Message=S.RAL=void 0;S.MessageStrategy=S.CancellationStrategy=S.CancellationSenderStrategy=S.CancellationReceiverStrategy=S.ConnectionError=S.ConnectionErrors=S.LogTraceNotification=S.SetTraceNotification=S.TraceFormat=S.TraceValues=S.Trace=void 0;var ye=is();Object.defineProperty(S,"Message",{enumerable:!0,get:o(function(){return ye.Message},"get")});Object.defineProperty(S,"RequestType",{enumerable:!0,get:o(function(){return ye.RequestType},"get")});Object.defineProperty(S,"RequestType0",{enumerable:!0,get:o(function(){return ye.RequestType0},"get")});Object.defineProperty(S,"RequestType1",{enumerable:!0,get:o(function(){return ye.RequestType1},"get")});Object.defineProperty(S,"RequestType2",{enumerable:!0,get:o(function(){return ye.RequestType2},"get")});Object.defineProperty(S,"RequestType3",{enumerable:!0,get:o(function(){return ye.RequestType3},"get")});Object.defineProperty(S,"RequestType4",{enumerable:!0,get:o(function(){return ye.RequestType4},"get")});Object.defineProperty(S,"RequestType5",{enumerable:!0,get:o(function(){return ye.RequestType5},"get")});Object.defineProperty(S,"RequestType6",{enumerable:!0,get:o(function(){return ye.RequestType6},"get")});Object.defineProperty(S,"RequestType7",{enumerable:!0,get:o(function(){return ye.RequestType7},"get")});Object.defineProperty(S,"RequestType8",{enumerable:!0,get:o(function(){return ye.RequestType8},"get")});Object.defineProperty(S,"RequestType9",{enumerable:!0,get:o(function(){return ye.RequestType9},"get")});Object.defineProperty(S,"ResponseError",{enumerable:!0,get:o(function(){return ye.ResponseError},"get")});Object.defineProperty(S,"ErrorCodes",{enumerable:!0,get:o(function(){return ye.ErrorCodes},"get")});Object.defineProperty(S,"NotificationType",{enumerable:!0,get:o(function(){return ye.NotificationType},"get")});Object.defineProperty(S,"NotificationType0",{enumerable:!0,get:o(function(){return ye.NotificationType0},"get")});Object.defineProperty(S,"NotificationType1",{enumerable:!0,get:o(function(){return ye.NotificationType1},"get")});Object.defineProperty(S,"NotificationType2",{enumerable:!0,get:o(function(){return ye.NotificationType2},"get")});Object.defineProperty(S,"NotificationType3",{enumerable:!0,get:o(function(){return ye.NotificationType3},"get")});Object.defineProperty(S,"NotificationType4",{enumerable:!0,get:o(function(){return ye.NotificationType4},"get")});Object.defineProperty(S,"NotificationType5",{enumerable:!0,get:o(function(){return ye.NotificationType5},"get")});Object.defineProperty(S,"NotificationType6",{enumerable:!0,get:o(function(){return ye.NotificationType6},"get")});Object.defineProperty(S,"NotificationType7",{enumerable:!0,get:o(function(){return ye.NotificationType7},"get")});Object.defineProperty(S,"NotificationType8",{enumerable:!0,get:o(function(){return ye.NotificationType8},"get")});Object.defineProperty(S,"NotificationType9",{enumerable:!0,get:o(function(){return ye.NotificationType9},"get")});Object.defineProperty(S,"ParameterStructures",{enumerable:!0,get:o(function(){return ye.ParameterStructures},"get")});var Ds=ss();Object.defineProperty(S,"LinkedMap",{enumerable:!0,get:o(function(){return Ds.LinkedMap},"get")});Object.defineProperty(S,"LRUCache",{enumerable:!0,get:o(function(){return Ds.LRUCache},"get")});Object.defineProperty(S,"Touch",{enumerable:!0,get:o(function(){return Ds.Touch},"get")});var F_=xc();Object.defineProperty(S,"Disposable",{enumerable:!0,get:o(function(){return F_.Disposable},"get")});var qc=wn();Object.defineProperty(S,"Event",{enumerable:!0,get:o(function(){return qc.Event},"get")});Object.defineProperty(S,"Emitter",{enumerable:!0,get:o(function(){return qc.Emitter},"get")});var jc=ui();Object.defineProperty(S,"CancellationTokenSource",{enumerable:!0,get:o(function(){return jc.CancellationTokenSource},"get")});Object.defineProperty(S,"CancellationToken",{enumerable:!0,get:o(function(){return jc.CancellationToken},"get")});var Uc=Tc();Object.defineProperty(S,"SharedArraySenderStrategy",{enumerable:!0,get:o(function(){return Uc.SharedArraySenderStrategy},"get")});Object.defineProperty(S,"SharedArrayReceiverStrategy",{enumerable:!0,get:o(function(){return Uc.SharedArrayReceiverStrategy},"get")});var As=Sc();Object.defineProperty(S,"MessageReader",{enumerable:!0,get:o(function(){return As.MessageReader},"get")});Object.defineProperty(S,"AbstractMessageReader",{enumerable:!0,get:o(function(){return As.AbstractMessageReader},"get")});Object.defineProperty(S,"ReadableStreamMessageReader",{enumerable:!0,get:o(function(){return As.ReadableStreamMessageReader},"get")});var Os=Nc();Object.defineProperty(S,"MessageWriter",{enumerable:!0,get:o(function(){return Os.MessageWriter},"get")});Object.defineProperty(S,"AbstractMessageWriter",{enumerable:!0,get:o(function(){return Os.AbstractMessageWriter},"get")});Object.defineProperty(S,"WriteableStreamMessageWriter",{enumerable:!0,get:o(function(){return Os.WriteableStreamMessageWriter},"get")});var q_=Mc();Object.defineProperty(S,"AbstractMessageBuffer",{enumerable:!0,get:o(function(){return q_.AbstractMessageBuffer},"get")});var je=Fc();Object.defineProperty(S,"ConnectionStrategy",{enumerable:!0,get:o(function(){return je.ConnectionStrategy},"get")});Object.defineProperty(S,"ConnectionOptions",{enumerable:!0,get:o(function(){return je.ConnectionOptions},"get")});Object.defineProperty(S,"NullLogger",{enumerable:!0,get:o(function(){return je.NullLogger},"get")});Object.defineProperty(S,"createMessageConnection",{enumerable:!0,get:o(function(){return je.createMessageConnection},"get")});Object.defineProperty(S,"ProgressToken",{enumerable:!0,get:o(function(){return je.ProgressToken},"get")});Object.defineProperty(S,"ProgressType",{enumerable:!0,get:o(function(){return je.ProgressType},"get")});Object.defineProperty(S,"Trace",{enumerable:!0,get:o(function(){return je.Trace},"get")});Object.defineProperty(S,"TraceValues",{enumerable:!0,get:o(function(){return je.TraceValues},"get")});Object.defineProperty(S,"TraceFormat",{enumerable:!0,get:o(function(){return je.TraceFormat},"get")});Object.defineProperty(S,"SetTraceNotification",{enumerable:!0,get:o(function(){return je.SetTraceNotification},"get")});Object.defineProperty(S,"LogTraceNotification",{enumerable:!0,get:o(function(){return je.LogTraceNotification},"get")});Object.defineProperty(S,"ConnectionErrors",{enumerable:!0,get:o(function(){return je.ConnectionErrors},"get")});Object.defineProperty(S,"ConnectionError",{enumerable:!0,get:o(function(){return je.ConnectionError},"get")});Object.defineProperty(S,"CancellationReceiverStrategy",{enumerable:!0,get:o(function(){return je.CancellationReceiverStrategy},"get")});Object.defineProperty(S,"CancellationSenderStrategy",{enumerable:!0,get:o(function(){return je.CancellationSenderStrategy},"get")});Object.defineProperty(S,"CancellationStrategy",{enumerable:!0,get:o(function(){return je.CancellationStrategy},"get")});Object.defineProperty(S,"MessageStrategy",{enumerable:!0,get:o(function(){return je.MessageStrategy},"get")});var j_=At();S.RAL=j_.default});var $c=Z(Us=>{"use strict";b();Object.defineProperty(Us,"__esModule",{value:!0});var Wc=require("util"),It=wi(),vi=class t extends It.AbstractMessageBuffer{static{o(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Wc.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};vi.emptyBuffer=Buffer.allocUnsafe(0);var Fs=class{static{o(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),It.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),It.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),It.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),It.Disposable.create(()=>this.stream.off("data",e))}},qs=class{static{o(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),It.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),It.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),It.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,s)=>{let a=o(u=>{u==null?r():s(u)},"callback");typeof e=="string"?this.stream.write(e,n,a):this.stream.write(e,a)})}end(){this.stream.end()}},Bc=Object.freeze({messageBuffer:Object.freeze({create:o(t=>new vi(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:o((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:o((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Wc.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}},"decode")})}),stream:Object.freeze({asReadableStream:o(t=>new Fs(t),"asReadableStream"),asWritableStream:o(t=>new qs(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:o(()=>clearTimeout(r),"dispose")}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:o(()=>clearImmediate(n),"dispose")}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:o(()=>clearInterval(r),"dispose")}}})});function js(){return Bc}o(js,"RIL");(function(t){function e(){It.RAL.install(Bc)}o(e,"install"),t.install=e})(js||(js={}));Us.default=js});var nn=Z(ce=>{"use strict";b();var U_=ce&&ce.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:o(function(){return e[n]},"get")}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),W_=ce&&ce.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&U_(e,t,n)};Object.defineProperty(ce,"__esModule",{value:!0});ce.createMessageConnection=ce.createServerSocketTransport=ce.createClientSocketTransport=ce.createServerPipeTransport=ce.createClientPipeTransport=ce.generateRandomPipeName=ce.StreamMessageWriter=ce.StreamMessageReader=ce.SocketMessageWriter=ce.SocketMessageReader=ce.PortMessageWriter=ce.PortMessageReader=ce.IPCMessageWriter=ce.IPCMessageReader=void 0;var En=$c();En.default.install();var Vc=require("path"),B_=require("os"),$_=require("crypto"),Ti=require("net"),tt=wi();W_(wi(),ce);var Ws=class extends tt.AbstractMessageReader{static{o(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),tt.Disposable.create(()=>this.process.off("message",e))}};ce.IPCMessageReader=Ws;var Bs=class extends tt.AbstractMessageWriter{static{o(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ce.IPCMessageWriter=Bs;var $s=class extends tt.AbstractMessageReader{static{o(this,"PortMessageReader")}constructor(e){super(),this.onData=new tt.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};ce.PortMessageReader=$s;var Vs=class extends tt.AbstractMessageWriter{static{o(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ce.PortMessageWriter=Vs;var en=class extends tt.ReadableStreamMessageReader{static{o(this,"SocketMessageReader")}constructor(e,n="utf-8"){super((0,En.default)().stream.asReadableStream(e),n)}};ce.SocketMessageReader=en;var tn=class extends tt.WriteableStreamMessageWriter{static{o(this,"SocketMessageWriter")}constructor(e,n){super((0,En.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ce.SocketMessageWriter=tn;var xi=class extends tt.ReadableStreamMessageReader{static{o(this,"StreamMessageReader")}constructor(e,n){super((0,En.default)().stream.asReadableStream(e),n)}};ce.StreamMessageReader=xi;var Ri=class extends tt.WriteableStreamMessageWriter{static{o(this,"StreamMessageWriter")}constructor(e,n){super((0,En.default)().stream.asWritableStream(e),n)}};ce.StreamMessageWriter=Ri;var zc=process.env.XDG_RUNTIME_DIR,V_=new Map([["linux",107],["darwin",103]]);function z_(){let t=(0,$_.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;zc?e=Vc.join(zc,`vscode-ipc-${t}.sock`):e=Vc.join(B_.tmpdir(),`vscode-${t}.sock`);let n=V_.get(process.platform);return n!==void 0&&e.length>n&&(0,En.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}o(z_,"generateRandomPipeName");ce.generateRandomPipeName=z_;function H_(t,e="utf-8"){let n,r=new Promise((s,a)=>{n=s});return new Promise((s,a)=>{let u=(0,Ti.createServer)(d=>{u.close(),n([new en(d,e),new tn(d,e)])});u.on("error",a),u.listen(t,()=>{u.removeListener("error",a),s({onConnected:o(()=>r,"onConnected")})})})}o(H_,"createClientPipeTransport");ce.createClientPipeTransport=H_;function Q_(t,e="utf-8"){let n=(0,Ti.createConnection)(t);return[new en(n,e),new tn(n,e)]}o(Q_,"createServerPipeTransport");ce.createServerPipeTransport=Q_;function G_(t,e="utf-8"){let n,r=new Promise((s,a)=>{n=s});return new Promise((s,a)=>{let u=(0,Ti.createServer)(d=>{u.close(),n([new en(d,e),new tn(d,e)])});u.on("error",a),u.listen(t,"127.0.0.1",()=>{u.removeListener("error",a),s({onConnected:o(()=>r,"onConnected")})})})}o(G_,"createClientSocketTransport");ce.createClientSocketTransport=G_;function Z_(t,e="utf-8"){let n=(0,Ti.createConnection)(t,"127.0.0.1");return[new en(n,e),new tn(n,e)]}o(Z_,"createServerSocketTransport");ce.createServerSocketTransport=Z_;function J_(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}o(J_,"isReadableStream");function X_(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}o(X_,"isWritableStream");function K_(t,e,n,r){n||(n=tt.NullLogger);let s=J_(t)?new xi(t):t,a=X_(e)?new Ri(e):e;return tt.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,tt.createMessageConnection)(s,a,n,r)}o(K_,"createMessageConnection");ce.createMessageConnection=K_});var zs=Z((ww,Hc)=>{"use strict";b();Hc.exports=nn()});var Si=Z((Qc,Ei)=>{b();(function(t){if(typeof Ei=="object"&&typeof Ei.exports=="object"){var e=t(require,Qc);e!==void 0&&(Ei.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(l){function h(y){return typeof y=="string"}o(h,"is"),l.is=h})(n||(e.DocumentUri=n={}));var r;(function(l){function h(y){return typeof y=="string"}o(h,"is"),l.is=h})(r||(e.URI=r={}));var s;(function(l){l.MIN_VALUE=-2147483648,l.MAX_VALUE=2147483647;function h(y){return typeof y=="number"&&l.MIN_VALUE<=y&&y<=l.MAX_VALUE}o(h,"is"),l.is=h})(s||(e.integer=s={}));var a;(function(l){l.MIN_VALUE=0,l.MAX_VALUE=2147483647;function h(y){return typeof y=="number"&&l.MIN_VALUE<=y&&y<=l.MAX_VALUE}o(h,"is"),l.is=h})(a||(e.uinteger=a={}));var u;(function(l){function h(m,c){return m===Number.MAX_VALUE&&(m=a.MAX_VALUE),c===Number.MAX_VALUE&&(c=a.MAX_VALUE),{line:m,character:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&v.uinteger(c.line)&&v.uinteger(c.character)}o(y,"is"),l.is=y})(u||(e.Position=u={}));var d;(function(l){function h(m,c,w,M){if(v.uinteger(m)&&v.uinteger(c)&&v.uinteger(w)&&v.uinteger(M))return{start:u.create(m,c),end:u.create(w,M)};if(u.is(m)&&u.is(c))return{start:m,end:c};throw new Error("Range#create called with invalid arguments[".concat(m,", ").concat(c,", ").concat(w,", ").concat(M,"]"))}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&u.is(c.start)&&u.is(c.end)}o(y,"is"),l.is=y})(d||(e.Range=d={}));var _;(function(l){function h(m,c){return{uri:m,range:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&d.is(c.range)&&(v.string(c.uri)||v.undefined(c.uri))}o(y,"is"),l.is=y})(_||(e.Location=_={}));var p;(function(l){function h(m,c,w,M){return{targetUri:m,targetRange:c,targetSelectionRange:w,originSelectionRange:M}}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&d.is(c.targetRange)&&v.string(c.targetUri)&&d.is(c.targetSelectionRange)&&(d.is(c.originSelectionRange)||v.undefined(c.originSelectionRange))}o(y,"is"),l.is=y})(p||(e.LocationLink=p={}));var x;(function(l){function h(m,c,w,M){return{red:m,green:c,blue:w,alpha:M}}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&v.numberRange(c.red,0,1)&&v.numberRange(c.green,0,1)&&v.numberRange(c.blue,0,1)&&v.numberRange(c.alpha,0,1)}o(y,"is"),l.is=y})(x||(e.Color=x={}));var P;(function(l){function h(m,c){return{range:m,color:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&d.is(c.range)&&x.is(c.color)}o(y,"is"),l.is=y})(P||(e.ColorInformation=P={}));var E;(function(l){function h(m,c,w){return{label:m,textEdit:c,additionalTextEdits:w}}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&v.string(c.label)&&(v.undefined(c.textEdit)||re.is(c))&&(v.undefined(c.additionalTextEdits)||v.typedArray(c.additionalTextEdits,re.is))}o(y,"is"),l.is=y})(E||(e.ColorPresentation=E={}));var A;(function(l){l.Comment="comment",l.Imports="imports",l.Region="region"})(A||(e.FoldingRangeKind=A={}));var V;(function(l){function h(m,c,w,M,te,ke){var pe={startLine:m,endLine:c};return v.defined(w)&&(pe.startCharacter=w),v.defined(M)&&(pe.endCharacter=M),v.defined(te)&&(pe.kind=te),v.defined(ke)&&(pe.collapsedText=ke),pe}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&v.uinteger(c.startLine)&&v.uinteger(c.startLine)&&(v.undefined(c.startCharacter)||v.uinteger(c.startCharacter))&&(v.undefined(c.endCharacter)||v.uinteger(c.endCharacter))&&(v.undefined(c.kind)||v.string(c.kind))}o(y,"is"),l.is=y})(V||(e.FoldingRange=V={}));var j;(function(l){function h(m,c){return{location:m,message:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&_.is(c.location)&&v.string(c.message)}o(y,"is"),l.is=y})(j||(e.DiagnosticRelatedInformation=j={}));var Q;(function(l){l.Error=1,l.Warning=2,l.Information=3,l.Hint=4})(Q||(e.DiagnosticSeverity=Q={}));var z;(function(l){l.Unnecessary=1,l.Deprecated=2})(z||(e.DiagnosticTag=z={}));var L;(function(l){function h(y){var m=y;return v.objectLiteral(m)&&v.string(m.href)}o(h,"is"),l.is=h})(L||(e.CodeDescription=L={}));var G;(function(l){function h(m,c,w,M,te,ke){var pe={range:m,message:c};return v.defined(w)&&(pe.severity=w),v.defined(M)&&(pe.code=M),v.defined(te)&&(pe.source=te),v.defined(ke)&&(pe.relatedInformation=ke),pe}o(h,"create"),l.create=h;function y(m){var c,w=m;return v.defined(w)&&d.is(w.range)&&v.string(w.message)&&(v.number(w.severity)||v.undefined(w.severity))&&(v.integer(w.code)||v.string(w.code)||v.undefined(w.code))&&(v.undefined(w.codeDescription)||v.string((c=w.codeDescription)===null||c===void 0?void 0:c.href))&&(v.string(w.source)||v.undefined(w.source))&&(v.undefined(w.relatedInformation)||v.typedArray(w.relatedInformation,j.is))}o(y,"is"),l.is=y})(G||(e.Diagnostic=G={}));var ie;(function(l){function h(m,c){for(var w=[],M=2;M<arguments.length;M++)w[M-2]=arguments[M];var te={title:m,command:c};return v.defined(w)&&w.length>0&&(te.arguments=w),te}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&v.string(c.title)&&v.string(c.command)}o(y,"is"),l.is=y})(ie||(e.Command=ie={}));var re;(function(l){function h(w,M){return{range:w,newText:M}}o(h,"replace"),l.replace=h;function y(w,M){return{range:{start:w,end:w},newText:M}}o(y,"insert"),l.insert=y;function m(w){return{range:w,newText:""}}o(m,"del"),l.del=m;function c(w){var M=w;return v.objectLiteral(M)&&v.string(M.newText)&&d.is(M.range)}o(c,"is"),l.is=c})(re||(e.TextEdit=re={}));var be;(function(l){function h(m,c,w){var M={label:m};return c!==void 0&&(M.needsConfirmation=c),w!==void 0&&(M.description=w),M}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&v.string(c.label)&&(v.boolean(c.needsConfirmation)||c.needsConfirmation===void 0)&&(v.string(c.description)||c.description===void 0)}o(y,"is"),l.is=y})(be||(e.ChangeAnnotation=be={}));var ee;(function(l){function h(y){var m=y;return v.string(m)}o(h,"is"),l.is=h})(ee||(e.ChangeAnnotationIdentifier=ee={}));var le;(function(l){function h(w,M,te){return{range:w,newText:M,annotationId:te}}o(h,"replace"),l.replace=h;function y(w,M,te){return{range:{start:w,end:w},newText:M,annotationId:te}}o(y,"insert"),l.insert=y;function m(w,M){return{range:w,newText:"",annotationId:M}}o(m,"del"),l.del=m;function c(w){var M=w;return re.is(M)&&(be.is(M.annotationId)||ee.is(M.annotationId))}o(c,"is"),l.is=c})(le||(e.AnnotatedTextEdit=le={}));var Se;(function(l){function h(m,c){return{textDocument:m,edits:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&$.is(c.textDocument)&&Array.isArray(c.edits)}o(y,"is"),l.is=y})(Se||(e.TextDocumentEdit=Se={}));var Te;(function(l){function h(m,c,w){var M={kind:"create",uri:m};return c!==void 0&&(c.overwrite!==void 0||c.ignoreIfExists!==void 0)&&(M.options=c),w!==void 0&&(M.annotationId=w),M}o(h,"create"),l.create=h;function y(m){var c=m;return c&&c.kind==="create"&&v.string(c.uri)&&(c.options===void 0||(c.options.overwrite===void 0||v.boolean(c.options.overwrite))&&(c.options.ignoreIfExists===void 0||v.boolean(c.options.ignoreIfExists)))&&(c.annotationId===void 0||ee.is(c.annotationId))}o(y,"is"),l.is=y})(Te||(e.CreateFile=Te={}));var F;(function(l){function h(m,c,w,M){var te={kind:"rename",oldUri:m,newUri:c};return w!==void 0&&(w.overwrite!==void 0||w.ignoreIfExists!==void 0)&&(te.options=w),M!==void 0&&(te.annotationId=M),te}o(h,"create"),l.create=h;function y(m){var c=m;return c&&c.kind==="rename"&&v.string(c.oldUri)&&v.string(c.newUri)&&(c.options===void 0||(c.options.overwrite===void 0||v.boolean(c.options.overwrite))&&(c.options.ignoreIfExists===void 0||v.boolean(c.options.ignoreIfExists)))&&(c.annotationId===void 0||ee.is(c.annotationId))}o(y,"is"),l.is=y})(F||(e.RenameFile=F={}));var R;(function(l){function h(m,c,w){var M={kind:"delete",uri:m};return c!==void 0&&(c.recursive!==void 0||c.ignoreIfNotExists!==void 0)&&(M.options=c),w!==void 0&&(M.annotationId=w),M}o(h,"create"),l.create=h;function y(m){var c=m;return c&&c.kind==="delete"&&v.string(c.uri)&&(c.options===void 0||(c.options.recursive===void 0||v.boolean(c.options.recursive))&&(c.options.ignoreIfNotExists===void 0||v.boolean(c.options.ignoreIfNotExists)))&&(c.annotationId===void 0||ee.is(c.annotationId))}o(y,"is"),l.is=y})(R||(e.DeleteFile=R={}));var W;(function(l){function h(y){var m=y;return m&&(m.changes!==void 0||m.documentChanges!==void 0)&&(m.documentChanges===void 0||m.documentChanges.every(function(c){return v.string(c.kind)?Te.is(c)||F.is(c)||R.is(c):Se.is(c)}))}o(h,"is"),l.is=h})(W||(e.WorkspaceEdit=W={}));var D=function(){function l(h,y){this.edits=h,this.changeAnnotations=y}return o(l,"TextEditChangeImpl"),l.prototype.insert=function(h,y,m){var c,w;if(m===void 0?c=re.insert(h,y):ee.is(m)?(w=m,c=le.insert(h,y,m)):(this.assertChangeAnnotations(this.changeAnnotations),w=this.changeAnnotations.manage(m),c=le.insert(h,y,w)),this.edits.push(c),w!==void 0)return w},l.prototype.replace=function(h,y,m){var c,w;if(m===void 0?c=re.replace(h,y):ee.is(m)?(w=m,c=le.replace(h,y,m)):(this.assertChangeAnnotations(this.changeAnnotations),w=this.changeAnnotations.manage(m),c=le.replace(h,y,w)),this.edits.push(c),w!==void 0)return w},l.prototype.delete=function(h,y){var m,c;if(y===void 0?m=re.del(h):ee.is(y)?(c=y,m=le.del(h,y)):(this.assertChangeAnnotations(this.changeAnnotations),c=this.changeAnnotations.manage(y),m=le.del(h,c)),this.edits.push(m),c!==void 0)return c},l.prototype.add=function(h){this.edits.push(h)},l.prototype.all=function(){return this.edits},l.prototype.clear=function(){this.edits.splice(0,this.edits.length)},l.prototype.assertChangeAnnotations=function(h){if(h===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},l}(),T=function(){function l(h){this._annotations=h===void 0?Object.create(null):h,this._counter=0,this._size=0}return o(l,"ChangeAnnotations"),l.prototype.all=function(){return this._annotations},Object.defineProperty(l.prototype,"size",{get:o(function(){return this._size},"get"),enumerable:!1,configurable:!0}),l.prototype.manage=function(h,y){var m;if(ee.is(h)?m=h:(m=this.nextId(),y=h),this._annotations[m]!==void 0)throw new Error("Id ".concat(m," is already in use."));if(y===void 0)throw new Error("No annotation provided for id ".concat(m));return this._annotations[m]=y,this._size++,m},l.prototype.nextId=function(){return this._counter++,this._counter.toString()},l}(),k=function(){function l(h){var y=this;this._textEditChanges=Object.create(null),h!==void 0?(this._workspaceEdit=h,h.documentChanges?(this._changeAnnotations=new T(h.changeAnnotations),h.changeAnnotations=this._changeAnnotations.all(),h.documentChanges.forEach(function(m){if(Se.is(m)){var c=new D(m.edits,y._changeAnnotations);y._textEditChanges[m.textDocument.uri]=c}})):h.changes&&Object.keys(h.changes).forEach(function(m){var c=new D(h.changes[m]);y._textEditChanges[m]=c})):this._workspaceEdit={}}return o(l,"WorkspaceChange"),Object.defineProperty(l.prototype,"edit",{get:o(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),l.prototype.getTextEditChange=function(h){if($.is(h)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var y={uri:h.uri,version:h.version},m=this._textEditChanges[y.uri];if(!m){var c=[],w={textDocument:y,edits:c};this._workspaceEdit.documentChanges.push(w),m=new D(c,this._changeAnnotations),this._textEditChanges[y.uri]=m}return m}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var m=this._textEditChanges[h];if(!m){var c=[];this._workspaceEdit.changes[h]=c,m=new D(c),this._textEditChanges[h]=m}return m}},l.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new T,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},l.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},l.prototype.createFile=function(h,y,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var c;be.is(y)||ee.is(y)?c=y:m=y;var w,M;if(c===void 0?w=Te.create(h,m):(M=ee.is(c)?c:this._changeAnnotations.manage(c),w=Te.create(h,m,M)),this._workspaceEdit.documentChanges.push(w),M!==void 0)return M},l.prototype.renameFile=function(h,y,m,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var w;be.is(m)||ee.is(m)?w=m:c=m;var M,te;if(w===void 0?M=F.create(h,y,c):(te=ee.is(w)?w:this._changeAnnotations.manage(w),M=F.create(h,y,c,te)),this._workspaceEdit.documentChanges.push(M),te!==void 0)return te},l.prototype.deleteFile=function(h,y,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var c;be.is(y)||ee.is(y)?c=y:m=y;var w,M;if(c===void 0?w=R.create(h,m):(M=ee.is(c)?c:this._changeAnnotations.manage(c),w=R.create(h,m,M)),this._workspaceEdit.documentChanges.push(w),M!==void 0)return M},l}();e.WorkspaceChange=k;var I;(function(l){function h(m){return{uri:m}}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&v.string(c.uri)}o(y,"is"),l.is=y})(I||(e.TextDocumentIdentifier=I={}));var U;(function(l){function h(m,c){return{uri:m,version:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&v.string(c.uri)&&v.integer(c.version)}o(y,"is"),l.is=y})(U||(e.VersionedTextDocumentIdentifier=U={}));var $;(function(l){function h(m,c){return{uri:m,version:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&v.string(c.uri)&&(c.version===null||v.integer(c.version))}o(y,"is"),l.is=y})($||(e.OptionalVersionedTextDocumentIdentifier=$={}));var O;(function(l){function h(m,c,w,M){return{uri:m,languageId:c,version:w,text:M}}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&v.string(c.uri)&&v.string(c.languageId)&&v.integer(c.version)&&v.string(c.text)}o(y,"is"),l.is=y})(O||(e.TextDocumentItem=O={}));var X;(function(l){l.PlainText="plaintext",l.Markdown="markdown";function h(y){var m=y;return m===l.PlainText||m===l.Markdown}o(h,"is"),l.is=h})(X||(e.MarkupKind=X={}));var Y;(function(l){function h(y){var m=y;return v.objectLiteral(y)&&X.is(m.kind)&&v.string(m.value)}o(h,"is"),l.is=h})(Y||(e.MarkupContent=Y={}));var Ce;(function(l){l.Text=1,l.Method=2,l.Function=3,l.Constructor=4,l.Field=5,l.Variable=6,l.Class=7,l.Interface=8,l.Module=9,l.Property=10,l.Unit=11,l.Value=12,l.Enum=13,l.Keyword=14,l.Snippet=15,l.Color=16,l.File=17,l.Reference=18,l.Folder=19,l.EnumMember=20,l.Constant=21,l.Struct=22,l.Event=23,l.Operator=24,l.TypeParameter=25})(Ce||(e.CompletionItemKind=Ce={}));var de;(function(l){l.PlainText=1,l.Snippet=2})(de||(e.InsertTextFormat=de={}));var He;(function(l){l.Deprecated=1})(He||(e.CompletionItemTag=He={}));var ft;(function(l){function h(m,c,w){return{newText:m,insert:c,replace:w}}o(h,"create"),l.create=h;function y(m){var c=m;return c&&v.string(c.newText)&&d.is(c.insert)&&d.is(c.replace)}o(y,"is"),l.is=y})(ft||(e.InsertReplaceEdit=ft={}));var sr;(function(l){l.asIs=1,l.adjustIndentation=2})(sr||(e.InsertTextMode=sr={}));var ar;(function(l){function h(y){var m=y;return m&&(v.string(m.detail)||m.detail===void 0)&&(v.string(m.description)||m.description===void 0)}o(h,"is"),l.is=h})(ar||(e.CompletionItemLabelDetails=ar={}));var cr;(function(l){function h(y){return{label:y}}o(h,"create"),l.create=h})(cr||(e.CompletionItem=cr={}));var ur;(function(l){function h(y,m){return{items:y||[],isIncomplete:!!m}}o(h,"create"),l.create=h})(ur||(e.CompletionList=ur={}));var on;(function(l){function h(m){return m.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(h,"fromPlainText"),l.fromPlainText=h;function y(m){var c=m;return v.string(c)||v.objectLiteral(c)&&v.string(c.language)&&v.string(c.value)}o(y,"is"),l.is=y})(on||(e.MarkedString=on={}));var ct;(function(l){function h(y){var m=y;return!!m&&v.objectLiteral(m)&&(Y.is(m.contents)||on.is(m.contents)||v.typedArray(m.contents,on.is))&&(y.range===void 0||d.is(y.range))}o(h,"is"),l.is=h})(ct||(e.Hover=ct={}));var lr;(function(l){function h(y,m){return m?{label:y,documentation:m}:{label:y}}o(h,"create"),l.create=h})(lr||(e.ParameterInformation=lr={}));var dr;(function(l){function h(y,m){for(var c=[],w=2;w<arguments.length;w++)c[w-2]=arguments[w];var M={label:y};return v.defined(m)&&(M.documentation=m),v.defined(c)?M.parameters=c:M.parameters=[],M}o(h,"create"),l.create=h})(dr||(e.SignatureInformation=dr={}));var Vt;(function(l){l.Text=1,l.Read=2,l.Write=3})(Vt||(e.DocumentHighlightKind=Vt={}));var mr;(function(l){function h(y,m){var c={range:y};return v.number(m)&&(c.kind=m),c}o(h,"create"),l.create=h})(mr||(e.DocumentHighlight=mr={}));var sn;(function(l){l.File=1,l.Module=2,l.Namespace=3,l.Package=4,l.Class=5,l.Method=6,l.Property=7,l.Field=8,l.Constructor=9,l.Enum=10,l.Interface=11,l.Function=12,l.Variable=13,l.Constant=14,l.String=15,l.Number=16,l.Boolean=17,l.Array=18,l.Object=19,l.Key=20,l.Null=21,l.EnumMember=22,l.Struct=23,l.Event=24,l.Operator=25,l.TypeParameter=26})(sn||(e.SymbolKind=sn={}));var _r;(function(l){l.Deprecated=1})(_r||(e.SymbolTag=_r={}));var vt;(function(l){function h(y,m,c,w,M){var te={name:y,kind:m,location:{uri:w,range:c}};return M&&(te.containerName=M),te}o(h,"create"),l.create=h})(vt||(e.SymbolInformation=vt={}));var Pt;(function(l){function h(y,m,c,w){return w!==void 0?{name:y,kind:m,location:{uri:c,range:w}}:{name:y,kind:m,location:{uri:c}}}o(h,"create"),l.create=h})(Pt||(e.WorkspaceSymbol=Pt={}));var fr;(function(l){function h(m,c,w,M,te,ke){var pe={name:m,detail:c,kind:w,range:M,selectionRange:te};return ke!==void 0&&(pe.children=ke),pe}o(h,"create"),l.create=h;function y(m){var c=m;return c&&v.string(c.name)&&v.number(c.kind)&&d.is(c.range)&&d.is(c.selectionRange)&&(c.detail===void 0||v.string(c.detail))&&(c.deprecated===void 0||v.boolean(c.deprecated))&&(c.children===void 0||Array.isArray(c.children))&&(c.tags===void 0||Array.isArray(c.tags))}o(y,"is"),l.is=y})(fr||(e.DocumentSymbol=fr={}));var gr;(function(l){l.Empty="",l.QuickFix="quickfix",l.Refactor="refactor",l.RefactorExtract="refactor.extract",l.RefactorInline="refactor.inline",l.RefactorRewrite="refactor.rewrite",l.Source="source",l.SourceOrganizeImports="source.organizeImports",l.SourceFixAll="source.fixAll"})(gr||(e.CodeActionKind=gr={}));var gt;(function(l){l.Invoked=1,l.Automatic=2})(gt||(e.CodeActionTriggerKind=gt={}));var Fn;(function(l){function h(m,c,w){var M={diagnostics:m};return c!=null&&(M.only=c),w!=null&&(M.triggerKind=w),M}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&v.typedArray(c.diagnostics,G.is)&&(c.only===void 0||v.typedArray(c.only,v.string))&&(c.triggerKind===void 0||c.triggerKind===gt.Invoked||c.triggerKind===gt.Automatic)}o(y,"is"),l.is=y})(Fn||(e.CodeActionContext=Fn={}));var qn;(function(l){function h(m,c,w){var M={title:m},te=!0;return typeof c=="string"?(te=!1,M.kind=c):ie.is(c)?M.command=c:M.edit=c,te&&w!==void 0&&(M.kind=w),M}o(h,"create"),l.create=h;function y(m){var c=m;return c&&v.string(c.title)&&(c.diagnostics===void 0||v.typedArray(c.diagnostics,G.is))&&(c.kind===void 0||v.string(c.kind))&&(c.edit!==void 0||c.command!==void 0)&&(c.command===void 0||ie.is(c.command))&&(c.isPreferred===void 0||v.boolean(c.isPreferred))&&(c.edit===void 0||W.is(c.edit))}o(y,"is"),l.is=y})(qn||(e.CodeAction=qn={}));var an;(function(l){function h(m,c){var w={range:m};return v.defined(c)&&(w.data=c),w}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&d.is(c.range)&&(v.undefined(c.command)||ie.is(c.command))}o(y,"is"),l.is=y})(an||(e.CodeLens=an={}));var jn;(function(l){function h(m,c){return{tabSize:m,insertSpaces:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&v.uinteger(c.tabSize)&&v.boolean(c.insertSpaces)}o(y,"is"),l.is=y})(jn||(e.FormattingOptions=jn={}));var xt;(function(l){function h(m,c,w){return{range:m,target:c,data:w}}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&d.is(c.range)&&(v.undefined(c.target)||v.string(c.target))}o(y,"is"),l.is=y})(xt||(e.DocumentLink=xt={}));var g;(function(l){function h(m,c){return{range:m,parent:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&d.is(c.range)&&(c.parent===void 0||l.is(c.parent))}o(y,"is"),l.is=y})(g||(e.SelectionRange=g={}));var N;(function(l){l.namespace="namespace",l.type="type",l.class="class",l.enum="enum",l.interface="interface",l.struct="struct",l.typeParameter="typeParameter",l.parameter="parameter",l.variable="variable",l.property="property",l.enumMember="enumMember",l.event="event",l.function="function",l.method="method",l.macro="macro",l.keyword="keyword",l.modifier="modifier",l.comment="comment",l.string="string",l.number="number",l.regexp="regexp",l.operator="operator",l.decorator="decorator"})(N||(e.SemanticTokenTypes=N={}));var B;(function(l){l.declaration="declaration",l.definition="definition",l.readonly="readonly",l.static="static",l.deprecated="deprecated",l.abstract="abstract",l.async="async",l.modification="modification",l.documentation="documentation",l.defaultLibrary="defaultLibrary"})(B||(e.SemanticTokenModifiers=B={}));var H;(function(l){function h(y){var m=y;return v.objectLiteral(m)&&(m.resultId===void 0||typeof m.resultId=="string")&&Array.isArray(m.data)&&(m.data.length===0||typeof m.data[0]=="number")}o(h,"is"),l.is=h})(H||(e.SemanticTokens=H={}));var fe;(function(l){function h(m,c){return{range:m,text:c}}o(h,"create"),l.create=h;function y(m){var c=m;return c!=null&&d.is(c.range)&&v.string(c.text)}o(y,"is"),l.is=y})(fe||(e.InlineValueText=fe={}));var _e;(function(l){function h(m,c,w){return{range:m,variableName:c,caseSensitiveLookup:w}}o(h,"create"),l.create=h;function y(m){var c=m;return c!=null&&d.is(c.range)&&v.boolean(c.caseSensitiveLookup)&&(v.string(c.variableName)||c.variableName===void 0)}o(y,"is"),l.is=y})(_e||(e.InlineValueVariableLookup=_e={}));var we;(function(l){function h(m,c){return{range:m,expression:c}}o(h,"create"),l.create=h;function y(m){var c=m;return c!=null&&d.is(c.range)&&(v.string(c.expression)||c.expression===void 0)}o(y,"is"),l.is=y})(we||(e.InlineValueEvaluatableExpression=we={}));var xe;(function(l){function h(m,c){return{frameId:m,stoppedLocation:c}}o(h,"create"),l.create=h;function y(m){var c=m;return v.defined(c)&&d.is(m.stoppedLocation)}o(y,"is"),l.is=y})(xe||(e.InlineValueContext=xe={}));var oe;(function(l){l.Type=1,l.Parameter=2;function h(y){return y===1||y===2}o(h,"is"),l.is=h})(oe||(e.InlayHintKind=oe={}));var ge;(function(l){function h(m){return{value:m}}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&(c.tooltip===void 0||v.string(c.tooltip)||Y.is(c.tooltip))&&(c.location===void 0||_.is(c.location))&&(c.command===void 0||ie.is(c.command))}o(y,"is"),l.is=y})(ge||(e.InlayHintLabelPart=ge={}));var ue;(function(l){function h(m,c,w){var M={position:m,label:c};return w!==void 0&&(M.kind=w),M}o(h,"create"),l.create=h;function y(m){var c=m;return v.objectLiteral(c)&&u.is(c.position)&&(v.string(c.label)||v.typedArray(c.label,ge.is))&&(c.kind===void 0||oe.is(c.kind))&&c.textEdits===void 0||v.typedArray(c.textEdits,re.is)&&(c.tooltip===void 0||v.string(c.tooltip)||Y.is(c.tooltip))&&(c.paddingLeft===void 0||v.boolean(c.paddingLeft))&&(c.paddingRight===void 0||v.boolean(c.paddingRight))}o(y,"is"),l.is=y})(ue||(e.InlayHint=ue={}));var Ie;(function(l){function h(y){return{kind:"snippet",value:y}}o(h,"createSnippet"),l.createSnippet=h})(Ie||(e.StringValue=Ie={}));var Oe;(function(l){function h(y,m,c,w){return{insertText:y,filterText:m,range:c,command:w}}o(h,"create"),l.create=h})(Oe||(e.InlineCompletionItem=Oe={}));var Ke;(function(l){function h(y){return{items:y}}o(h,"create"),l.create=h})(Ke||(e.InlineCompletionList=Ke={}));var pr;(function(l){l.Invoked=0,l.Automatic=1})(pr||(e.InlineCompletionTriggerKind=pr={}));var ca;(function(l){function h(y,m){return{range:y,text:m}}o(h,"create"),l.create=h})(ca||(e.SelectedCompletionInfo=ca={}));var ua;(function(l){function h(y,m){return{triggerKind:y,selectedCompletionInfo:m}}o(h,"create"),l.create=h})(ua||(e.InlineCompletionContext=ua={}));var la;(function(l){function h(y){var m=y;return v.objectLiteral(m)&&r.is(m.uri)&&v.string(m.name)}o(h,"is"),l.is=h})(la||(e.WorkspaceFolder=la={})),e.EOL=[`
`,`\r
`,"\r"];var da;(function(l){function h(w,M,te,ke){return new Gd(w,M,te,ke)}o(h,"create"),l.create=h;function y(w){var M=w;return!!(v.defined(M)&&v.string(M.uri)&&(v.undefined(M.languageId)||v.string(M.languageId))&&v.uinteger(M.lineCount)&&v.func(M.getText)&&v.func(M.positionAt)&&v.func(M.offsetAt))}o(y,"is"),l.is=y;function m(w,M){for(var te=w.getText(),ke=c(M,function(cn,hr){var ma=cn.range.start.line-hr.range.start.line;return ma===0?cn.range.start.character-hr.range.start.character:ma}),pe=te.length,ut=ke.length-1;ut>=0;ut--){var lt=ke[ut],Rt=w.offsetAt(lt.range.start),ae=w.offsetAt(lt.range.end);if(ae<=pe)te=te.substring(0,Rt)+lt.newText+te.substring(ae,te.length);else throw new Error("Overlapping edit");pe=Rt}return te}o(m,"applyEdits"),l.applyEdits=m;function c(w,M){if(w.length<=1)return w;var te=w.length/2|0,ke=w.slice(0,te),pe=w.slice(te);c(ke,M),c(pe,M);for(var ut=0,lt=0,Rt=0;ut<ke.length&&lt<pe.length;){var ae=M(ke[ut],pe[lt]);ae<=0?w[Rt++]=ke[ut++]:w[Rt++]=pe[lt++]}for(;ut<ke.length;)w[Rt++]=ke[ut++];for(;lt<pe.length;)w[Rt++]=pe[lt++];return w}o(c,"mergeSort")})(da||(e.TextDocument=da={}));var Gd=function(){function l(h,y,m,c){this._uri=h,this._languageId=y,this._version=m,this._content=c,this._lineOffsets=void 0}return o(l,"FullTextDocument"),Object.defineProperty(l.prototype,"uri",{get:o(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"languageId",{get:o(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"version",{get:o(function(){return this._version},"get"),enumerable:!1,configurable:!0}),l.prototype.getText=function(h){if(h){var y=this.offsetAt(h.start),m=this.offsetAt(h.end);return this._content.substring(y,m)}return this._content},l.prototype.update=function(h,y){this._content=h.text,this._version=y,this._lineOffsets=void 0},l.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var h=[],y=this._content,m=!0,c=0;c<y.length;c++){m&&(h.push(c),m=!1);var w=y.charAt(c);m=w==="\r"||w===`
`,w==="\r"&&c+1<y.length&&y.charAt(c+1)===`
`&&c++}m&&y.length>0&&h.push(y.length),this._lineOffsets=h}return this._lineOffsets},l.prototype.positionAt=function(h){h=Math.max(Math.min(h,this._content.length),0);var y=this.getLineOffsets(),m=0,c=y.length;if(c===0)return u.create(0,h);for(;m<c;){var w=Math.floor((m+c)/2);y[w]>h?c=w:m=w+1}var M=m-1;return u.create(M,h-y[M])},l.prototype.offsetAt=function(h){var y=this.getLineOffsets();if(h.line>=y.length)return this._content.length;if(h.line<0)return 0;var m=y[h.line],c=h.line+1<y.length?y[h.line+1]:this._content.length;return Math.max(Math.min(m+h.character,c),m)},Object.defineProperty(l.prototype,"lineCount",{get:o(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),l}(),v;(function(l){var h=Object.prototype.toString;function y(ae){return typeof ae<"u"}o(y,"defined"),l.defined=y;function m(ae){return typeof ae>"u"}o(m,"undefined"),l.undefined=m;function c(ae){return ae===!0||ae===!1}o(c,"boolean"),l.boolean=c;function w(ae){return h.call(ae)==="[object String]"}o(w,"string"),l.string=w;function M(ae){return h.call(ae)==="[object Number]"}o(M,"number"),l.number=M;function te(ae,cn,hr){return h.call(ae)==="[object Number]"&&cn<=ae&&ae<=hr}o(te,"numberRange"),l.numberRange=te;function ke(ae){return h.call(ae)==="[object Number]"&&-2147483648<=ae&&ae<=2147483647}o(ke,"integer"),l.integer=ke;function pe(ae){return h.call(ae)==="[object Number]"&&0<=ae&&ae<=2147483647}o(pe,"uinteger"),l.uinteger=pe;function ut(ae){return h.call(ae)==="[object Function]"}o(ut,"func"),l.func=ut;function lt(ae){return ae!==null&&typeof ae=="object"}o(lt,"objectLiteral"),l.objectLiteral=lt;function Rt(ae,cn){return Array.isArray(ae)&&ae.every(cn)}o(Rt,"typedArray"),l.typedArray=Rt})(v||(v={}))})});var Re=Z(Ze=>{"use strict";b();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.ProtocolNotificationType=Ze.ProtocolNotificationType0=Ze.ProtocolRequestType=Ze.ProtocolRequestType0=Ze.RegistrationType=Ze.MessageDirection=void 0;var Sn=nn(),Gc;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(Gc||(Ze.MessageDirection=Gc={}));var Hs=class{static{o(this,"RegistrationType")}constructor(e){this.method=e}};Ze.RegistrationType=Hs;var Qs=class extends Sn.RequestType0{static{o(this,"ProtocolRequestType0")}constructor(e){super(e)}};Ze.ProtocolRequestType0=Qs;var Gs=class extends Sn.RequestType{static{o(this,"ProtocolRequestType")}constructor(e){super(e,Sn.ParameterStructures.byName)}};Ze.ProtocolRequestType=Gs;var Zs=class extends Sn.NotificationType0{static{o(this,"ProtocolNotificationType0")}constructor(e){super(e)}};Ze.ProtocolNotificationType0=Zs;var Js=class extends Sn.NotificationType{static{o(this,"ProtocolNotificationType")}constructor(e){super(e,Sn.ParameterStructures.byName)}};Ze.ProtocolNotificationType=Js});var Ii=Z(Ae=>{"use strict";b();Object.defineProperty(Ae,"__esModule",{value:!0});Ae.objectLiteral=Ae.typedArray=Ae.stringArray=Ae.array=Ae.func=Ae.error=Ae.number=Ae.string=Ae.boolean=void 0;function Y_(t){return t===!0||t===!1}o(Y_,"boolean");Ae.boolean=Y_;function Zc(t){return typeof t=="string"||t instanceof String}o(Zc,"string");Ae.string=Zc;function ef(t){return typeof t=="number"||t instanceof Number}o(ef,"number");Ae.number=ef;function tf(t){return t instanceof Error}o(tf,"error");Ae.error=tf;function nf(t){return typeof t=="function"}o(nf,"func");Ae.func=nf;function Jc(t){return Array.isArray(t)}o(Jc,"array");Ae.array=Jc;function rf(t){return Jc(t)&&t.every(e=>Zc(e))}o(rf,"stringArray");Ae.stringArray=rf;function of(t,e){return Array.isArray(t)&&t.every(e)}o(of,"typedArray");Ae.typedArray=of;function sf(t){return t!==null&&typeof t=="object"}o(sf,"objectLiteral");Ae.objectLiteral=sf});var Yc=Z(ki=>{"use strict";b();Object.defineProperty(ki,"__esModule",{value:!0});ki.ImplementationRequest=void 0;var Xc=Re(),Kc;(function(t){t.method="textDocument/implementation",t.messageDirection=Xc.MessageDirection.clientToServer,t.type=new Xc.ProtocolRequestType(t.method)})(Kc||(ki.ImplementationRequest=Kc={}))});var nu=Z(Pi=>{"use strict";b();Object.defineProperty(Pi,"__esModule",{value:!0});Pi.TypeDefinitionRequest=void 0;var eu=Re(),tu;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=eu.MessageDirection.clientToServer,t.type=new eu.ProtocolRequestType(t.method)})(tu||(Pi.TypeDefinitionRequest=tu={}))});var ou=Z(In=>{"use strict";b();Object.defineProperty(In,"__esModule",{value:!0});In.DidChangeWorkspaceFoldersNotification=In.WorkspaceFoldersRequest=void 0;var Ci=Re(),ru;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=Ci.MessageDirection.serverToClient,t.type=new Ci.ProtocolRequestType0(t.method)})(ru||(In.WorkspaceFoldersRequest=ru={}));var iu;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=Ci.MessageDirection.clientToServer,t.type=new Ci.ProtocolNotificationType(t.method)})(iu||(In.DidChangeWorkspaceFoldersNotification=iu={}))});var cu=Z(Ni=>{"use strict";b();Object.defineProperty(Ni,"__esModule",{value:!0});Ni.ConfigurationRequest=void 0;var su=Re(),au;(function(t){t.method="workspace/configuration",t.messageDirection=su.MessageDirection.serverToClient,t.type=new su.ProtocolRequestType(t.method)})(au||(Ni.ConfigurationRequest=au={}))});var du=Z(kn=>{"use strict";b();Object.defineProperty(kn,"__esModule",{value:!0});kn.ColorPresentationRequest=kn.DocumentColorRequest=void 0;var Mi=Re(),uu;(function(t){t.method="textDocument/documentColor",t.messageDirection=Mi.MessageDirection.clientToServer,t.type=new Mi.ProtocolRequestType(t.method)})(uu||(kn.DocumentColorRequest=uu={}));var lu;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=Mi.MessageDirection.clientToServer,t.type=new Mi.ProtocolRequestType(t.method)})(lu||(kn.ColorPresentationRequest=lu={}))});var fu=Z(Pn=>{"use strict";b();Object.defineProperty(Pn,"__esModule",{value:!0});Pn.FoldingRangeRefreshRequest=Pn.FoldingRangeRequest=void 0;var Li=Re(),mu;(function(t){t.method="textDocument/foldingRange",t.messageDirection=Li.MessageDirection.clientToServer,t.type=new Li.ProtocolRequestType(t.method)})(mu||(Pn.FoldingRangeRequest=mu={}));var _u;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=Li.MessageDirection.serverToClient,t.type=new Li.ProtocolRequestType0(t.method)})(_u||(Pn.FoldingRangeRefreshRequest=_u={}))});var hu=Z(Di=>{"use strict";b();Object.defineProperty(Di,"__esModule",{value:!0});Di.DeclarationRequest=void 0;var gu=Re(),pu;(function(t){t.method="textDocument/declaration",t.messageDirection=gu.MessageDirection.clientToServer,t.type=new gu.ProtocolRequestType(t.method)})(pu||(Di.DeclarationRequest=pu={}))});var wu=Z(Ai=>{"use strict";b();Object.defineProperty(Ai,"__esModule",{value:!0});Ai.SelectionRangeRequest=void 0;var yu=Re(),bu;(function(t){t.method="textDocument/selectionRange",t.messageDirection=yu.MessageDirection.clientToServer,t.type=new yu.ProtocolRequestType(t.method)})(bu||(Ai.SelectionRangeRequest=bu={}))});var Tu=Z(qt=>{"use strict";b();Object.defineProperty(qt,"__esModule",{value:!0});qt.WorkDoneProgressCancelNotification=qt.WorkDoneProgressCreateRequest=qt.WorkDoneProgress=void 0;var af=nn(),Oi=Re(),vu;(function(t){t.type=new af.ProgressType;function e(n){return n===t.type}o(e,"is"),t.is=e})(vu||(qt.WorkDoneProgress=vu={}));var xu;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=Oi.MessageDirection.serverToClient,t.type=new Oi.ProtocolRequestType(t.method)})(xu||(qt.WorkDoneProgressCreateRequest=xu={}));var Ru;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=Oi.MessageDirection.clientToServer,t.type=new Oi.ProtocolNotificationType(t.method)})(Ru||(qt.WorkDoneProgressCancelNotification=Ru={}))});var ku=Z(jt=>{"use strict";b();Object.defineProperty(jt,"__esModule",{value:!0});jt.CallHierarchyOutgoingCallsRequest=jt.CallHierarchyIncomingCallsRequest=jt.CallHierarchyPrepareRequest=void 0;var Cn=Re(),Eu;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Cn.MessageDirection.clientToServer,t.type=new Cn.ProtocolRequestType(t.method)})(Eu||(jt.CallHierarchyPrepareRequest=Eu={}));var Su;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Cn.MessageDirection.clientToServer,t.type=new Cn.ProtocolRequestType(t.method)})(Su||(jt.CallHierarchyIncomingCallsRequest=Su={}));var Iu;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Cn.MessageDirection.clientToServer,t.type=new Cn.ProtocolRequestType(t.method)})(Iu||(jt.CallHierarchyOutgoingCallsRequest=Iu={}))});var Du=Z(Je=>{"use strict";b();Object.defineProperty(Je,"__esModule",{value:!0});Je.SemanticTokensRefreshRequest=Je.SemanticTokensRangeRequest=Je.SemanticTokensDeltaRequest=Je.SemanticTokensRequest=Je.SemanticTokensRegistrationType=Je.TokenFormat=void 0;var kt=Re(),Pu;(function(t){t.Relative="relative"})(Pu||(Je.TokenFormat=Pu={}));var rr;(function(t){t.method="textDocument/semanticTokens",t.type=new kt.RegistrationType(t.method)})(rr||(Je.SemanticTokensRegistrationType=rr={}));var Cu;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=kt.MessageDirection.clientToServer,t.type=new kt.ProtocolRequestType(t.method),t.registrationMethod=rr.method})(Cu||(Je.SemanticTokensRequest=Cu={}));var Nu;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=kt.MessageDirection.clientToServer,t.type=new kt.ProtocolRequestType(t.method),t.registrationMethod=rr.method})(Nu||(Je.SemanticTokensDeltaRequest=Nu={}));var Mu;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=kt.MessageDirection.clientToServer,t.type=new kt.ProtocolRequestType(t.method),t.registrationMethod=rr.method})(Mu||(Je.SemanticTokensRangeRequest=Mu={}));var Lu;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=kt.MessageDirection.serverToClient,t.type=new kt.ProtocolRequestType0(t.method)})(Lu||(Je.SemanticTokensRefreshRequest=Lu={}))});var Fu=Z(Fi=>{"use strict";b();Object.defineProperty(Fi,"__esModule",{value:!0});Fi.ShowDocumentRequest=void 0;var Au=Re(),Ou;(function(t){t.method="window/showDocument",t.messageDirection=Au.MessageDirection.serverToClient,t.type=new Au.ProtocolRequestType(t.method)})(Ou||(Fi.ShowDocumentRequest=Ou={}))});var Uu=Z(qi=>{"use strict";b();Object.defineProperty(qi,"__esModule",{value:!0});qi.LinkedEditingRangeRequest=void 0;var qu=Re(),ju;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=qu.MessageDirection.clientToServer,t.type=new qu.ProtocolRequestType(t.method)})(ju||(qi.LinkedEditingRangeRequest=ju={}))});var Gu=Z(Be=>{"use strict";b();Object.defineProperty(Be,"__esModule",{value:!0});Be.WillDeleteFilesRequest=Be.DidDeleteFilesNotification=Be.DidRenameFilesNotification=Be.WillRenameFilesRequest=Be.DidCreateFilesNotification=Be.WillCreateFilesRequest=Be.FileOperationPatternKind=void 0;var st=Re(),Wu;(function(t){t.file="file",t.folder="folder"})(Wu||(Be.FileOperationPatternKind=Wu={}));var Bu;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=st.MessageDirection.clientToServer,t.type=new st.ProtocolRequestType(t.method)})(Bu||(Be.WillCreateFilesRequest=Bu={}));var $u;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=st.MessageDirection.clientToServer,t.type=new st.ProtocolNotificationType(t.method)})($u||(Be.DidCreateFilesNotification=$u={}));var Vu;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=st.MessageDirection.clientToServer,t.type=new st.ProtocolRequestType(t.method)})(Vu||(Be.WillRenameFilesRequest=Vu={}));var zu;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=st.MessageDirection.clientToServer,t.type=new st.ProtocolNotificationType(t.method)})(zu||(Be.DidRenameFilesNotification=zu={}));var Hu;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=st.MessageDirection.clientToServer,t.type=new st.ProtocolNotificationType(t.method)})(Hu||(Be.DidDeleteFilesNotification=Hu={}));var Qu;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=st.MessageDirection.clientToServer,t.type=new st.ProtocolRequestType(t.method)})(Qu||(Be.WillDeleteFilesRequest=Qu={}))});var Yu=Z(Ut=>{"use strict";b();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.MonikerRequest=Ut.MonikerKind=Ut.UniquenessLevel=void 0;var Zu=Re(),Ju;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Ju||(Ut.UniquenessLevel=Ju={}));var Xu;(function(t){t.$import="import",t.$export="export",t.local="local"})(Xu||(Ut.MonikerKind=Xu={}));var Ku;(function(t){t.method="textDocument/moniker",t.messageDirection=Zu.MessageDirection.clientToServer,t.type=new Zu.ProtocolRequestType(t.method)})(Ku||(Ut.MonikerRequest=Ku={}))});var rl=Z(Wt=>{"use strict";b();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.TypeHierarchySubtypesRequest=Wt.TypeHierarchySupertypesRequest=Wt.TypeHierarchyPrepareRequest=void 0;var Nn=Re(),el;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=Nn.MessageDirection.clientToServer,t.type=new Nn.ProtocolRequestType(t.method)})(el||(Wt.TypeHierarchyPrepareRequest=el={}));var tl;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=Nn.MessageDirection.clientToServer,t.type=new Nn.ProtocolRequestType(t.method)})(tl||(Wt.TypeHierarchySupertypesRequest=tl={}));var nl;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=Nn.MessageDirection.clientToServer,t.type=new Nn.ProtocolRequestType(t.method)})(nl||(Wt.TypeHierarchySubtypesRequest=nl={}))});var sl=Z(Mn=>{"use strict";b();Object.defineProperty(Mn,"__esModule",{value:!0});Mn.InlineValueRefreshRequest=Mn.InlineValueRequest=void 0;var ji=Re(),il;(function(t){t.method="textDocument/inlineValue",t.messageDirection=ji.MessageDirection.clientToServer,t.type=new ji.ProtocolRequestType(t.method)})(il||(Mn.InlineValueRequest=il={}));var ol;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=ji.MessageDirection.serverToClient,t.type=new ji.ProtocolRequestType0(t.method)})(ol||(Mn.InlineValueRefreshRequest=ol={}))});var ll=Z(Bt=>{"use strict";b();Object.defineProperty(Bt,"__esModule",{value:!0});Bt.InlayHintRefreshRequest=Bt.InlayHintResolveRequest=Bt.InlayHintRequest=void 0;var Ln=Re(),al;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Ln.MessageDirection.clientToServer,t.type=new Ln.ProtocolRequestType(t.method)})(al||(Bt.InlayHintRequest=al={}));var cl;(function(t){t.method="inlayHint/resolve",t.messageDirection=Ln.MessageDirection.clientToServer,t.type=new Ln.ProtocolRequestType(t.method)})(cl||(Bt.InlayHintResolveRequest=cl={}));var ul;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Ln.MessageDirection.serverToClient,t.type=new Ln.ProtocolRequestType0(t.method)})(ul||(Bt.InlayHintRefreshRequest=ul={}))});var hl=Z(at=>{"use strict";b();Object.defineProperty(at,"__esModule",{value:!0});at.DiagnosticRefreshRequest=at.WorkspaceDiagnosticRequest=at.DocumentDiagnosticRequest=at.DocumentDiagnosticReportKind=at.DiagnosticServerCancellationData=void 0;var pl=nn(),cf=Ii(),Dn=Re(),dl;(function(t){function e(n){let r=n;return r&&cf.boolean(r.retriggerRequest)}o(e,"is"),t.is=e})(dl||(at.DiagnosticServerCancellationData=dl={}));var ml;(function(t){t.Full="full",t.Unchanged="unchanged"})(ml||(at.DocumentDiagnosticReportKind=ml={}));var _l;(function(t){t.method="textDocument/diagnostic",t.messageDirection=Dn.MessageDirection.clientToServer,t.type=new Dn.ProtocolRequestType(t.method),t.partialResult=new pl.ProgressType})(_l||(at.DocumentDiagnosticRequest=_l={}));var fl;(function(t){t.method="workspace/diagnostic",t.messageDirection=Dn.MessageDirection.clientToServer,t.type=new Dn.ProtocolRequestType(t.method),t.partialResult=new pl.ProgressType})(fl||(at.WorkspaceDiagnosticRequest=fl={}));var gl;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=Dn.MessageDirection.serverToClient,t.type=new Dn.ProtocolRequestType0(t.method)})(gl||(at.DiagnosticRefreshRequest=gl={}))});var Tl=Z(Pe=>{"use strict";b();Object.defineProperty(Pe,"__esModule",{value:!0});Pe.DidCloseNotebookDocumentNotification=Pe.DidSaveNotebookDocumentNotification=Pe.DidChangeNotebookDocumentNotification=Pe.NotebookCellArrayChange=Pe.DidOpenNotebookDocumentNotification=Pe.NotebookDocumentSyncRegistrationType=Pe.NotebookDocument=Pe.NotebookCell=Pe.ExecutionSummary=Pe.NotebookCellKind=void 0;var ir=Si(),_t=Ii(),yt=Re(),Xs;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}o(e,"is"),t.is=e})(Xs||(Pe.NotebookCellKind=Xs={}));var Ks;(function(t){function e(s,a){let u={executionOrder:s};return(a===!0||a===!1)&&(u.success=a),u}o(e,"create"),t.create=e;function n(s){let a=s;return _t.objectLiteral(a)&&ir.uinteger.is(a.executionOrder)&&(a.success===void 0||_t.boolean(a.success))}o(n,"is"),t.is=n;function r(s,a){return s===a?!0:s==null||a===null||a===void 0?!1:s.executionOrder===a.executionOrder&&s.success===a.success}o(r,"equals"),t.equals=r})(Ks||(Pe.ExecutionSummary=Ks={}));var Ui;(function(t){function e(a,u){return{kind:a,document:u}}o(e,"create"),t.create=e;function n(a){let u=a;return _t.objectLiteral(u)&&Xs.is(u.kind)&&ir.DocumentUri.is(u.document)&&(u.metadata===void 0||_t.objectLiteral(u.metadata))}o(n,"is"),t.is=n;function r(a,u){let d=new Set;return a.document!==u.document&&d.add("document"),a.kind!==u.kind&&d.add("kind"),a.executionSummary!==u.executionSummary&&d.add("executionSummary"),(a.metadata!==void 0||u.metadata!==void 0)&&!s(a.metadata,u.metadata)&&d.add("metadata"),(a.executionSummary!==void 0||u.executionSummary!==void 0)&&!Ks.equals(a.executionSummary,u.executionSummary)&&d.add("executionSummary"),d}o(r,"diff"),t.diff=r;function s(a,u){if(a===u)return!0;if(a==null||u===null||u===void 0||typeof a!=typeof u||typeof a!="object")return!1;let d=Array.isArray(a),_=Array.isArray(u);if(d!==_)return!1;if(d&&_){if(a.length!==u.length)return!1;for(let p=0;p<a.length;p++)if(!s(a[p],u[p]))return!1}if(_t.objectLiteral(a)&&_t.objectLiteral(u)){let p=Object.keys(a),x=Object.keys(u);if(p.length!==x.length||(p.sort(),x.sort(),!s(p,x)))return!1;for(let P=0;P<p.length;P++){let E=p[P];if(!s(a[E],u[E]))return!1}}return!0}o(s,"equalsMetadata")})(Ui||(Pe.NotebookCell=Ui={}));var yl;(function(t){function e(r,s,a,u){return{uri:r,notebookType:s,version:a,cells:u}}o(e,"create"),t.create=e;function n(r){let s=r;return _t.objectLiteral(s)&&_t.string(s.uri)&&ir.integer.is(s.version)&&_t.typedArray(s.cells,Ui.is)}o(n,"is"),t.is=n})(yl||(Pe.NotebookDocument=yl={}));var An;(function(t){t.method="notebookDocument/sync",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.RegistrationType(t.method)})(An||(Pe.NotebookDocumentSyncRegistrationType=An={}));var bl;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.ProtocolNotificationType(t.method),t.registrationMethod=An.method})(bl||(Pe.DidOpenNotebookDocumentNotification=bl={}));var wl;(function(t){function e(r){let s=r;return _t.objectLiteral(s)&&ir.uinteger.is(s.start)&&ir.uinteger.is(s.deleteCount)&&(s.cells===void 0||_t.typedArray(s.cells,Ui.is))}o(e,"is"),t.is=e;function n(r,s,a){let u={start:r,deleteCount:s};return a!==void 0&&(u.cells=a),u}o(n,"create"),t.create=n})(wl||(Pe.NotebookCellArrayChange=wl={}));var vl;(function(t){t.method="notebookDocument/didChange",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.ProtocolNotificationType(t.method),t.registrationMethod=An.method})(vl||(Pe.DidChangeNotebookDocumentNotification=vl={}));var xl;(function(t){t.method="notebookDocument/didSave",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.ProtocolNotificationType(t.method),t.registrationMethod=An.method})(xl||(Pe.DidSaveNotebookDocumentNotification=xl={}));var Rl;(function(t){t.method="notebookDocument/didClose",t.messageDirection=yt.MessageDirection.clientToServer,t.type=new yt.ProtocolNotificationType(t.method),t.registrationMethod=An.method})(Rl||(Pe.DidCloseNotebookDocumentNotification=Rl={}))});var Il=Z(Wi=>{"use strict";b();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.InlineCompletionRequest=void 0;var El=Re(),Sl;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=El.MessageDirection.clientToServer,t.type=new El.ProtocolRequestType(t.method)})(Sl||(Wi.InlineCompletionRequest=Sl={}))});var Ud=Z(f=>{"use strict";b();Object.defineProperty(f,"__esModule",{value:!0});f.WorkspaceSymbolRequest=f.CodeActionResolveRequest=f.CodeActionRequest=f.DocumentSymbolRequest=f.DocumentHighlightRequest=f.ReferencesRequest=f.DefinitionRequest=f.SignatureHelpRequest=f.SignatureHelpTriggerKind=f.HoverRequest=f.CompletionResolveRequest=f.CompletionRequest=f.CompletionTriggerKind=f.PublishDiagnosticsNotification=f.WatchKind=f.RelativePattern=f.FileChangeType=f.DidChangeWatchedFilesNotification=f.WillSaveTextDocumentWaitUntilRequest=f.WillSaveTextDocumentNotification=f.TextDocumentSaveReason=f.DidSaveTextDocumentNotification=f.DidCloseTextDocumentNotification=f.DidChangeTextDocumentNotification=f.TextDocumentContentChangeEvent=f.DidOpenTextDocumentNotification=f.TextDocumentSyncKind=f.TelemetryEventNotification=f.LogMessageNotification=f.ShowMessageRequest=f.ShowMessageNotification=f.MessageType=f.DidChangeConfigurationNotification=f.ExitNotification=f.ShutdownRequest=f.InitializedNotification=f.InitializeErrorCodes=f.InitializeRequest=f.WorkDoneProgressOptions=f.TextDocumentRegistrationOptions=f.StaticRegistrationOptions=f.PositionEncodingKind=f.FailureHandlingKind=f.ResourceOperationKind=f.UnregistrationRequest=f.RegistrationRequest=f.DocumentSelector=f.NotebookCellTextDocumentFilter=f.NotebookDocumentFilter=f.TextDocumentFilter=void 0;f.MonikerRequest=f.MonikerKind=f.UniquenessLevel=f.WillDeleteFilesRequest=f.DidDeleteFilesNotification=f.WillRenameFilesRequest=f.DidRenameFilesNotification=f.WillCreateFilesRequest=f.DidCreateFilesNotification=f.FileOperationPatternKind=f.LinkedEditingRangeRequest=f.ShowDocumentRequest=f.SemanticTokensRegistrationType=f.SemanticTokensRefreshRequest=f.SemanticTokensRangeRequest=f.SemanticTokensDeltaRequest=f.SemanticTokensRequest=f.TokenFormat=f.CallHierarchyPrepareRequest=f.CallHierarchyOutgoingCallsRequest=f.CallHierarchyIncomingCallsRequest=f.WorkDoneProgressCancelNotification=f.WorkDoneProgressCreateRequest=f.WorkDoneProgress=f.SelectionRangeRequest=f.DeclarationRequest=f.FoldingRangeRefreshRequest=f.FoldingRangeRequest=f.ColorPresentationRequest=f.DocumentColorRequest=f.ConfigurationRequest=f.DidChangeWorkspaceFoldersNotification=f.WorkspaceFoldersRequest=f.TypeDefinitionRequest=f.ImplementationRequest=f.ApplyWorkspaceEditRequest=f.ExecuteCommandRequest=f.PrepareRenameRequest=f.RenameRequest=f.PrepareSupportDefaultBehavior=f.DocumentOnTypeFormattingRequest=f.DocumentRangesFormattingRequest=f.DocumentRangeFormattingRequest=f.DocumentFormattingRequest=f.DocumentLinkResolveRequest=f.DocumentLinkRequest=f.CodeLensRefreshRequest=f.CodeLensResolveRequest=f.CodeLensRequest=f.WorkspaceSymbolResolveRequest=void 0;f.InlineCompletionRequest=f.DidCloseNotebookDocumentNotification=f.DidSaveNotebookDocumentNotification=f.DidChangeNotebookDocumentNotification=f.NotebookCellArrayChange=f.DidOpenNotebookDocumentNotification=f.NotebookDocumentSyncRegistrationType=f.NotebookDocument=f.NotebookCell=f.ExecutionSummary=f.NotebookCellKind=f.DiagnosticRefreshRequest=f.WorkspaceDiagnosticRequest=f.DocumentDiagnosticRequest=f.DocumentDiagnosticReportKind=f.DiagnosticServerCancellationData=f.InlayHintRefreshRequest=f.InlayHintResolveRequest=f.InlayHintRequest=f.InlineValueRefreshRequest=f.InlineValueRequest=f.TypeHierarchySupertypesRequest=f.TypeHierarchySubtypesRequest=f.TypeHierarchyPrepareRequest=void 0;var q=Re(),kl=Si(),Fe=Ii(),uf=Yc();Object.defineProperty(f,"ImplementationRequest",{enumerable:!0,get:o(function(){return uf.ImplementationRequest},"get")});var lf=nu();Object.defineProperty(f,"TypeDefinitionRequest",{enumerable:!0,get:o(function(){return lf.TypeDefinitionRequest},"get")});var Od=ou();Object.defineProperty(f,"WorkspaceFoldersRequest",{enumerable:!0,get:o(function(){return Od.WorkspaceFoldersRequest},"get")});Object.defineProperty(f,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:o(function(){return Od.DidChangeWorkspaceFoldersNotification},"get")});var df=cu();Object.defineProperty(f,"ConfigurationRequest",{enumerable:!0,get:o(function(){return df.ConfigurationRequest},"get")});var Fd=du();Object.defineProperty(f,"DocumentColorRequest",{enumerable:!0,get:o(function(){return Fd.DocumentColorRequest},"get")});Object.defineProperty(f,"ColorPresentationRequest",{enumerable:!0,get:o(function(){return Fd.ColorPresentationRequest},"get")});var qd=fu();Object.defineProperty(f,"FoldingRangeRequest",{enumerable:!0,get:o(function(){return qd.FoldingRangeRequest},"get")});Object.defineProperty(f,"FoldingRangeRefreshRequest",{enumerable:!0,get:o(function(){return qd.FoldingRangeRefreshRequest},"get")});var mf=hu();Object.defineProperty(f,"DeclarationRequest",{enumerable:!0,get:o(function(){return mf.DeclarationRequest},"get")});var _f=wu();Object.defineProperty(f,"SelectionRangeRequest",{enumerable:!0,get:o(function(){return _f.SelectionRangeRequest},"get")});var ra=Tu();Object.defineProperty(f,"WorkDoneProgress",{enumerable:!0,get:o(function(){return ra.WorkDoneProgress},"get")});Object.defineProperty(f,"WorkDoneProgressCreateRequest",{enumerable:!0,get:o(function(){return ra.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(f,"WorkDoneProgressCancelNotification",{enumerable:!0,get:o(function(){return ra.WorkDoneProgressCancelNotification},"get")});var ia=ku();Object.defineProperty(f,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:o(function(){return ia.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(f,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:o(function(){return ia.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(f,"CallHierarchyPrepareRequest",{enumerable:!0,get:o(function(){return ia.CallHierarchyPrepareRequest},"get")});var On=Du();Object.defineProperty(f,"TokenFormat",{enumerable:!0,get:o(function(){return On.TokenFormat},"get")});Object.defineProperty(f,"SemanticTokensRequest",{enumerable:!0,get:o(function(){return On.SemanticTokensRequest},"get")});Object.defineProperty(f,"SemanticTokensDeltaRequest",{enumerable:!0,get:o(function(){return On.SemanticTokensDeltaRequest},"get")});Object.defineProperty(f,"SemanticTokensRangeRequest",{enumerable:!0,get:o(function(){return On.SemanticTokensRangeRequest},"get")});Object.defineProperty(f,"SemanticTokensRefreshRequest",{enumerable:!0,get:o(function(){return On.SemanticTokensRefreshRequest},"get")});Object.defineProperty(f,"SemanticTokensRegistrationType",{enumerable:!0,get:o(function(){return On.SemanticTokensRegistrationType},"get")});var ff=Fu();Object.defineProperty(f,"ShowDocumentRequest",{enumerable:!0,get:o(function(){return ff.ShowDocumentRequest},"get")});var gf=Uu();Object.defineProperty(f,"LinkedEditingRangeRequest",{enumerable:!0,get:o(function(){return gf.LinkedEditingRangeRequest},"get")});var rn=Gu();Object.defineProperty(f,"FileOperationPatternKind",{enumerable:!0,get:o(function(){return rn.FileOperationPatternKind},"get")});Object.defineProperty(f,"DidCreateFilesNotification",{enumerable:!0,get:o(function(){return rn.DidCreateFilesNotification},"get")});Object.defineProperty(f,"WillCreateFilesRequest",{enumerable:!0,get:o(function(){return rn.WillCreateFilesRequest},"get")});Object.defineProperty(f,"DidRenameFilesNotification",{enumerable:!0,get:o(function(){return rn.DidRenameFilesNotification},"get")});Object.defineProperty(f,"WillRenameFilesRequest",{enumerable:!0,get:o(function(){return rn.WillRenameFilesRequest},"get")});Object.defineProperty(f,"DidDeleteFilesNotification",{enumerable:!0,get:o(function(){return rn.DidDeleteFilesNotification},"get")});Object.defineProperty(f,"WillDeleteFilesRequest",{enumerable:!0,get:o(function(){return rn.WillDeleteFilesRequest},"get")});var oa=Yu();Object.defineProperty(f,"UniquenessLevel",{enumerable:!0,get:o(function(){return oa.UniquenessLevel},"get")});Object.defineProperty(f,"MonikerKind",{enumerable:!0,get:o(function(){return oa.MonikerKind},"get")});Object.defineProperty(f,"MonikerRequest",{enumerable:!0,get:o(function(){return oa.MonikerRequest},"get")});var sa=rl();Object.defineProperty(f,"TypeHierarchyPrepareRequest",{enumerable:!0,get:o(function(){return sa.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(f,"TypeHierarchySubtypesRequest",{enumerable:!0,get:o(function(){return sa.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(f,"TypeHierarchySupertypesRequest",{enumerable:!0,get:o(function(){return sa.TypeHierarchySupertypesRequest},"get")});var jd=sl();Object.defineProperty(f,"InlineValueRequest",{enumerable:!0,get:o(function(){return jd.InlineValueRequest},"get")});Object.defineProperty(f,"InlineValueRefreshRequest",{enumerable:!0,get:o(function(){return jd.InlineValueRefreshRequest},"get")});var aa=ll();Object.defineProperty(f,"InlayHintRequest",{enumerable:!0,get:o(function(){return aa.InlayHintRequest},"get")});Object.defineProperty(f,"InlayHintResolveRequest",{enumerable:!0,get:o(function(){return aa.InlayHintResolveRequest},"get")});Object.defineProperty(f,"InlayHintRefreshRequest",{enumerable:!0,get:o(function(){return aa.InlayHintRefreshRequest},"get")});var or=hl();Object.defineProperty(f,"DiagnosticServerCancellationData",{enumerable:!0,get:o(function(){return or.DiagnosticServerCancellationData},"get")});Object.defineProperty(f,"DocumentDiagnosticReportKind",{enumerable:!0,get:o(function(){return or.DocumentDiagnosticReportKind},"get")});Object.defineProperty(f,"DocumentDiagnosticRequest",{enumerable:!0,get:o(function(){return or.DocumentDiagnosticRequest},"get")});Object.defineProperty(f,"WorkspaceDiagnosticRequest",{enumerable:!0,get:o(function(){return or.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(f,"DiagnosticRefreshRequest",{enumerable:!0,get:o(function(){return or.DiagnosticRefreshRequest},"get")});var bt=Tl();Object.defineProperty(f,"NotebookCellKind",{enumerable:!0,get:o(function(){return bt.NotebookCellKind},"get")});Object.defineProperty(f,"ExecutionSummary",{enumerable:!0,get:o(function(){return bt.ExecutionSummary},"get")});Object.defineProperty(f,"NotebookCell",{enumerable:!0,get:o(function(){return bt.NotebookCell},"get")});Object.defineProperty(f,"NotebookDocument",{enumerable:!0,get:o(function(){return bt.NotebookDocument},"get")});Object.defineProperty(f,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:o(function(){return bt.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(f,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:o(function(){return bt.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(f,"NotebookCellArrayChange",{enumerable:!0,get:o(function(){return bt.NotebookCellArrayChange},"get")});Object.defineProperty(f,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:o(function(){return bt.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(f,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:o(function(){return bt.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(f,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:o(function(){return bt.DidCloseNotebookDocumentNotification},"get")});var pf=Il();Object.defineProperty(f,"InlineCompletionRequest",{enumerable:!0,get:o(function(){return pf.InlineCompletionRequest},"get")});var Ys;(function(t){function e(n){let r=n;return Fe.string(r)||Fe.string(r.language)||Fe.string(r.scheme)||Fe.string(r.pattern)}o(e,"is"),t.is=e})(Ys||(f.TextDocumentFilter=Ys={}));var ea;(function(t){function e(n){let r=n;return Fe.objectLiteral(r)&&(Fe.string(r.notebookType)||Fe.string(r.scheme)||Fe.string(r.pattern))}o(e,"is"),t.is=e})(ea||(f.NotebookDocumentFilter=ea={}));var ta;(function(t){function e(n){let r=n;return Fe.objectLiteral(r)&&(Fe.string(r.notebook)||ea.is(r.notebook))&&(r.language===void 0||Fe.string(r.language))}o(e,"is"),t.is=e})(ta||(f.NotebookCellTextDocumentFilter=ta={}));var na;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Fe.string(r)&&!Ys.is(r)&&!ta.is(r))return!1;return!0}o(e,"is"),t.is=e})(na||(f.DocumentSelector=na={}));var Pl;(function(t){t.method="client/registerCapability",t.messageDirection=q.MessageDirection.serverToClient,t.type=new q.ProtocolRequestType(t.method)})(Pl||(f.RegistrationRequest=Pl={}));var Cl;(function(t){t.method="client/unregisterCapability",t.messageDirection=q.MessageDirection.serverToClient,t.type=new q.ProtocolRequestType(t.method)})(Cl||(f.UnregistrationRequest=Cl={}));var Nl;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Nl||(f.ResourceOperationKind=Nl={}));var Ml;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Ml||(f.FailureHandlingKind=Ml={}));var Ll;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Ll||(f.PositionEncodingKind=Ll={}));var Dl;(function(t){function e(n){let r=n;return r&&Fe.string(r.id)&&r.id.length>0}o(e,"hasId"),t.hasId=e})(Dl||(f.StaticRegistrationOptions=Dl={}));var Al;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||na.is(r.documentSelector))}o(e,"is"),t.is=e})(Al||(f.TextDocumentRegistrationOptions=Al={}));var Ol;(function(t){function e(r){let s=r;return Fe.objectLiteral(s)&&(s.workDoneProgress===void 0||Fe.boolean(s.workDoneProgress))}o(e,"is"),t.is=e;function n(r){let s=r;return s&&Fe.boolean(s.workDoneProgress)}o(n,"hasWorkDoneProgress"),t.hasWorkDoneProgress=n})(Ol||(f.WorkDoneProgressOptions=Ol={}));var Fl;(function(t){t.method="initialize",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Fl||(f.InitializeRequest=Fl={}));var ql;(function(t){t.unknownProtocolVersion=1})(ql||(f.InitializeErrorCodes=ql={}));var jl;(function(t){t.method="initialized",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolNotificationType(t.method)})(jl||(f.InitializedNotification=jl={}));var Ul;(function(t){t.method="shutdown",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType0(t.method)})(Ul||(f.ShutdownRequest=Ul={}));var Wl;(function(t){t.method="exit",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolNotificationType0(t.method)})(Wl||(f.ExitNotification=Wl={}));var Bl;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolNotificationType(t.method)})(Bl||(f.DidChangeConfigurationNotification=Bl={}));var $l;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})($l||(f.MessageType=$l={}));var Vl;(function(t){t.method="window/showMessage",t.messageDirection=q.MessageDirection.serverToClient,t.type=new q.ProtocolNotificationType(t.method)})(Vl||(f.ShowMessageNotification=Vl={}));var zl;(function(t){t.method="window/showMessageRequest",t.messageDirection=q.MessageDirection.serverToClient,t.type=new q.ProtocolRequestType(t.method)})(zl||(f.ShowMessageRequest=zl={}));var Hl;(function(t){t.method="window/logMessage",t.messageDirection=q.MessageDirection.serverToClient,t.type=new q.ProtocolNotificationType(t.method)})(Hl||(f.LogMessageNotification=Hl={}));var Ql;(function(t){t.method="telemetry/event",t.messageDirection=q.MessageDirection.serverToClient,t.type=new q.ProtocolNotificationType(t.method)})(Ql||(f.TelemetryEventNotification=Ql={}));var Gl;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Gl||(f.TextDocumentSyncKind=Gl={}));var Zl;(function(t){t.method="textDocument/didOpen",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolNotificationType(t.method)})(Zl||(f.DidOpenTextDocumentNotification=Zl={}));var Jl;(function(t){function e(r){let s=r;return s!=null&&typeof s.text=="string"&&s.range!==void 0&&(s.rangeLength===void 0||typeof s.rangeLength=="number")}o(e,"isIncremental"),t.isIncremental=e;function n(r){let s=r;return s!=null&&typeof s.text=="string"&&s.range===void 0&&s.rangeLength===void 0}o(n,"isFull"),t.isFull=n})(Jl||(f.TextDocumentContentChangeEvent=Jl={}));var Xl;(function(t){t.method="textDocument/didChange",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolNotificationType(t.method)})(Xl||(f.DidChangeTextDocumentNotification=Xl={}));var Kl;(function(t){t.method="textDocument/didClose",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolNotificationType(t.method)})(Kl||(f.DidCloseTextDocumentNotification=Kl={}));var Yl;(function(t){t.method="textDocument/didSave",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolNotificationType(t.method)})(Yl||(f.DidSaveTextDocumentNotification=Yl={}));var ed;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(ed||(f.TextDocumentSaveReason=ed={}));var td;(function(t){t.method="textDocument/willSave",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolNotificationType(t.method)})(td||(f.WillSaveTextDocumentNotification=td={}));var nd;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(nd||(f.WillSaveTextDocumentWaitUntilRequest=nd={}));var rd;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolNotificationType(t.method)})(rd||(f.DidChangeWatchedFilesNotification=rd={}));var id;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(id||(f.FileChangeType=id={}));var od;(function(t){function e(n){let r=n;return Fe.objectLiteral(r)&&(kl.URI.is(r.baseUri)||kl.WorkspaceFolder.is(r.baseUri))&&Fe.string(r.pattern)}o(e,"is"),t.is=e})(od||(f.RelativePattern=od={}));var sd;(function(t){t.Create=1,t.Change=2,t.Delete=4})(sd||(f.WatchKind=sd={}));var ad;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=q.MessageDirection.serverToClient,t.type=new q.ProtocolNotificationType(t.method)})(ad||(f.PublishDiagnosticsNotification=ad={}));var cd;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(cd||(f.CompletionTriggerKind=cd={}));var ud;(function(t){t.method="textDocument/completion",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(ud||(f.CompletionRequest=ud={}));var ld;(function(t){t.method="completionItem/resolve",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(ld||(f.CompletionResolveRequest=ld={}));var dd;(function(t){t.method="textDocument/hover",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(dd||(f.HoverRequest=dd={}));var md;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(md||(f.SignatureHelpTriggerKind=md={}));var _d;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(_d||(f.SignatureHelpRequest=_d={}));var fd;(function(t){t.method="textDocument/definition",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(fd||(f.DefinitionRequest=fd={}));var gd;(function(t){t.method="textDocument/references",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(gd||(f.ReferencesRequest=gd={}));var pd;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(pd||(f.DocumentHighlightRequest=pd={}));var hd;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(hd||(f.DocumentSymbolRequest=hd={}));var yd;(function(t){t.method="textDocument/codeAction",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(yd||(f.CodeActionRequest=yd={}));var bd;(function(t){t.method="codeAction/resolve",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(bd||(f.CodeActionResolveRequest=bd={}));var wd;(function(t){t.method="workspace/symbol",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(wd||(f.WorkspaceSymbolRequest=wd={}));var vd;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(vd||(f.WorkspaceSymbolResolveRequest=vd={}));var xd;(function(t){t.method="textDocument/codeLens",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(xd||(f.CodeLensRequest=xd={}));var Rd;(function(t){t.method="codeLens/resolve",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Rd||(f.CodeLensResolveRequest=Rd={}));var Td;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=q.MessageDirection.serverToClient,t.type=new q.ProtocolRequestType0(t.method)})(Td||(f.CodeLensRefreshRequest=Td={}));var Ed;(function(t){t.method="textDocument/documentLink",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Ed||(f.DocumentLinkRequest=Ed={}));var Sd;(function(t){t.method="documentLink/resolve",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Sd||(f.DocumentLinkResolveRequest=Sd={}));var Id;(function(t){t.method="textDocument/formatting",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Id||(f.DocumentFormattingRequest=Id={}));var kd;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(kd||(f.DocumentRangeFormattingRequest=kd={}));var Pd;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Pd||(f.DocumentRangesFormattingRequest=Pd={}));var Cd;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Cd||(f.DocumentOnTypeFormattingRequest=Cd={}));var Nd;(function(t){t.Identifier=1})(Nd||(f.PrepareSupportDefaultBehavior=Nd={}));var Md;(function(t){t.method="textDocument/rename",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Md||(f.RenameRequest=Md={}));var Ld;(function(t){t.method="textDocument/prepareRename",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Ld||(f.PrepareRenameRequest=Ld={}));var Dd;(function(t){t.method="workspace/executeCommand",t.messageDirection=q.MessageDirection.clientToServer,t.type=new q.ProtocolRequestType(t.method)})(Dd||(f.ExecuteCommandRequest=Dd={}));var Ad;(function(t){t.method="workspace/applyEdit",t.messageDirection=q.MessageDirection.serverToClient,t.type=new q.ProtocolRequestType("workspace/applyEdit")})(Ad||(f.ApplyWorkspaceEditRequest=Ad={}))});var Bd=Z(Bi=>{"use strict";b();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.createProtocolConnection=void 0;var Wd=nn();function hf(t,e,n,r){return Wd.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Wd.createMessageConnection)(t,e,n,r)}o(hf,"createProtocolConnection");Bi.createProtocolConnection=hf});var Vd=Z(Xe=>{"use strict";b();var yf=Xe&&Xe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:o(function(){return e[n]},"get")}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),$i=Xe&&Xe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&yf(e,t,n)};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.LSPErrorCodes=Xe.createProtocolConnection=void 0;$i(nn(),Xe);$i(Si(),Xe);$i(Re(),Xe);$i(Ud(),Xe);var bf=Bd();Object.defineProperty(Xe,"createProtocolConnection",{enumerable:!0,get:o(function(){return bf.createProtocolConnection},"get")});var $d;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})($d||(Xe.LSPErrorCodes=$d={}))});var Hd=Z(wt=>{"use strict";b();var wf=wt&&wt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:o(function(){return e[n]},"get")}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),zd=wt&&wt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&wf(e,t,n)};Object.defineProperty(wt,"__esModule",{value:!0});wt.createProtocolConnection=void 0;var vf=zs();zd(zs(),wt);zd(Vd(),wt);function xf(t,e,n,r){return(0,vf.createMessageConnection)(t,e,n,r)}o(xf,"createProtocolConnection");wt.createProtocolConnection=xf});var Ef={};tm(Ef,{IndexWorker:()=>zi,isIndexWorker:()=>Rf,runIndexWorker:()=>Tf});module.exports=nm(Ef);b();b();b();var zt={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};b();b();var fa=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],ga={".php":[".blade"]},pa=Object.keys(zt).flatMap(t=>zt[t].extensions);b();var ba=require("os"),Qi=require("path");b();var ha;(()=>{"use strict";var t={975:F=>{function R(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}o(R,"e");function W(T,k){for(var I,U="",$=0,O=-1,X=0,Y=0;Y<=T.length;++Y){if(Y<T.length)I=T.charCodeAt(Y);else{if(I===47)break;I=47}if(I===47){if(!(O===Y-1||X===1))if(O!==Y-1&&X===2){if(U.length<2||$!==2||U.charCodeAt(U.length-1)!==46||U.charCodeAt(U.length-2)!==46){if(U.length>2){var Ce=U.lastIndexOf("/");if(Ce!==U.length-1){Ce===-1?(U="",$=0):$=(U=U.slice(0,Ce)).length-1-U.lastIndexOf("/"),O=Y,X=0;continue}}else if(U.length===2||U.length===1){U="",$=0,O=Y,X=0;continue}}k&&(U.length>0?U+="/..":U="..",$=2)}else U.length>0?U+="/"+T.slice(O+1,Y):U=T.slice(O+1,Y),$=Y-O-1;O=Y,X=0}else I===46&&X!==-1?++X:X=-1}return U}o(W,"r");var D={resolve:o(function(){for(var T,k="",I=!1,U=arguments.length-1;U>=-1&&!I;U--){var $;U>=0?$=arguments[U]:(T===void 0&&(T=process.cwd()),$=T),R($),$.length!==0&&(k=$+"/"+k,I=$.charCodeAt(0)===47)}return k=W(k,!I),I?k.length>0?"/"+k:"/":k.length>0?k:"."},"resolve"),normalize:o(function(T){if(R(T),T.length===0)return".";var k=T.charCodeAt(0)===47,I=T.charCodeAt(T.length-1)===47;return(T=W(T,!k)).length!==0||k||(T="."),T.length>0&&I&&(T+="/"),k?"/"+T:T},"normalize"),isAbsolute:o(function(T){return R(T),T.length>0&&T.charCodeAt(0)===47},"isAbsolute"),join:o(function(){if(arguments.length===0)return".";for(var T,k=0;k<arguments.length;++k){var I=arguments[k];R(I),I.length>0&&(T===void 0?T=I:T+="/"+I)}return T===void 0?".":D.normalize(T)},"join"),relative:o(function(T,k){if(R(T),R(k),T===k||(T=D.resolve(T))===(k=D.resolve(k)))return"";for(var I=1;I<T.length&&T.charCodeAt(I)===47;++I);for(var U=T.length,$=U-I,O=1;O<k.length&&k.charCodeAt(O)===47;++O);for(var X=k.length-O,Y=$<X?$:X,Ce=-1,de=0;de<=Y;++de){if(de===Y){if(X>Y){if(k.charCodeAt(O+de)===47)return k.slice(O+de+1);if(de===0)return k.slice(O+de)}else $>Y&&(T.charCodeAt(I+de)===47?Ce=de:de===0&&(Ce=0));break}var He=T.charCodeAt(I+de);if(He!==k.charCodeAt(O+de))break;He===47&&(Ce=de)}var ft="";for(de=I+Ce+1;de<=U;++de)de!==U&&T.charCodeAt(de)!==47||(ft.length===0?ft+="..":ft+="/..");return ft.length>0?ft+k.slice(O+Ce):(O+=Ce,k.charCodeAt(O)===47&&++O,k.slice(O))},"relative"),_makeLong:o(function(T){return T},"_makeLong"),dirname:o(function(T){if(R(T),T.length===0)return".";for(var k=T.charCodeAt(0),I=k===47,U=-1,$=!0,O=T.length-1;O>=1;--O)if((k=T.charCodeAt(O))===47){if(!$){U=O;break}}else $=!1;return U===-1?I?"/":".":I&&U===1?"//":T.slice(0,U)},"dirname"),basename:o(function(T,k){if(k!==void 0&&typeof k!="string")throw new TypeError('"ext" argument must be a string');R(T);var I,U=0,$=-1,O=!0;if(k!==void 0&&k.length>0&&k.length<=T.length){if(k.length===T.length&&k===T)return"";var X=k.length-1,Y=-1;for(I=T.length-1;I>=0;--I){var Ce=T.charCodeAt(I);if(Ce===47){if(!O){U=I+1;break}}else Y===-1&&(O=!1,Y=I+1),X>=0&&(Ce===k.charCodeAt(X)?--X==-1&&($=I):(X=-1,$=Y))}return U===$?$=Y:$===-1&&($=T.length),T.slice(U,$)}for(I=T.length-1;I>=0;--I)if(T.charCodeAt(I)===47){if(!O){U=I+1;break}}else $===-1&&(O=!1,$=I+1);return $===-1?"":T.slice(U,$)},"basename"),extname:o(function(T){R(T);for(var k=-1,I=0,U=-1,$=!0,O=0,X=T.length-1;X>=0;--X){var Y=T.charCodeAt(X);if(Y!==47)U===-1&&($=!1,U=X+1),Y===46?k===-1?k=X:O!==1&&(O=1):k!==-1&&(O=-1);else if(!$){I=X+1;break}}return k===-1||U===-1||O===0||O===1&&k===U-1&&k===I+1?"":T.slice(k,U)},"extname"),format:o(function(T){if(T===null||typeof T!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof T);return function(k,I){var U=I.dir||I.root,$=I.base||(I.name||"")+(I.ext||"");return U?U===I.root?U+$:U+"/"+$:$}(0,T)},"format"),parse:o(function(T){R(T);var k={root:"",dir:"",base:"",ext:"",name:""};if(T.length===0)return k;var I,U=T.charCodeAt(0),$=U===47;$?(k.root="/",I=1):I=0;for(var O=-1,X=0,Y=-1,Ce=!0,de=T.length-1,He=0;de>=I;--de)if((U=T.charCodeAt(de))!==47)Y===-1&&(Ce=!1,Y=de+1),U===46?O===-1?O=de:He!==1&&(He=1):O!==-1&&(He=-1);else if(!Ce){X=de+1;break}return O===-1||Y===-1||He===0||He===1&&O===Y-1&&O===X+1?Y!==-1&&(k.base=k.name=X===0&&$?T.slice(1,Y):T.slice(X,Y)):(X===0&&$?(k.name=T.slice(1,O),k.base=T.slice(1,Y)):(k.name=T.slice(X,O),k.base=T.slice(X,Y)),k.ext=T.slice(O,Y)),X>0?k.dir=T.slice(0,X-1):$&&(k.dir="/"),k},"parse"),sep:"/",delimiter:":",win32:null,posix:null};D.posix=D,F.exports=D}},e={};function n(F){var R=e[F];if(R!==void 0)return R.exports;var W=e[F]={exports:{}};return t[F](W,W.exports,n),W.exports}o(n,"r"),n.d=(F,R)=>{for(var W in R)n.o(R,W)&&!n.o(F,W)&&Object.defineProperty(F,W,{enumerable:!0,get:R[W]})},n.o=(F,R)=>Object.prototype.hasOwnProperty.call(F,R),n.r=F=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})};var r={};let s;n.r(r),n.d(r,{URI:o(()=>E,"URI"),Utils:o(()=>Te,"Utils")}),typeof process=="object"?s=process.platform==="win32":typeof navigator=="object"&&(s=navigator.userAgent.indexOf("Windows")>=0);let a=/^\w[\w\d+.-]*$/,u=/^\//,d=/^\/\//;function _(F,R){if(!F.scheme&&R)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${F.authority}", path: "${F.path}", query: "${F.query}", fragment: "${F.fragment}"}`);if(F.scheme&&!a.test(F.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(F.path){if(F.authority){if(!u.test(F.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(d.test(F.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}o(_,"a");let p="",x="/",P=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class E{static{o(this,"l")}static isUri(R){return R instanceof E||!!R&&typeof R.authority=="string"&&typeof R.fragment=="string"&&typeof R.path=="string"&&typeof R.query=="string"&&typeof R.scheme=="string"&&typeof R.fsPath=="string"&&typeof R.with=="function"&&typeof R.toString=="function"}scheme;authority;path;query;fragment;constructor(R,W,D,T,k,I=!1){typeof R=="object"?(this.scheme=R.scheme||p,this.authority=R.authority||p,this.path=R.path||p,this.query=R.query||p,this.fragment=R.fragment||p):(this.scheme=function(U,$){return U||$?U:"file"}(R,I),this.authority=W||p,this.path=function(U,$){switch(U){case"https":case"http":case"file":$?$[0]!==x&&($=x+$):$=x}return $}(this.scheme,D||p),this.query=T||p,this.fragment=k||p,_(this,I))}get fsPath(){return L(this,!1)}with(R){if(!R)return this;let{scheme:W,authority:D,path:T,query:k,fragment:I}=R;return W===void 0?W=this.scheme:W===null&&(W=p),D===void 0?D=this.authority:D===null&&(D=p),T===void 0?T=this.path:T===null&&(T=p),k===void 0?k=this.query:k===null&&(k=p),I===void 0?I=this.fragment:I===null&&(I=p),W===this.scheme&&D===this.authority&&T===this.path&&k===this.query&&I===this.fragment?this:new V(W,D,T,k,I)}static parse(R,W=!1){let D=P.exec(R);return D?new V(D[2]||p,be(D[4]||p),be(D[5]||p),be(D[7]||p),be(D[9]||p),W):new V(p,p,p,p,p)}static file(R){let W=p;if(s&&(R=R.replace(/\\/g,x)),R[0]===x&&R[1]===x){let D=R.indexOf(x,2);D===-1?(W=R.substring(2),R=x):(W=R.substring(2,D),R=R.substring(D)||x)}return new V("file",W,R,p,p)}static from(R){let W=new V(R.scheme,R.authority,R.path,R.query,R.fragment);return _(W,!0),W}toString(R=!1){return G(this,R)}toJSON(){return this}static revive(R){if(R){if(R instanceof E)return R;{let W=new V(R);return W._formatted=R.external,W._fsPath=R._sep===A?R.fsPath:null,W}}return R}}let A=s?1:void 0;class V extends E{static{o(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=L(this,!1)),this._fsPath}toString(R=!1){return R?G(this,!0):(this._formatted||(this._formatted=G(this,!1)),this._formatted)}toJSON(){let R={$mid:1};return this._fsPath&&(R.fsPath=this._fsPath,R._sep=A),this._formatted&&(R.external=this._formatted),this.path&&(R.path=this.path),this.scheme&&(R.scheme=this.scheme),this.authority&&(R.authority=this.authority),this.query&&(R.query=this.query),this.fragment&&(R.fragment=this.fragment),R}}let j={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Q(F,R,W){let D,T=-1;for(let k=0;k<F.length;k++){let I=F.charCodeAt(k);if(I>=97&&I<=122||I>=65&&I<=90||I>=48&&I<=57||I===45||I===46||I===95||I===126||R&&I===47||W&&I===91||W&&I===93||W&&I===58)T!==-1&&(D+=encodeURIComponent(F.substring(T,k)),T=-1),D!==void 0&&(D+=F.charAt(k));else{D===void 0&&(D=F.substr(0,k));let U=j[I];U!==void 0?(T!==-1&&(D+=encodeURIComponent(F.substring(T,k)),T=-1),D+=U):T===-1&&(T=k)}}return T!==-1&&(D+=encodeURIComponent(F.substring(T))),D!==void 0?D:F}o(Q,"m");function z(F){let R;for(let W=0;W<F.length;W++){let D=F.charCodeAt(W);D===35||D===63?(R===void 0&&(R=F.substr(0,W)),R+=j[D]):R!==void 0&&(R+=F[W])}return R!==void 0?R:F}o(z,"y");function L(F,R){let W;return W=F.authority&&F.path.length>1&&F.scheme==="file"?`//${F.authority}${F.path}`:F.path.charCodeAt(0)===47&&(F.path.charCodeAt(1)>=65&&F.path.charCodeAt(1)<=90||F.path.charCodeAt(1)>=97&&F.path.charCodeAt(1)<=122)&&F.path.charCodeAt(2)===58?R?F.path.substr(1):F.path[1].toLowerCase()+F.path.substr(2):F.path,s&&(W=W.replace(/\//g,"\\")),W}o(L,"v");function G(F,R){let W=R?z:Q,D="",{scheme:T,authority:k,path:I,query:U,fragment:$}=F;if(T&&(D+=T,D+=":"),(k||T==="file")&&(D+=x,D+=x),k){let O=k.indexOf("@");if(O!==-1){let X=k.substr(0,O);k=k.substr(O+1),O=X.lastIndexOf(":"),O===-1?D+=W(X,!1,!1):(D+=W(X.substr(0,O),!1,!1),D+=":",D+=W(X.substr(O+1),!1,!0)),D+="@"}k=k.toLowerCase(),O=k.lastIndexOf(":"),O===-1?D+=W(k,!1,!0):(D+=W(k.substr(0,O),!1,!0),D+=k.substr(O))}if(I){if(I.length>=3&&I.charCodeAt(0)===47&&I.charCodeAt(2)===58){let O=I.charCodeAt(1);O>=65&&O<=90&&(I=`/${String.fromCharCode(O+32)}:${I.substr(3)}`)}else if(I.length>=2&&I.charCodeAt(1)===58){let O=I.charCodeAt(0);O>=65&&O<=90&&(I=`${String.fromCharCode(O+32)}:${I.substr(2)}`)}D+=W(I,!0,!1)}return U&&(D+="?",D+=W(U,!1,!1)),$&&(D+="#",D+=R?$:Q($,!1,!1)),D}o(G,"b");function ie(F){try{return decodeURIComponent(F)}catch{return F.length>3?F.substr(0,3)+ie(F.substr(3)):F}}o(ie,"C");let re=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function be(F){return F.match(re)?F.replace(re,R=>ie(R)):F}o(be,"w");var ee=n(975);let le=ee.posix||ee,Se="/";var Te;(function(F){F.joinPath=function(R,...W){return R.with({path:le.join(R.path,...W)})},F.resolvePath=function(R,...W){let D=R.path,T=!1;D[0]!==Se&&(D=Se+D,T=!0);let k=le.resolve(D,...W);return T&&k[0]===Se&&!R.authority&&(k=k.substring(1)),R.with({path:k})},F.dirname=function(R){if(R.path.length===0||R.path===Se)return R;let W=le.dirname(R.path);return W.length===1&&W.charCodeAt(0)===46&&(W=""),R.with({path:W})},F.basename=function(R){return le.basename(R.path)},F.extname=function(R){return le.extname(R.path)}})(Te||(Te={})),ha=r})();var{URI:Hi,Utils:rm}=ha;function wa(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+wa(t.substring(3)):t}}o(wa,"decodeURIComponentGraceful");var ya=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function im(t){return t.match(ya)?t.replace(ya,e=>wa(e)):t}o(im,"percentDecode");function om(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Hi.parse(e[1]+e[2],!0):Hi.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}o(om,"parseUri");var sm=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function Nt(t){let e=om(t);if(!sm.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,ba.platform)()==="win32"){let n=e.path;return e.authority?n=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(n)&&(n=n.substring(1)),(0,Qi.normalize)(n)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}o(Nt,"fsPath");function yr(t){try{return Nt(t)}catch{return}}o(yr,"getFsPath");function va(t){return im((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}o(va,"basename");var Gi=Ct(require("node:path"));var ln=class{constructor(e,n,r){this.languageId=e;this.isGuess=n;this.fileExtension=r}static{o(this,"Language")}},Wn=class{static{o(this,"LanguageDetection")}},Zi=new Map,un=new Map;for(let[t,{extensions:e,filenames:n}]of Object.entries(zt)){for(let r of e)Zi.set(r,[...Zi.get(r)??[],t]);for(let r of n??[])un.set(r,[...un.get(r)??[],t])}var Ji=class extends Wn{static{o(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let n=va(e.uri),r=Gi.extname(n).toLowerCase(),s=this.extensionWithoutTemplateLanguage(n,r),a=this.detectLanguageId(n,s),u=this.computeFullyQualifiedExtension(r,s);return a?new ln(a.languageId,a.isGuess,u):new ln(e.languageId,!0,u)}extensionWithoutTemplateLanguage(e,n){if(fa.includes(n)){let r=e.substring(0,e.lastIndexOf(".")),s=Gi.extname(r).toLowerCase();if(s.length>0&&pa.includes(s)&&this.isExtensionValidForTemplateLanguage(n,s))return s}return n}isExtensionValidForTemplateLanguage(e,n){let r=ga[e];return!r||r.includes(n)}detectLanguageId(e,n){if(un.has(e))return{languageId:un.get(e)[0],isGuess:!1};let r=Zi.get(n)??[];if(r.length>0)return{languageId:r[0],isGuess:r.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),un.has(e))return{languageId:un.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,n){return e!==n?n+e:e}},Xi=class extends Wn{constructor(n){super();this.delegate=n}static{o(this,"GroupingLanguageDetection")}detectLanguage(n){let r=this.delegate.detectLanguage(n),s=r.languageId;return s==="c"||s==="cpp"?new ln("cpp",r.isGuess,r.fileExtension):r}},Ki=class extends Wn{constructor(n){super();this.delegate=n}static{o(this,"ClientProvidedLanguageDetection")}detectLanguage(n){return n.uri.startsWith("untitled:")||n.uri.startsWith("vscode-notebook-cell:")?new ln(n.languageId,!0,""):this.delegate.detectLanguage(n)}},$f=new Xi(new Ki(new Ji));b();b();b();b();function Tt(t){if(t.isCancellationRequested)throw new Yi}o(Tt,"throwIfCancellationRequested");var Yi=class extends Error{static{o(this,"CancellationError")}constructor(){super(am),this.name=this.message}},am="Canceled",br=class{constructor(){this.items=[]}static{o(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};b();b();var dn=class extends Error{constructor(n,r){super(n,{cause:r});this.code="CopilotPromptLoadFailure"}static{o(this,"CopilotPromptLoadFailure")}};b();var xa=Ct(require("node:fs/promises")),wr=Ct(require("node:path"));async function vr(t){return await xa.readFile(eo(t))}o(vr,"readFile");function eo(t){return wr.default.resolve(wr.default.extname(__filename)!==".ts"?__dirname:wr.default.resolve(__dirname,"../../dist"),t)}o(eo,"locateFile");var xr=Ct(Ra());var Ta={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c-sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function cm(t){if(!(t in Ta))throw new Error(`Unrecognized language: ${t}`);return Ta[t]}o(cm,"languageIdToWasmLanguage");var to=new Map;async function um(t){let e;try{e=await vr(`tree-sitter-${t}.wasm`)}catch(n){throw n instanceof Error&&"code"in n&&typeof n.code=="string"&&n.name==="Error"?new dn(`Could not load tree-sitter-${t}.wasm`,n):n}return xr.default.Language.load(e)}o(um,"loadWasmLanguage");function lm(t){let e=cm(t);if(!to.has(e)){let n=um(e);to.set(e,n)}return to.get(e)}o(lm,"getLanguage");var no=class extends Error{static{o(this,"WrappedError")}constructor(e,n){super(e,{cause:n})}};async function Ea(t,e){return(await dm(t,e))[0]}o(Ea,"parseTreeSitter");async function dm(t,e){await xr.default.init({locateFile:o(a=>eo(a),"locateFile")});let n;try{n=new xr.default}catch(a){throw a&&typeof a=="object"&&"message"in a&&typeof a.message=="string"&&a.message.includes("table index is out of bounds")?new no(`Could not init Parse for language <${t}>`,a):a}let r=await lm(t);n.setLanguage(r);let s=n.parse(e);return n.delete(),[s,r.version]}o(dm,"parseTreeSitterIncludingVersion");function Ht(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}o(Ht,"isTypeDefinition");var he=class t{static{o(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,n){this.start=e,this.length=n}static fromBounds(e,n){return new t(e,n-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,n){let r=[],s=this.start;for(s=Ia(e,e.length,s),Sa(r,n);s<this.end;)e[s]!=="\r"&&e[s]!==`
`?r.push(e[s++]):e[s]==="\r"&&s<e.length&&e[s+1]!==`
`||e[s]===`
`?(r.push(`
`),s=Ia(e,e.length,++s),Sa(r,n)):s++;return r.join("")}};function Sa(t,e){for(let n=0;n<e;n++)t.push(" ")}o(Sa,"appendIndent");function Ia(t,e,n){for(;n<e&&(t[n]===" "||t[n]==="	");)n++;return n}o(Ia,"consumeIndent");var nt=class{constructor(e,n,r,s,a,u,d,_,p){this.fileName=e;this.fullyQualifiedName=n;this.unqualifiedName=r;this.commentRange=s;this.nameRange=a;this.bodyRange=u;this.extentRange=d;this.kind=_;this.refKind=p;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{o(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Ne=class t{constructor(){this.queriesCache=new Map}static{o(this,"SymbolExtractorBase")}async findMatches(e,n){let r=await Ea(this.languageId,e),s=r.getLanguage(),u=this.getOrCreateQuery(s,n).matches(r.rootNode);return{tree:r,matches:u}}async executeQuery(e,n,r){let s;try{s=await this.findMatches(n,r);let a=new br,u=[];for(let d of s.matches){let _=this.createSymbolRange(a,e,n,d.captures);_&&u.push(_)}return u}catch{return[]}finally{s?.tree.delete()}}getOrCreateQuery(e,n){let r=this.queriesCache.get(n);return r||(r=e.query(n),this.queriesCache.set(n,r)),r}createSymbolRange(e,n,r,s){let a=0,u=0,d=0,_=0,p=0,x=0,P=0,E=0,A=null,V=null;for(let z=0;z<s.length;z++){let L=s[z].name;L==="name"?(p=s[z].node.startIndex,x=s[z].node.endIndex):L==="reference"?(p=s[z].node.startIndex,x=s[z].node.endIndex,d=s[z].node.startIndex,_=s[z].node.endIndex,A=L):L==="body"?(P=s[z].node.startIndex,E=s[z].node.endIndex):L==="comment"?(a=a===0?s[z].node.startIndex:Math.min(a,s[z].node.startIndex),u=Math.max(u,s[z].node.endIndex)):L==="receiver"?V=he.fromBounds(s[z].node.startIndex,s[z].node.endIndex).getText(r):(d=s[z].node.startIndex,_=s[z].node.endIndex,A=L)}A==="definition.module.filescoped"&&(E=r.length,_=E);let j=he.fromBounds(d,_),Q=d>0||_>0||p>0||x>0?new nt(n,"","",he.fromBounds(a,u),he.fromBounds(p,x),he.fromBounds(P,E),j,t.kindFromString(A),0):null;if(Q){t.updateScopesForSymbol(e,Q);let z=Q.nameRange.getText(r),L=this.createNameFromScopes(r,e.toArray());return L=V?`${V}.${L}`:L,new nt(n,L,z.substring(z.lastIndexOf(".")+1),Q.commentRange,Q.nameRange,Q.bodyRange,Q.extentRange,Q.kind,0)}return null}static updateScopesForSymbol(e,n){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(n.extentRange);)e.pop();e.push(n)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var Rr=class extends Ne{static{o(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,n){return this.executeQuery(e,n,mm)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},Tr=class extends Ne{static{o(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,fm)}async extractLocalReferences(e,n,r){let s=await this.executeQuery(e,n,gm),a=s.filter(_=>_.kind!==9),u=s.filter(_=>_.kind===9&&_.extentRange.containsRange(r)),d=[];for(let _ of u)d.push(...a.filter(p=>_.extentRange.containsRange(p.extentRange)));return d}},Er=class extends Ne{static{o(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){let r=await this.findMatches(n,_m),s=new Set;try{r.matches.forEach(a=>{let u,d,_;for(let p of a.captures)p.name==="import.name"?u=p:p.name==="alias"?d=p:p.name==="import"&&(_=p);if(u&&_){let p=this.cleanQuotedString(u.node.text),x=u.node.startIndex+1,P=u.node.endIndex-1,E=d?new he(d.node.startIndex,d.node.endIndex-d.node.startIndex):new he(x,P-x),A=new he(_.node.startIndex,_.node.endIndex-_.node.startIndex),V=he.empty,j=he.empty,Q=p.substring(p.lastIndexOf("/")+1);s.add(new nt(e,p,Q,V,E,j,A,17,0))}})}finally{r.tree.delete()}return s.size>0?[...s]:[]}},mm=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,_m=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,fm=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,gm=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;b();var Ir=class extends Ne{static{o(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,n){return this.executeQuery(e,n,pm)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},kr=class extends Ne{static{o(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,ym)}async extractLocalReferences(e,n,r){let s=await this.executeQuery(e,n,bm),a=s.filter(_=>_.kind!==9),u=s.filter(_=>_.kind===9&&_.extentRange.containsRange(r)),d=[];for(let _ of u)d.push(...a.filter(p=>_.extentRange.containsRange(p.extentRange)));return d}},Pr=class extends Ne{static{o(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){return(await this.executeQuery(e,n,hm)).filter(s=>s.kind===0)}},pm=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,hm=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,ym=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,bm=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;b();var wm=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),Cr=class extends Ne{static{o(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,n){return this.executeQuery(e,n,vm)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},Nr=class extends Ne{static{o(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,xm)).filter(s=>!wm.has(s.unqualifiedName))}};var vm=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,xm=`
(call_expression function: (_) @name) @reference
`;b();var Rm=new Set(["int","str","float","bool","list","dict","tuple","set"]),Mr=class extends Ne{static{o(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,n){return this.executeQuery(e,n,Tm)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},Lr=class extends Ne{static{o(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,Em)).filter(s=>!Rm.has(s.unqualifiedName))}async extractLocalReferences(e,n,r){let s=await this.executeQuery(e,n,Im),a=s.filter(_=>_.kind!==9),u=s.filter(_=>_.kind===9&&_.extentRange.containsRange(r)),d=[];for(let _ of u)d.push(...a.filter(p=>_.extentRange.containsRange(p.extentRange)));return d}},Dr=class extends Ne{static{o(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){let r=await this.findMatches(n,Sm),s=new Set;try{r.matches.forEach(a=>{let u,d,_,p;for(let x of a.captures)x.name==="import.name"?u=x:x.name==="import.module"?_=x:x.name==="alias"?d=x:x.name==="import"&&(p=x);if(_&&p){let x=u||_,P=d?new he(d.node.startIndex,d.node.endIndex-d.node.startIndex):new he(x.node.startIndex,p.node.endIndex-x.node.endIndex),E=new he(p.node.startIndex,p.node.endIndex-p.node.startIndex),A=he.empty,V=he.empty,j=x.node.text,Q=j.split(".").pop()||j,z;u?z=`${_.node.text}.${u.node.text}`:z=_.node.text,s.add(new nt(e,z,Q,A,P,V,E,17,0))}})}finally{r.tree.delete()}return s.size>0?[...s]:[]}},Tm=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,Em=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,Sm=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,Im=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;b();var km=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),mn=class extends Ne{static{o(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,n){return this.executeQuery(e,n,Pm)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},_n=class extends Ne{static{o(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,Cm)).filter(s=>!km.has(s.unqualifiedName))}extractLocalReferences(){return Promise.reject(new Error("Method not implemented."))}};var Pm=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,Cm=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;b();var Nm=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),Ar=class extends mn{static{o(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,n){return Promise.all([this.executeQuery(e,n,Mm),super.extractSymbols(e,n)]).then(([r,s])=>[...r,...s])}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},Or=class extends _n{static{o(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){let[r,s]=await Promise.all([this.executeQuery(e,n,Lm),super.extractReferences(e,n)]);return[...r.filter(a=>!Nm.has(a.unqualifiedName)),...s]}},Mm=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,Lm=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var Fr=[{symbolExtractor:new Ir,referenceExtractor:new kr,importExtractor:new Pr,languageId:"java"},{symbolExtractor:new Rr,referenceExtractor:new Tr,importExtractor:new Er,languageId:"go"},{symbolExtractor:new Mr,referenceExtractor:new Lr,importExtractor:new Dr,languageId:"python"},{symbolExtractor:new mn,referenceExtractor:new _n,languageId:"typescript"},{symbolExtractor:new Ar,referenceExtractor:new Or,languageId:"typescriptreact"},{symbolExtractor:new Cr,referenceExtractor:new Nr,languageId:"javascript"}];var ka=new Map(Fr.map(t=>[t.languageId,t.referenceExtractor])),Pa=new Map(Fr.map(t=>[t.languageId,t.symbolExtractor])),Ca=new Map(Fr.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),ip=Fr.map(t=>zt[t.languageId].extensions).flat();b();b();b();b();b();b();b();b();b();function ro(t,e,n){return{type:"virtual",indentation:t,subs:e,label:n}}o(ro,"virtualNode");function Na(t,e,n,r,s){if(n==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:n,subs:r,label:s}}o(Na,"lineNode");function io(t){return{type:"blank",lineNumber:t,subs:[]}}o(io,"blankNode");function qr(t){return{type:"top",indentation:-1,subs:t??[]}}o(qr,"topNode");function qe(t){return t.type==="blank"}o(qe,"isBlank");function Qt(t){return t.type==="line"}o(Qt,"isLine");function Gt(t){return t.type==="virtual"}o(Gt,"isVirtual");b();function Ma(t,e){return $e(t,n=>{n.label=n.label?e(n.label)?void 0:n.label:void 0},"bottomUp"),t}o(Ma,"clearLabelsIf");function Zt(t,e){switch(t.type){case"line":case"virtual":{let n=t.subs.map(r=>Zt(r,e));return{...t,subs:n,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(n=>Zt(n,e)),label:t.label?e(t.label):void 0}}}o(Zt,"mapLabels");function $e(t,e,n){function r(s){n==="topDown"&&e(s),s.subs.forEach(a=>{r(a)}),n==="bottomUp"&&e(s)}o(r,"_visit"),r(t)}o($e,"visitTree");function oo(t,e,n,r){let s=e;function a(u){s=n(u,s)}return o(a,"visitor"),$e(t,a,r),s}o(oo,"foldTree");function jr(t,e,n){let r=o(a=>{if(n!==void 0&&n(a))return a;{let u=a.subs.map(r).filter(d=>d!==void 0);return a.subs=u,e(a)}},"rebuild"),s=r(t);return s!==void 0?s:qr()}o(jr,"rebuildTree");b();function Am(t){let e=t.split(`
`),n=e.map(p=>p.match(/^\s*/)[0].length),r=e.map(p=>p.trimLeft());function s(p){let[x,P]=a(p+1,n[p]);return[Na(n[p],p,r[p],x),P]}o(s,"parseNode");function a(p,x){let P,E=[],A=p,V;for(;A<r.length&&(r[A]===""||n[A]>x);)if(r[A]==="")V===void 0&&(V=A),A+=1;else{if(V!==void 0){for(let j=V;j<A;j++)E.push(io(j));V=void 0}[P,A]=s(A),E.push(P)}return V!==void 0&&(A=V),[E,A]}o(a,"parseSubs");let[u,d]=a(0,-1),_=d;for(;_<r.length&&r[_]==="";)u.push(io(_)),_+=1;if(_<r.length)throw new Error(`Parsing did not go to end of file. Ended at ${_} out of ${r.length}`);return qr(u)}o(Am,"parseRaw");function Bn(t,e){function n(r){if(Qt(r)){let s=e.find(a=>a.matches(r.sourceLine));s&&(r.label=s.label)}}o(n,"visitor"),$e(t,n,"bottomUp")}o(Bn,"labelLines");function Ur(t){function e(n){if(Gt(n)&&n.label===void 0){let r=n.subs.filter(s=>!qe(s));r.length===1&&(n.label=r[0].label)}}o(e,"visitor"),$e(t,e,"bottomUp")}o(Ur,"labelVirtualInherited");function $n(t){return Object.keys(t).map(e=>{let n;return t[e].test?n=o(r=>t[e].test(r),"matches"):n=t[e],{matches:n,label:e}})}o($n,"buildLabelRules");function so(t){let n=jr(t,o(function(r){if(r.subs.length===0||r.subs.findIndex(u=>u.label==="closer"||u.label==="opener")===-1)return r;let s=[],a;for(let u=0;u<r.subs.length;u++){let d=r.subs[u],_=r.subs[u-1];if(d.label==="opener"&&_!==void 0&&Qt(_))_.subs.push(d),d.subs.forEach(p=>_.subs.push(p)),d.subs=[];else if(d.label==="closer"&&a!==void 0&&(Qt(d)||Gt(d))&&d.indentation>=a.indentation){let p=s.length-1;for(;p>0&&qe(s[p]);)p-=1;if(a.subs.push(...s.splice(p+1)),d.subs.length>0){let x=a.subs.findIndex(V=>V.label!=="newVirtual"),P=a.subs.slice(0,x),E=a.subs.slice(x),A=E.length>0?[ro(d.indentation,E,"newVirtual")]:[];a.subs=[...P,...A,d]}else a.subs.push(d)}else s.push(d),qe(d)||(a=d)}return r.subs=s,r},"rebuilder"));return Ma(t,r=>r==="newVirtual"),n}o(so,"combineClosersAndOpeners");function La(t,e=qe,n){return jr(t,o(function(s){if(s.subs.length<=1)return s;let a=[],u=[],d,_=!1;function p(x=!1){if(d!==void 0&&(a.length>0||!x)){let P=ro(d,u,n);a.push(P)}else u.forEach(P=>a.push(P))}o(p,"flushBlockIntoNewSubs");for(let x=0;x<s.subs.length;x++){let P=s.subs[x],E=e(P);!E&&_&&(p(),u=[]),_=E,u.push(P),qe(P)||(d=d??P.indentation)}return p(!0),s.subs=a,s},"rebuilder"))}o(La,"groupBlocks");function Jt(t){return jr(t,o(function(n){return Gt(n)&&n.label===void 0&&n.subs.length<=1?n.subs.length===0?void 0:n.subs[0]:(n.subs.length===1&&Gt(n.subs[0])&&n.subs[0].label===void 0&&(n.subs=n.subs[0].subs),n)},"rebuilder"))}o(Jt,"flattenVirtual");var Om={opener:/^[[({]/,closer:/^[\])}]/},Fm=$n(Om),Da={};function ao(t,e){Da[t]=e}o(ao,"registerLanguageSpecificParser");function Wr(t,e){let n=Am(t),r=Da[e??""];return r?r(n):(Bn(n,Fm),so(n))}o(Wr,"parseTree");var qm={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},jm=$n(qm);function Aa(t){let e=t;return Bn(e,jm),e=so(e),e=Jt(e),Ur(e),$e(e,n=>{if(n.label==="class"||n.label==="interface")for(let r of n.subs)!qe(r)&&(r.label===void 0||r.label==="annotation")&&(r.label="member")},"bottomUp"),e}o(Aa,"processJava");b();var Um={heading:/^# /,subheading:/^## /,subsubheading:/### /},Wm=$n(Um);function Oa(t){let e=t;if(Bn(e,Wm),qe(e))return e;function n(a){if(a.label==="heading")return 1;if(a.label==="subheading")return 2;if(a.label==="subsubheading")return 3}o(n,"headingLevel");let r=[e],s=[...e.subs];e.subs=[];for(let a of s){let u=n(a);if(u===void 0||qe(a))r[r.length-1].subs.push(a);else{for(;r.length<u;)r.push(r[r.length-1]);for(r[u-1].subs.push(a),r[u]=a;r.length>u+1;)r.pop()}}return e=La(e),e=Jt(e),Ur(e),e}o(Oa,"processMarkdown");b();function Fa(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}o(Fa,"deparseLine");ao("markdown",Oa);ao("java",Aa);b();b();var fn=Ct(Xa());var Qr=new Map;function rt(t="o200k_base"){let e=Qr.get(t);return e!==void 0||(e=Qr.get("o200k_base"),e!==void 0)?e:new vo}o(rt,"getTokenizer");async function r_(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await vr(t),n=new Map,r=[];for(let s=0;s<e.length;s++){if(e[s]!==255||r.length===0){r.push(e[s]);continue}n.set(Uint8Array.from(r),n.size),r=[]}return n.set(Uint8Array.from(r),n.size),n}o(r_,"parseTikTokenNoIndex");var bo=class t{constructor(e){this._tokenizer=e}static{o(this,"TTokenizer")}static async create(e){try{let n=(0,fn.createTokenizer)(await r_(`resources/${e}.tiktoken.noindex`),(0,fn.getSpecialTokensByEncoder)(e),(0,fn.getRegexByEncoder)(e),32768);return new t(n)}catch(n){throw n instanceof Error?new dn("Could not load tokenizer",n):n}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(r=>this.detokenize([r]))}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,s=1,a=Math.min(e.length,n*r),u=e.slice(-a),d=this.tokenize(u);for(;d.length<n+2&&a<e.length;)a=Math.min(e.length,a+n*s),u=e.slice(-a),d=this.tokenize(u);return d.length<n?{text:e,tokens:d}:(d=d.slice(-n),{text:this.detokenize(d),tokens:d})}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,s=1,a=Math.min(e.length,n*r),u=e.slice(0,a),d=this.tokenize(u);for(;d.length<n+2&&a<e.length;)a=Math.min(e.length,a+n*s),u=e.slice(0,a),d=this.tokenize(u);return d.length<n?{text:e,tokens:d}:(d=d.slice(0,n),{text:this.detokenize(d),tokens:d})}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let s=r.indexOf(`
`);return r.substring(s+1)}},wo=class{constructor(){this.hash=o(e=>{let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);n=(n<<5)-n+s,n&=n&65535}return n},"hash")}static{o(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(n=>n.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,n){let r=this.tokenizeStrings(e).slice(-n);return{text:r.join(""),tokens:r.map(this.hash)}}takeFirstTokens(e,n){let r=this.tokenizeStrings(e).slice(0,n);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let s=r.indexOf(`
`);return r.substring(s+1)}},i_={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},yo=4,vo=class{constructor(e="o200k_base",n){this.languageId=n;this.tokenizerName=e}static{o(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(n=>{let r=0;for(let s=0;s<n.length;s++)r=r*Math.pow(10,yo)+n.charCodeAt(s);return r})}detokenize(e){return e.map(n=>{let r=[],s=n.toString();for(;s.length>0;){let a=s.slice(-yo),u=String.fromCharCode(parseInt(a));r.unshift(u),s=s.slice(0,-yo)}return r.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?i_[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(-Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(s,a)=>a)}}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(0,Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(s,a)=>a)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let s=r.indexOf(`
`);return r.substring(s+1)}};async function Ka(t){try{let e=await bo.create(t);Qr.set(t,e)}catch{}}o(Ka,"setTokenizer");var Nh=(async()=>{Qr.set("mock",new wo),await Promise.all([Ka("cl100k_base"),Ka("o200k_base")])})();var o_={worthUp:.9,worthSibling:.88,worthDown:.8};function xo(t,e,n=rt(),r=o_){let s=Zt(t,a=>a?1:void 0);return $e(s,a=>{if(qe(a))return;let u=a.subs.reduce((d,_)=>Math.max(d,_.label??0),0);a.label=Math.max(a.label??0,u*r.worthUp)},"bottomUp"),$e(s,a=>{if(qe(a))return;let u=a.subs.map(p=>p.label??0),d=[...u];for(let p=0;p<u.length;p++)u[p]!==0&&(d=d.map((x,P)=>Math.max(x,Math.pow(r.worthSibling,Math.abs(p-P))*u[p])));let _=a.label;_!==void 0&&(d=d.map(p=>Math.max(p,r.worthDown*_))),a.subs.forEach((p,x)=>p.label=d[x])},"topDown"),s_(s,e,n)}o(xo,"fromTreeWithFocussedLines");function s_(t,e,n=rt()){let r=oo(t,[],(s,a)=>((s.type==="line"||s.type==="blank")&&a.push(s.type==="line"?[Fa(s).trimEnd(),s.label??0]:["",s.label??0]),a),"topDown");return new Xt(r,e,n)}o(s_,"fromTreeWithValuedLines");function Ya(t,e=!0,n=!0,r,s=rt()){let a=typeof t=="string"?Wr(t):Wr(t.source,t.languageId);Jt(a);let u=Zt(a,d=>e&&d!=="closer");return $e(u,d=>{d.label===void 0&&(d.label=e&&d.label!==!1)},"topDown"),e&&$e(u,d=>{if(d.label){let _=!1;for(let p of[...d.subs].reverse())p.label&&!_?_=!0:p.label=!1}else for(let _ of d.subs)_.label=!1;d.subs.length>0&&(d.label=!1)},"topDown"),n&&$e(u,d=>{d.label||=(Qt(d)||qe(d))&&d.lineNumber==0},"topDown"),xo(u,r,s)}o(Ya,"elidableTextForSourceCode");b();var zn=class t{constructor(e,n,r,s="strict",a){this.text=e;this._value=n;this._cost=r;this.metadata=a;this.markedForRemoval=!1;if(e.includes(`
`)&&s!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(n<0&&s!=="none")throw new Error("LineWithValueAndCost: value is negative");if(r<0&&s!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(s=="strict"&&n>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{o(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=n=>rt().tokenLength(n+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Xt=class t{constructor(e,n,r=rt()){this.metadata=n;this.tokenizer=r;this.lines=[];let s=[];for(let a of e){let u=Array.isArray(a)?a[1]:1,d=Array.isArray(a)?a[0]:a;typeof d=="string"?d.split(`
`).forEach(_=>s.push(new zn(_,u,r.tokenLength(_+`
`),"strict",this.metadata))):d instanceof t?d.lines.forEach(_=>s.push(_.copy().adjustValue(u))):"source"in d&&"languageId"in d&&Ya(d).lines.forEach(_=>s.push(_.copy().adjustValue(u)))}this.lines=s}static{o(this,"ElidableText")}adjust(e){this.lines.forEach(n=>n.adjustValue(e))}recost(e=n=>rt().tokenLength(n+`
`)){this.lines.forEach(n=>n.recost(e))}elide(e,n="[...]",r=!0,s="removeLeastDesirable",a=this.tokenizer,u="topToBottom"){if(a.tokenLength(n+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:d,totalCost:_,priorityQueue:p}=c_(this.lines,s);if(_<=e)return Ro(d);u_(p,u);let x=_;for(;x>e&&p.length>0;){let E=p.shift().originalIndex,A=d[E];if(A.markedForRemoval)continue;let V=r?l_(d,E):"",j=ec(V,n,a,A);d[E]=j,x-=A.cost,x+=j.cost;let Q=E+1;if(Q<d.length){let L=d[Q];Gr(L,n)&&(x-=L.cost,L.markedForRemoval=!0)}let z=E-1;if(z>=0){let L=d[z];Gr(L,n)&&(x-=L.cost,L.markedForRemoval=!0)}}if(x>e)return Ro([ec("",n,a)]);let P=d.filter(E=>!E.markedForRemoval);for(let E=P.length-1;E>0;E--)Gr(P[E],n)&&Gr(P[E-1],n)&&P.splice(E,1);return Ro(P)}};function a_(t){return t?.text.match(/^\s*/)?.[0]??""}o(a_,"getIndentation");function Gr(t,e){return t?.text.trim()===e.trim()}o(Gr,"isEllipsis");function Ro(t){return{getText:o(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:o(()=>t,"getLines")}}o(Ro,"produceElidedText");function c_(t,e){let n=0,r=[];return{lines:t.map((a,u)=>{let d=a.copy();return e==="removeLeastBangForBuck"&&d.adjustValue(1/d.cost),n+=d.cost,r.push({originalIndex:u,value:d.value}),d}),totalCost:n,priorityQueue:r}}o(c_,"initializeElisionContext");function u_(t,e){t.sort((n,r)=>n.value!==r.value?n.value-r.value:e==="bottomToTop"?r.originalIndex-n.originalIndex:n.originalIndex-r.originalIndex)}o(u_,"sortPriorityQueue");function l_(t,e){let n="";for(let r=e;r>=0;r--){let s=t[r];if(!s.markedForRemoval&&s.text.trim()!==""){n=a_(s);break}}return n}o(l_,"getClosestIndentation");function ec(t,e,n,r){let s=t+e;return new zn(s,1/0,n.tokenLength(s+`
`),"loose",r?.metadata)}o(ec,"getNewEllipsis");b();var tc=require("fs");async function nc(t,e,n,r,s){let a=new Map,u=0;for(let P of t){let E=P.node.fileName.toLowerCase(),A=a.get(E);A?A.symbols.push(P):a.set(E,{symbols:[P],topRank:u}),u++}if(a.delete(n.toLowerCase()),a.size===0)return[];let d=e,_=e/Math.min(4,a.size),p=[],x=Array.from(a.keys());x.sort((P,E)=>{let A=a.get(P).topRank,V=a.get(E).topRank;return A-V});for(let P of x){let E=a.get(P).symbols;if(E.length===0)continue;let A=E[0].node.fileName,V=E.reduce((j,Q)=>j+Q.node.extentRange.length,0);for(let j of E){if(d<=5)return p;Tt(s);let Q=j.node.extentRange.length/V,z=Math.min(d,Q*_),L=(await d_([j])).elide(z).getText();d-=r.tokenLength(L),p.push({uri:A,value:L})}}return p}o(nc,"symbolRangesToCodeSnippets");async function d_(t){if(t.length===0)return new Xt([]);let e=t[0].node.fileName,n=[],r="";try{let s=yr(e);s&&(r=(await tc.promises.readFile(s)).toString())}catch{}for(let s of t)rc(s,r).forEach(a=>n.push(a));return new Xt(n)}o(d_,"sameFileSymbolRangeToElidableText");function rc(t,e){let r=[],s=t.node,a=e.substring(To(e,s.commentRange.start),s.commentRange.end);r.push([Eo(a),1-3e-4]);let u=To(e,s.bodyRange.start),d=To(e,s.extentRange.start),_=s.bodyRange.length===0?e.substring(d,s.extentRange.end):e.substring(s.commentRange.length===0?d:s.commentRange.end,u);if(Ht(s.kind)&&(_="BEGIN "+_.trimStart()),r.push([Eo(_),1-1e-4]),t.children.length>0)for(let p of t.children)r.push(...rc(p,e));else{let p=1-(Ht(t.node.kind)?3e-4:4e-4),x=e.substring(u,s.bodyRange.end);r.push([Eo(x),p])}return Ht(s.kind)&&r.push(["END "+_.substring(6),1-1e-4]),r.filter(p=>p[0].length>0)}o(rc,"prepareForElidableText");function To(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}o(To,"shiftLeftToNearestLineEndingOrAlphanumeric");function Eo(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let n=t.length-1;for(;n>=0&&(t[n]==="\r"||t[n]===`
`||t[n]===" "||t[n]==="	");)n--;return t.substring(e,n+1)}o(Eo,"trimLineEndingsAndTrailingWhitespace");var So=class{constructor(e,n){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=n}static{o(this,"ContextRetrievalStrategy")}},Lt=class extends So{static{o(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,n,r,s){super(e,n),this.caseSensitive=r,this.typesOnly=s}async getContextAtPositionAsync(e,n,r,s,a,u){let d=this.referenceExtractors.get(s);if(!d)return[];Tt(u);let _=await d.extractReferences(e,n);Tt(u);let p=Array.from(_);p.sort((A,V)=>this.compareSymbolRangesByProximityToCaret(A,V,r));let x=[],P=new Set,E=await this.findDefinitionsViaUnqualifiedNames(p,a,u);this.typesOnly&&(E=E.filter(A=>Ht(A.kind)));for(let A of E)P.has(JSON.stringify(A))||(P.add(JSON.stringify(A)),x.push(await this.makeSymbolRangeNodeFromDefinition(A,u)));return x}async findDefinitionsViaUnqualifiedNames(e,n,r){let s=Array.from(new Set(e.map(P=>P.unqualifiedName))),a=!this.caseSensitive,u=await this.index.findPotentialDefinitionsAsync(s,a,r),d=o(P=>a?P.toLowerCase():P,"lowercaseIfCaseInsensitive"),_=o(P=>d(P.unqualifiedName),"getSymbolKey"),p=new Map;for(let P of u){let E=_(P),A=p.get(E)??[];p.set(E,[...A,P])}let x=[];for(let P of s){let E=p.get(d(P));if(!(!E||E.length>n.mlcpMaxSymbolMatches)){if(x.length+E.length>n.mlcpMaxContextItems){x.push(...E.slice(0,n.mlcpMaxContextItems-x.length));break}x.push(...E)}}return x}async makeSymbolRangeNodeFromDefinition(e,n){if(Tt(n),Ht(e.kind)){let r=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",n),s=await Promise.all(r.map(a=>this.makeSymbolRangeNodeFromDefinition(a,n)));return{node:e,children:s}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,n,r){let s=e.extentRange.end<=r,a=n.extentRange.end<=r;if(s&&!a)return-1;if(!s&&a)return 1;let u=Math.abs(e.extentRange.start-r),d=Math.abs(n.extentRange.start-r);return u-d}},Zr=class{constructor(e,n){this.strategies=new Map;this.strategies.set("go",new Lt(e,n,!0,!0)),this.strategies.set("java",new Lt(e,n,!0,!0)),this.strategies.set("python",new Lt(e,n,!0,!1)),this.strategies.set("typescript",new Lt(e,n,!0,!0)),this.strategies.set("typescriptreact",new Lt(e,n,!0,!0)),this.strategies.set("javascript",new Lt(e,n,!0,!1))}static{o(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,n,r,s,a,u,d){let _=await this.getContextAtPositionAsync(e,n,r,s,a,d);Tt(d);let p=rt();return nc(_,u,e,p,d)}async getContextAtPositionAsync(e,n,r,s,a,u){return this.strategies.has(s)?this.strategies.get(s).getContextAtPositionAsync(e,n,r,s,a,u):[]}};b();b();b();b();var Kt={Id:"id"},Ye={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},se={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};b();b();var Jr=class{constructor(e,n,r){this.tableName=e;this.createOptimizations=n;this.extraCreateDeclarations=r;this.primaryKey=new Io(Kt.Id)}static{o(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(n=>n.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,n){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let r=[this.cachedInsertQueryStrings.prefix,Array(n).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&r.push("ON CONFLICT DO NOTHING"),r.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},Hn=class t extends Jr{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${Ye.FilePath}');`]);this.fields=[new Zn(Ye.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new Qe(Ye.LastWriteTimeUtc,{notNull:!0})]}static{o(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},Qn=class t extends Jr{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${se.DocumentId}', '${se.ExtentStart}', '${se.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${se.UnqualifiedName}');`],`FOREIGN KEY(${se.DocumentId}) REFERENCES Document(${Kt.Id}) ON DELETE CASCADE`);this.fields=[new Qe(se.DocumentId),new Zn(se.FullyQualifiedName,{notNull:!0}),new Zn(se.UnqualifiedName,{notNull:!0}),new Qe(se.CommentStart,{notNull:!0}),new Qe(se.CommentLength,{notNull:!0}),new Qe(se.NameStart,{notNull:!0}),new Qe(se.NameLength,{notNull:!0}),new Qe(se.BodyStart,{notNull:!0}),new Qe(se.BodyLength,{notNull:!0}),new Qe(se.ExtentStart,{notNull:!0}),new Qe(se.ExtentLength,{notNull:!0}),new Qe(se.SymbolKind,{notNull:!0}),new Qe(se.RefKind,{notNull:!0})]}static{o(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},Gn=class{constructor(e,n){this.name=e;this.notNull=n?.notNull??!1}static{o(this,"SQLField")}},Zn=class extends Gn{static{o(this,"StringColumn")}constructor(e,n){super(e,{notNull:n?.notNull}),this.collate=n?.collate??!1,this.noCase=n?.noCase??!1,this.unique=n?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,n=this.noCase?"NOCASE":void 0,r=this.notNull?"NOT NULL":void 0,s=this.unique?"UNIQUE":void 0,a=[e,n,r,s].filter(u=>u).join(" ");return`'${this.name}' VARCHAR(500) ${a}`}},Qe=class extends Gn{static{o(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},Io=class extends Gn{static{o(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var Xr=class{static{o(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let n=await e;if(n)return await this.create(n),n}async create(e){let n=o(s=>new Promise((a,u)=>{e.run(s,d=>{d?u(d):a()})}),"runQuery"),r=this.queryGenerator.createTableQueries();for(let s of r)await n(s)}async insert(e,n){let r=await this.init;r&&await new Promise((s,a)=>{let u=this.queryGenerator.insertQuery(n,e.length);r.run(u,e.map(d=>Object.values(d)).flat(),function(d){d?a(d):s(this)})})}async getAllRows(){let e=await this.init;return e?it(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let n=await this.init;if(n)return it(n,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${Kt.Id} = ?`,[e])}},Et=class t extends Xr{static{o(this,"DocumentTable")}static{this.tableName=Hn.tableName}createQueryGenerator(){return new Hn}async updateTimestamp(e,n){let r=await this.init;r&&await it(r,`UPDATE ${t.tableName} SET ${Ye.LastWriteTimeUtc} = ? WHERE ${Ye.FilePath} = ?`,[n,e])}async deleteAllWithPath(e){let n=await this.init;n&&await it(n,`DELETE FROM ${t.tableName} WHERE ${Ye.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let n=await this.init;return n?it(n,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${Ye.FilePath} = ?`,[e]):[]}},De=class t extends Xr{static{o(this,"SymbolTable")}static{this.tableName=Qn.tableName}createQueryGenerator(){return new Qn}async clearAllSymbolsFromDocument(e){let n=await this.init;if(n)return it(n,`DELETE FROM ${t.tableName} WHERE ${se.DocumentId} = ?`,[e])}};async function it(t,e,n){return new Promise((r,s)=>t.all(e,n,(a,u)=>{a&&s(a),r(u)}))}o(it,"runPromisifiedDBQuery");var ei=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${Et.tableName} ON ${De.tableName}.${se.DocumentId} = ${Et.tableName}.${Kt.Id}`;this.db=this.initDb(e),this.documentTable=new Et(this.db),this.symbolTable=new De(this.db)}static{o(this,"DocumentSymbolDatabase")}async initDb(e){let n;try{n=await Promise.resolve().then(()=>Ct(pc()))}catch(s){console.error("Error loading sqlite3 module:",s);return}let r;try{r=await new Promise((s,a)=>{let u=new n.default.Database(e,d=>{d?a(d):s(u)})})}catch(s){console.error("Error initializing database:",s);return}return await it(r,"pragma journal_mode=wal",[]),await it(r,"pragma synchronous=normal",[]),await it(r,"pragma optimize=0x10002",[]),await it(r,"pragma foreign_keys = ON",[]),r}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((n,r)=>{e.close(s=>s?r(s):n())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,n){return await this.query([`SELECT * FROM ${De.tableName}`,this.innerJoinStatement,`WHERE ${se.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${se.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,n])}async querySymbolsUsingUnqualifiedNames(e,n){let r=e.map(()=>"?").join(", "),s=n?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${De.tableName}`,this.innerJoinStatement,`WHERE ${se.UnqualifiedName} ${s}IN (${r})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${De.tableName}`,this.innerJoinStatement,`WHERE ${se.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,n){return this.query([`SELECT * FROM ${De.tableName}`,this.innerJoinStatement,`WHERE ${Et.tableName}.${Ye.FilePath} = ? AND ${De.tableName}.${se.ExtentStart} <= ? AND (${De.tableName}.${se.ExtentStart} + ${De.tableName}.${se.ExtentLength}) >= ?`].join(`
`),[e,n,n])}async querySymbolsContainedByRange(e,n,r){return this.query([`SELECT * FROM ${De.tableName}`,this.innerJoinStatement,`WHERE ${Et.tableName}.${Ye.FilePath} = ? AND ${De.tableName}.${se.ExtentStart} >= ? AND (${De.tableName}.${se.ExtentStart} + ${De.tableName}.${se.ExtentLength}) <= ?`,`ORDER BY ${De.tableName}.${se.ExtentStart}`].join(`
`),[e,n,r])}async querySymbolsByQualifiedNamePrefix(e,n){return this.query([`SELECT * FROM ${De.tableName}`,this.innerJoinStatement,`WHERE ${Et.tableName}.${Ye.FilePath} = ? AND ${De.tableName}.${se.FullyQualifiedName} LIKE ?`,`ORDER BY ${De.tableName}.${se.ExtentStart}`].join(`
`),[e,`${n}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,n,r=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:n}],r)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,n){return this.documentTable.updateTimestamp(e,n)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,n){let r=await this.db;return r?(await this.documentTable.init,await this.symbolTable.init,it(r,e,n)):[]}};var ti=class{static{o(this,"SQLStorageReaderWriter")}constructor(e){this.database=new ei(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,n,r){let s=await this.getOrCreateDocumentAsync(e,n);await this.database.clearAllSymbolsFromDocument(s.id),r.length>0&&await this.database.insertSymbols(r.map(a=>({documentId:s.id,fullyQualifiedName:a.fullyQualifiedName,unqualifiedName:a.unqualifiedName,commentStart:a.commentRange.start,commentLength:a.commentRange.length,nameStart:a.nameRange.start,nameLength:a.nameRange.length,bodyStart:a.bodyRange.start,bodyLength:a.bodyRange.length,extentStart:a.extentRange.start,extentLength:a.extentRange.length,symbolKind:a.kind,refKind:a.refKind}))),await this.database.updateDocumentTimestamp(e,n)}async addDocumentsAsync(e){for(let n of e)n=n.toLowerCase(),await this.database.insertDocument(n,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,n){return await this.database.updateDocumentTimestamp(e.toLowerCase(),n)}async fuzzyMatchSymbolsAsync(e,n){return hn(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,n))}async findPotentialDefinitionsAsync(e,n,r){let s=[],u=0;for(;u<e.length;){let d=e.slice(u,u+500);u+=500;let _=await this.database.querySymbolsUsingUnqualifiedNames(d,n);s.push(..._),Tt(r)}return hn(s)}async getDefinitionsAsync(e){return hn(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,n){let r=await this.database.querySymbolsContainingPosition(e.toLowerCase(),n);return hn(r)}async findSymbolsContainedByRangeAsync(e,n,r){return hn(await this.database.querySymbolsContainedByRange(e.toLowerCase(),n,r))}async findSymbolsByFullyQualifiedNamePrefix(e,n){return hn(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),n))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let n=await this.database.getDocument(e);if(n?.at(0))return n[0]}async getOrCreateDocumentAsync(e,n){let r=await this.database.getDocument(e);if(r?.at(0))return r[0];await this.database.insertDocument(e,n,!0);let s=await this.database.getDocument(e);if(!s)throw Error("Unable to insert document");return s[0]}};function hn(t){return t.map(e=>new nt(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new he(e.commentStart,e.commentLength),new he(e.nameStart,e.nameLength),new he(e.bodyStart,e.bodyLength),new he(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}o(hn,"symbolsToSymbolRanges");var ri=Ct(require("fs/promises"));var ni=class{static{o(this,"Index")}constructor(e,n,r,s){this.storage=new ti(e),this.symbolExtractors=n,this.importExtractors=r,this.params=s}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,n){let r=yr(e);if(!r)throw Error(`Cannot resolve a readable file path from ${e}`);let s;try{s=await ri.stat(r)}catch{await this.storage.deleteDocumentAsync(e);return}let a=s.mtimeMs,u=await this.storage.getDocumentAsync(e);if(u&&u.lastWriteTimeUtc>=a)return;let d=this.symbolExtractors.get(n);if(!d)return;let _=(await ri.readFile(r)).toString(),p=await d.extractSymbols(e,_),x=p;if(this.params?.mlcpEnableImports){let P=this.importExtractors.get(n);if(P){let E=await P.extractSymbols(e,_);x=[...p,...E]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,a,x)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(n=>n.filePath)}};b();function Lo(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(n=>y_(n))}o(Lo,"isIndexWorkerData");var Mo=class{static{o(this,"IndexNotification")}constructor(e){this.operation=e}};var St={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"};var dt=class extends Mo{constructor(n,r,s){super(St.Response);this.id=n;this.error=r;this.data=s;r&&"code"in r&&typeof r.code=="string"&&(this.code=r.code)}static{o(this,"ResponseMessage")}};function y_(t){return"databaseFilePath"in t&&"rootPath"in t}o(y_,"isIndexableWorkspaceFolder");var Qd=Ct(Hd()),$t=require("worker_threads");var Vi=class{static{o(this,"IndexInfo")}constructor(e,n){this.index=new ni(e,Pa,Ca,n),this.contextRetreival=new Zr(this.index.reader,ka)}},zi=class t{constructor(e,n,r){this.indices=new Map;this.cancellationTokens=new Map;this.params=r;for(let s of n){let a=Nt(s.rootPath);this.indices.set(a,new Vi(s.databaseFilePath,r))}this.port=e,this.port.on("message",s=>void this.dispatchMessage(s,this.indices,this.cancellationTokens))}static{o(this,"IndexWorker")}async dispatchMessage(e,n,r){try{let s=new Qd.CancellationTokenSource;r.set(e.id,s);let a;switch(e.operation){case St.AddOrInvalidated:a=await t.dispatchAddOrInvalidate(e,n,s.token);break;case St.GetContext:a=await t.dispatchGetContext(e,n,s.token);break;case St.Cancel:r.get(e.id)?.cancel(),a=new dt(e.id,void 0,void 0);break;case St.Exit:a=await this.dispatchExit(e,n,s.token);break;case St.CreateIndex:a=t.dispatchCreateIndex(e,n,s.token);break;case St.RemoveIndex:a=await t.dispatchRemoveIndex(e,n,s.token);break;case St.GetAllDocumentsInWorkspace:a=await t.GetAllDocumentsInWorkspaceRequest(e,n,s.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}a&&this.port?.postMessage(a),r.get(e.id)?.dispose(),r.delete(e.id)}catch(s){if(!(s instanceof Error))throw s;this.port?.postMessage(new dt(e.id,s,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,n,r){let s=Nt(e.baseWorkspaceFolderUri),a,u;return n.has(s)?u=await n.get(s).index.getDocumentFilePaths():a=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new dt(e.id,a,u)}static async dispatchAddOrInvalidate(e,n,r){let s=Nt(e.fileUri),a=t.getIndexInfo(s,n)?.index,u;return a?await a.indexFile(e.fileUri,e.languageId):u=new Error(`Index not found for ${e.fileUri}`),new dt(e.id,u,void 0)}static async dispatchGetContext(e,n,r){let s=Nt(e.fileUri),a=t.getIndexInfo(s,n)?.contextRetreival,u,d;return a?d=await a.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,r):u=new Error(`ContextRetrieval not found for ${e.fileUri}`),new dt(e.id,u,d)}async dispatchExit(e,n,r){for(let s of n.values())await s.index.dispose();n.clear(),this.port?.postMessage(new dt(e.id,void 0,void 0)),this.port?.close()}static dispatchCreateIndex(e,n,r){let s=Nt(e.baseWorkspaceFolderUri);return n.has(s)||n.set(s,new Vi(e.databaseFilePath)),new dt(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,n,r){let s=Nt(e.baseWorkspaceFolderUri);if(n.has(s)){let a=n.get(s);a&&await a.index.dispose(),n.delete(s)}return new dt(e.id,void 0,void 0)}static getIndexInfo(e,n){for(let[r,s]of n)if(e.startsWith(r))return s}};function Rf(){return Lo($t.workerData)}o(Rf,"isIndexWorker");function Tf(){let t=$t.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!Lo($t.workerData))throw new Error("Worker data must provide a valid database path.");let e=$t.workerData.cwd;process.cwd=()=>e,new zi(t,$t.workerData.indexWorkspaceRoots,$t.workerData.params)}o(Tf,"runIndexWorker");0&&(module.exports={IndexWorker,isIndexWorker,runIndexWorker});
//# sourceMappingURL=indexWorker.js.map
